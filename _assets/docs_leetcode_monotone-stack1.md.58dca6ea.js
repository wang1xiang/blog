import{f as n,g as s,J as a}from"./common-03e46d7f.js";const p='{"title":"è·Ÿç€å¡å“¥å­¦ç®—æ³•Day 49ï¼šå•è°ƒæ ˆ part2","frontmatter":{"date":"2025-04-01","title":"è·Ÿç€å¡å“¥å­¦ç®—æ³•Day 49ï¼šå•è°ƒæ ˆ part2","tags":["leetcode"],"describe":"å•è°ƒæ ˆ part2"},"headers":[{"level":2,"title":"42. æ¥é›¨æ°´ ğŸŒŸğŸŒŸ","slug":"_42-æ¥é›¨æ°´-ğŸŒŸğŸŒŸ"},{"level":3,"title":"é¢˜ç›®æè¿°","slug":"é¢˜ç›®æè¿°"},{"level":3,"title":"è§£é¢˜æ€è·¯","slug":"è§£é¢˜æ€è·¯"},{"level":2,"title":"84.æŸ±çŠ¶å›¾ä¸­æœ€å¤§çš„çŸ©å½¢ ğŸŒŸğŸŒŸ","slug":"_84-æŸ±çŠ¶å›¾ä¸­æœ€å¤§çš„çŸ©å½¢-ğŸŒŸğŸŒŸ"},{"level":3,"title":"é¢˜ç›®æè¿°","slug":"é¢˜ç›®æè¿°-2"},{"level":3,"title":"è§£é¢˜æ€è·¯","slug":"è§£é¢˜æ€è·¯-2"}],"relativePath":"docs/leetcode/monotone-stack1.md","lastUpdated":1743558905501.9438}';var t={};const o=[a('<h2 id="_42-æ¥é›¨æ°´-ğŸŒŸğŸŒŸ"><a class="header-anchor" href="#_42-æ¥é›¨æ°´-ğŸŒŸğŸŒŸ" aria-hidden="true">#</a> 42. æ¥é›¨æ°´ ğŸŒŸğŸŒŸ</h2><p><a href="https://leetcode.cn/problems/trapping-rain-water/" target="_blank" rel="noopener noreferrer">åŠ›æ‰£é“¾æ¥</a> ğŸŒŸğŸŒŸ</p><h3 id="é¢˜ç›®æè¿°"><a class="header-anchor" href="#é¢˜ç›®æè¿°" aria-hidden="true">#</a> é¢˜ç›®æè¿°</h3><p>ç»™å®š n ä¸ªéè´Ÿæ•´æ•°è¡¨ç¤ºæ¯ä¸ªå®½åº¦ä¸º 1 çš„æŸ±å­çš„é«˜åº¦å›¾ï¼Œè®¡ç®—æŒ‰æ­¤æ’åˆ—çš„æŸ±å­ï¼Œä¸‹é›¨ä¹‹åèƒ½æ¥å¤šå°‘é›¨æ°´ã€‚</p><p>ç¤ºä¾‹ 1ï¼š</p><p><img src="/blog/_assets/monotone-stack1.02b6212d.png" alt="alt text"></p><ul><li>è¾“å…¥ï¼šheight = [0,1,0,2,1,0,1,3,2,1,2,1]</li><li>è¾“å‡ºï¼š6</li><li>è§£é‡Šï¼šä¸Šé¢æ˜¯ç”±æ•°ç»„ [0,1,0,2,1,0,1,3,2,1,2,1] è¡¨ç¤ºçš„é«˜åº¦å›¾ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥æ¥ 6 ä¸ªå•ä½çš„é›¨æ°´ï¼ˆè“è‰²éƒ¨åˆ†è¡¨ç¤ºé›¨æ°´ï¼‰ã€‚</li></ul><p>ç¤ºä¾‹ 2ï¼š</p><ul><li>è¾“å…¥ï¼šheight = [4,2,0,3,2,5]</li><li>è¾“å‡ºï¼š9</li></ul><h3 id="è§£é¢˜æ€è·¯"><a class="header-anchor" href="#è§£é¢˜æ€è·¯" aria-hidden="true">#</a> è§£é¢˜æ€è·¯</h3><p>å¯¹æ¯ä¸ªæŸ±å­ iï¼Œæ‰¾å‡ºå…¶å·¦ä¾§æœ€é«˜æŸ±å­ leftMax å’Œå³ä¾§æœ€é«˜æŸ±å­ rightMaxï¼Œå½“å‰æŸ±å­ç§¯æ°´é‡å–å†³äºå…¶å·¦å³ä¸¤è¾¹æœ€é«˜æŸ±å­çš„è¾ƒå°å€¼å‡å»å½“å‰æŸ±å­çš„é«˜åº¦</p><div class="language-js"><pre><code>Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>leftMax<span class="token punctuation">,</span> rightMax<span class="token punctuation">)</span> <span class="token operator">-</span> height<span class="token punctuation">[</span>i<span class="token punctuation">]</span>\n</code></pre></div><h4 id="æš´åŠ›æ³•"><a class="header-anchor" href="#æš´åŠ›æ³•" aria-hidden="true">#</a> æš´åŠ›æ³•</h4><p>éå†æ¯ä¸ªä½ç½® iï¼Œæ‰¾åˆ°å·¦è¾¹æœ€å¤§å€¼å’Œå³è¾¹æœ€å¤§å€¼ï¼Œè®¡ç®—æ¯ä¸ªä½ç½®çš„ç§¯æ°´é‡ï¼Œç´¯åŠ æ€»å’Œã€‚</p><ul><li>å·¦è¾¹æœ€å¤§å€¼ï¼š<strong>ä» 0 åˆ° i-1 ä¸­çš„æœ€å¤§å€¼</strong></li><li>å³è¾¹æœ€å¤§å€¼ï¼š<strong>ä» i+1 åˆ°æœ«å°¾çš„æœ€å¤§å€¼</strong></li><li>è®¡ç®—æ¯ä¸ªä½ç½®çš„ç§¯æ°´é‡</li></ul><div class="language-js"><pre><code><span class="token keyword">var</span> <span class="token function-variable function">trap</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">height</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> len <span class="token operator">=</span> height<span class="token punctuation">.</span>length\n  <span class="token keyword">let</span> total <span class="token operator">=</span> <span class="token number">0</span>\n\n  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> leftMax <span class="token operator">=</span> <span class="token number">0</span>\n    <span class="token keyword">let</span> rightMax <span class="token operator">=</span> <span class="token number">0</span>\n    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> i<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      leftMax <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>leftMax<span class="token punctuation">,</span> height<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> i<span class="token punctuation">;</span> j <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      rightMax <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>rightMax<span class="token punctuation">,</span> height<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token keyword">const</span> h <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>leftMax<span class="token punctuation">,</span> rightMax<span class="token punctuation">)</span> <span class="token operator">-</span> height<span class="token punctuation">[</span>i<span class="token punctuation">]</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span>h <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> total <span class="token operator">+=</span> h <span class="token comment">// æ³¨æ„åªæœ‰hå¤§äºé›¶çš„æ—¶å€™ï¼Œåœ¨ç»Ÿè®¡åˆ°æ€»å’Œä¸­</span>\n  <span class="token punctuation">}</span>\n  <span class="token keyword">return</span> total\n<span class="token punctuation">}</span>\n</code></pre></div><p>æš´åŠ›æ³•ï¼šO(n^2)</p><h4 id="åŒæŒ‡é’ˆä¼˜åŒ–"><a class="header-anchor" href="#åŒæŒ‡é’ˆä¼˜åŒ–" aria-hidden="true">#</a> åŒæŒ‡é’ˆä¼˜åŒ–</h4><ul><li><p>æ˜¯å¯¹æš´åŠ›æ³•çš„ä¼˜åŒ–ï¼Œæš´åŠ›æ³•éœ€è¦å¾—åˆ°æŸ±å­ i ä¸¤è¾¹çš„æœ€é«˜é«˜åº¦ leftMax å’Œ rightMax</p></li><li><p>maxLeft æ•°ç»„ç”¨äºè®°å½•æ¯ä¸ªæŸ±å­ i å·¦è¾¹çš„æœ€é«˜é«˜åº¦</p><p>ä»å·¦åˆ°å³éå†ï¼Œæ¯ä¸ªæŸ±å­çš„å·¦è¾¹æœ€å¤§é«˜åº¦æ˜¯ï¼š</p><ul><li>å½“å‰æŸ±å­çš„é«˜åº¦ height[i] å’Œ</li><li>å®ƒå·¦è¾¹æŸ±å­çš„æœ€å¤§é«˜åº¦ maxLeft[i - 1] çš„è¾ƒå¤§å€¼</li></ul></li><li><p>maxRight æ•°ç»„ç”¨äºè®°å½•æ¯ä¸ªæŸ±å­ i å³è¾¹çš„æœ€é«˜é«˜åº¦</p><p>ä»å³åˆ°å·¦éå†ï¼Œæ¯ä¸ªæŸ±å­çš„å³è¾¹æœ€å¤§é«˜åº¦æ˜¯ï¼š</p><ul><li>å½“å‰æŸ±å­çš„é«˜åº¦ height[i] å’Œ</li><li>å®ƒå³è¾¹æŸ±å­çš„æœ€å¤§é«˜åº¦ maxRight[i + 1] çš„è¾ƒå¤§å€¼</li></ul></li></ul><div class="language-js"><pre><code><span class="token comment">//åŒæŒ‡é’ˆ</span>\n<span class="token keyword">var</span> <span class="token function-variable function">trap</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">height</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> len <span class="token operator">=</span> height<span class="token punctuation">.</span>length\n  <span class="token keyword">if</span> <span class="token punctuation">(</span>len <span class="token operator">&lt;=</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">0</span> <span class="token comment">// å¦‚æœæŸ±å­æ•°é‡å°äºç­‰äº2ï¼Œæ— æ³•å½¢æˆç§¯æ°´ï¼Œç›´æ¥è¿”å›0</span>\n\n  <span class="token keyword">const</span> maxLeft <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>len<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// ç”¨äºè®°å½•æ¯ä¸ªæŸ±å­å·¦è¾¹çš„æœ€å¤§é«˜åº¦</span>\n  <span class="token keyword">const</span> maxRight <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>len<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// ç”¨äºè®°å½•æ¯ä¸ªæŸ±å­å³è¾¹çš„æœ€å¤§é«˜åº¦</span>\n\n  <span class="token comment">// è®°å½•æ¯ä¸ªæŸ±å­å·¦è¾¹æŸ±å­çš„æœ€å¤§é«˜åº¦</span>\n  maxLeft<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> height<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token comment">// ç¬¬ä¸€ä¸ªæŸ±å­çš„å·¦è¾¹æœ€å¤§é«˜åº¦å°±æ˜¯å®ƒè‡ªå·±</span>\n  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    maxLeft<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>height<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> maxLeft<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// å½“å‰æŸ±å­çš„å·¦è¾¹æœ€å¤§é«˜åº¦æ˜¯å®ƒå·¦è¾¹æŸ±å­çš„æœ€å¤§é«˜åº¦å’Œå®ƒè‡ªèº«é«˜åº¦çš„è¾ƒå¤§å€¼</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token comment">// è®°å½•æ¯ä¸ªæŸ±å­å³è¾¹æŸ±å­çš„æœ€å¤§é«˜åº¦</span>\n  maxRight<span class="token punctuation">[</span>len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> height<span class="token punctuation">[</span>len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token comment">// æœ€åä¸€ä¸ªæŸ±å­çš„å³è¾¹æœ€å¤§é«˜åº¦å°±æ˜¯å®ƒè‡ªå·±</span>\n  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> len <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    maxRight<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>height<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> maxRight<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// å½“å‰æŸ±å­çš„å³è¾¹æœ€å¤§é«˜åº¦æ˜¯å®ƒå³è¾¹æŸ±å­çš„æœ€å¤§é«˜åº¦å’Œå®ƒè‡ªèº«é«˜åº¦çš„è¾ƒå¤§å€¼</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token comment">// æ±‚å’Œ</span>\n  <span class="token keyword">let</span> sum <span class="token operator">=</span> <span class="token number">0</span> <span class="token comment">// ç”¨äºè®°å½•æ€»çš„ç§¯æ°´é‡</span>\n  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> count <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>maxLeft<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> maxRight<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span> height<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token comment">// å½“å‰æŸ±å­ä¸Šæ–¹çš„ç§¯æ°´é‡æ˜¯å·¦å³ä¸¤è¾¹æœ€å¤§é«˜åº¦çš„è¾ƒå°å€¼å‡å»å½“å‰æŸ±å­çš„é«˜åº¦</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span>count <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> sum <span class="token operator">+=</span> count <span class="token comment">// å¦‚æœç§¯æ°´é‡å¤§äº0ï¼Œåˆ™ç´¯åŠ åˆ°æ€»ç§¯æ°´é‡ä¸­</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token keyword">return</span> sum <span class="token comment">// è¿”å›æ€»ç§¯æ°´é‡</span>\n<span class="token punctuation">}</span>\n</code></pre></div><h4 id="å•è°ƒæ ˆ"><a class="header-anchor" href="#å•è°ƒæ ˆ" aria-hidden="true">#</a> å•è°ƒæ ˆ</h4><ol><li><p>ä¸æš´åŠ›æ³•ä¸åŒï¼Œå•è°ƒæ ˆæ˜¯æŒ‰ç…§è¡Œæ¥è®¡ç®—ç§¯æ°´é‡</p></li><li><p>æ ˆå¤´åˆ°æ ˆå°¾æ˜¯é€’å¢çš„</p><ul><li>ä¸€æ—¦å‘ç°æ·»åŠ çš„æŸ±å­é«˜åº¦å¤§äºæ ˆå¤´å…ƒç´ ï¼Œåˆ™å‡ºç°å‡¹æ§½</li><li>æ­¤æ—¶æ ˆå¤´å…ƒç´ å°±æ˜¯å‡¹æ§½çš„åº•éƒ¨ï¼Œæ ˆå¤´ç¬¬äºŒä¸ªå…ƒç´ å°±æ˜¯å‡¹æ§½çš„å·¦æŸ±å­ï¼Œå½“å‰å…ƒç´ å°±æ˜¯å‡¹æ§½çš„å³æŸ±å­</li></ul></li><li><p>é‡åˆ°ç›¸åŒé«˜åº¦çš„æŸ±å­ï¼Œåˆ™å¼¹å‡ºæ—§çš„ï¼ŒåŠ å…¥æ–°çš„ï¼Œå› ä¸ºè¦æ±‚å®½åº¦çš„æ—¶å€™ï¼Œéœ€è¦æœ‰æœ€å³è¾¹çš„æŸ±å­æ¥è®¡ç®—</p></li></ol><p>å¤„ç†é€»è¾‘ï¼š</p><ul><li><p>å½“å‰éå†æŸ±å­é«˜åº¦å°äºæ ˆé¡¶å…ƒç´ é«˜åº¦ height[i] &lt; height[stack.top()]</p><p>å½“å‰å…ƒç´ å…¥æ ˆ</p></li><li><p>å½“å‰éå†æŸ±å­é«˜åº¦ç­‰äºæ ˆé¡¶å…ƒç´ é«˜åº¦ height[i] == height[stack.top()]</p><ul><li>éœ€è¦å…ˆå°†æ—§å…ƒç´ å‡ºæ ˆ</li><li>æ–°å…ƒç´ å†å…¥æ ˆ</li></ul></li><li><p>å½“å‰éå†æŸ±å­é«˜åº¦å¤§äºæ ˆé¡¶å…ƒç´ é«˜åº¦ height[i] &gt; height[stack.top()]</p><p>å‡ºç°å‡¹æ§½ <img src="/blog/_assets/monotone-stack11.d875579d.png" alt="alt text"></p><ul><li>å¼¹å‡ºæ ˆé¡¶å…ƒç´ ï¼Œå¼¹å‡ºçš„å…ƒç´ å°±æ˜¯å‡¹æ§½çš„åº•éƒ¨</li><li>å¼¹å‡ºæ ˆé¡¶ç¬¬äºŒä¸ªå…ƒç´ ï¼Œå¼¹å‡ºçš„å…ƒç´ å°±æ˜¯å‡¹æ§½çš„å·¦è¾¹æŸ±å­</li><li>å½“å‰å…ƒç´ å°±æ˜¯å‡¹æ§½çš„å³è¾¹æŸ±å­</li></ul><div class="language-js"><pre><code><span class="token keyword">const</span> min <span class="token operator">=</span> stack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// å¼¹å‡ºæ ˆé¡¶å…ƒç´ ï¼Œå‡¹æ§½åº•éƒ¨</span>\n<span class="token keyword">const</span> left <span class="token operator">=</span> stack<span class="token punctuation">[</span>stack<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token comment">// æ ˆé¡¶ç¬¬äºŒä¸ªå…ƒç´ ï¼Œå‡¹æ§½å·¦è¾¹æŸ±å­</span>\n<span class="token comment">// å½“å‰æ§½çš„é«˜åº¦</span>\n<span class="token keyword">const</span> h <span class="token operator">=</span>\n  Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>\n    height<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>\n    height<span class="token punctuation">[</span>left<span class="token punctuation">]</span> <span class="token comment">// å³è¾¹æŸ±å­å’Œæ ˆé¡¶å…ƒç´ çš„è¾ƒå°å€¼</span>\n  <span class="token punctuation">)</span> <span class="token operator">-</span> height<span class="token punctuation">[</span>mid<span class="token punctuation">]</span>\n<span class="token comment">// å½“å‰æ§½çš„å®½åº¦ = å‡¹æ§½å³è¾¹çš„ä¸‹æ ‡ - å‡¹æ§½å·¦è¾¹çš„ä¸‹æ ‡ - 1</span>\n<span class="token keyword">const</span> w <span class="token operator">=</span> i <span class="token operator">-</span> left <span class="token operator">-</span> <span class="token number">1</span>\nsum <span class="token operator">=</span> h <span class="token operator">*</span> w\n</code></pre></div></li></ul><div class="language-js"><pre><code><span class="token keyword">var</span> <span class="token function-variable function">trap</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">height</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> len <span class="token operator">=</span> height<span class="token punctuation">.</span>length\n  <span class="token keyword">let</span> total <span class="token operator">=</span> <span class="token number">0</span>\n  <span class="token keyword">const</span> stack <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>\n  stack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>\n\n  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">while</span> <span class="token punctuation">(</span>stack<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> height<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&gt;</span> height<span class="token punctuation">[</span>stack<span class="token punctuation">[</span>stack<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token keyword">const</span> mid <span class="token operator">=</span> stack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n      <span class="token keyword">if</span> <span class="token punctuation">(</span>stack<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token keyword">const</span> left <span class="token operator">=</span> stack<span class="token punctuation">[</span>stack<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span>\n        <span class="token keyword">const</span> h <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>height<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> height<span class="token punctuation">[</span>left<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span> height<span class="token punctuation">[</span>mid<span class="token punctuation">]</span>\n        <span class="token keyword">const</span> w <span class="token operator">=</span> i <span class="token operator">-</span> stack<span class="token punctuation">[</span>stack<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token number">1</span> <span class="token comment">// æ³¨æ„å‡ä¸€ï¼Œåªæ±‚ä¸­é—´å®½åº¦</span>\n        total <span class="token operator">+=</span> h <span class="token operator">*</span> w\n      <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n    stack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token keyword">return</span> total\n<span class="token punctuation">}</span>\n</code></pre></div><h2 id="_84-æŸ±çŠ¶å›¾ä¸­æœ€å¤§çš„çŸ©å½¢-ğŸŒŸğŸŒŸ"><a class="header-anchor" href="#_84-æŸ±çŠ¶å›¾ä¸­æœ€å¤§çš„çŸ©å½¢-ğŸŒŸğŸŒŸ" aria-hidden="true">#</a> 84.æŸ±çŠ¶å›¾ä¸­æœ€å¤§çš„çŸ©å½¢ ğŸŒŸğŸŒŸ</h2><p><a href="https://leetcode.cn/problems/largest-rectangle-in-histogram/" target="_blank" rel="noopener noreferrer">åŠ›æ‰£é“¾æ¥</a> ğŸŒŸğŸŒŸ</p><h3 id="é¢˜ç›®æè¿°-2"><a class="header-anchor" href="#é¢˜ç›®æè¿°-2" aria-hidden="true">#</a> é¢˜ç›®æè¿°</h3><p>ç»™ç»™å®š n ä¸ªéè´Ÿæ•´æ•°ï¼Œç”¨æ¥è¡¨ç¤ºæŸ±çŠ¶å›¾ä¸­å„ä¸ªæŸ±å­çš„é«˜åº¦ã€‚æ¯ä¸ªæŸ±å­å½¼æ­¤ç›¸é‚»ï¼Œä¸”å®½åº¦ä¸º 1 ã€‚</p><p>æ±‚åœ¨è¯¥æŸ±çŠ¶å›¾ä¸­ï¼Œèƒ½å¤Ÿå‹¾å‹’å‡ºæ¥çš„çŸ©å½¢çš„æœ€å¤§é¢ç§¯ã€‚</p><p><img src="/blog/_assets/monotone-stack12.9e1b81ba.png" alt="alt text"><img src="/blog/_assets/monotone-stack13.111ac494.png" alt="alt text"></p><ul><li>1 &lt;= heights.length &lt;=10^5</li><li>0 &lt;= heights[i] &lt;= 10^4</li></ul><h3 id="è§£é¢˜æ€è·¯-2"><a class="header-anchor" href="#è§£é¢˜æ€è·¯-2" aria-hidden="true">#</a> è§£é¢˜æ€è·¯</h3><h4 id="æš´åŠ›æ³•-2"><a class="header-anchor" href="#æš´åŠ›æ³•-2" aria-hidden="true">#</a> æš´åŠ›æ³•</h4><p>å¯¹æ¯ä¸ªæŸ±å­ iï¼Œå‘å·¦å³æ‰©å±•æ‰¾åˆ°ç¬¬ä¸€ä¸ªæ¯”å®ƒå°çš„å·¦è¾¹ç•Œ left å’Œå³è¾¹ç•Œ rightï¼Œå½“å‰æŸ±å­èƒ½å½¢æˆçš„æœ€å¤§çŸ©å½¢é¢ç§¯ä¸º</p><div class="language-js"><pre><code><span class="token keyword">var</span> <span class="token function-variable function">largestRectangleArea</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">heights</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> n <span class="token operator">=</span> heights<span class="token punctuation">.</span>length\n\n  <span class="token keyword">let</span> sum <span class="token operator">=</span> <span class="token number">0</span>\n\n  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> left <span class="token operator">=</span> i <span class="token operator">-</span> <span class="token number">1</span>\n    <span class="token keyword">while</span> <span class="token punctuation">(</span>left <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> heights<span class="token punctuation">[</span>left<span class="token punctuation">]</span> <span class="token operator">&gt;=</span> heights<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> left<span class="token operator">--</span>\n    <span class="token keyword">let</span> right <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span>\n    <span class="token keyword">while</span> <span class="token punctuation">(</span>right <span class="token operator">&lt;</span> n <span class="token operator">&amp;&amp;</span> heights<span class="token punctuation">[</span>right<span class="token punctuation">]</span> <span class="token operator">&gt;=</span> heights<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> right<span class="token operator">++</span>\n\n    <span class="token keyword">const</span> w <span class="token operator">=</span> right <span class="token operator">-</span> left <span class="token operator">-</span> <span class="token number">1</span>\n    sum <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>sum<span class="token punctuation">,</span> heights<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">*</span> w<span class="token punctuation">)</span>\n  <span class="token punctuation">}</span>\n  <span class="token keyword">return</span> sum\n<span class="token punctuation">}</span>\n</code></pre></div><h4 id="åŒæŒ‡é’ˆä¼˜åŒ–-2"><a class="header-anchor" href="#åŒæŒ‡é’ˆä¼˜åŒ–-2" aria-hidden="true">#</a> åŒæŒ‡é’ˆä¼˜åŒ–</h4><p>é¢„å¤„ç†æ¯ä¸ªæŸ±å­çš„å·¦è¾¹ç•Œ left å’Œå³è¾¹ç•Œ rightï¼Œåˆ©ç”¨è·³è·ƒæŒ‡é’ˆå¿«é€Ÿæ‰¾åˆ°è¾¹ç•Œï¼Œé¿å…é‡å¤éå†</p><div class="language-js"><pre><code><span class="token keyword">function</span> <span class="token function">largestRectangleAreaOptimized</span><span class="token punctuation">(</span><span class="token parameter">heights</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> n <span class="token operator">=</span> heights<span class="token punctuation">.</span>length\n  <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">0</span>\n  <span class="token keyword">const</span> left <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>\n  <span class="token keyword">const</span> right <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span>\n\n  <span class="token comment">// é¢„å¤„ç†å·¦è¾¹ç•Œ</span>\n  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> p <span class="token operator">=</span> i <span class="token operator">-</span> <span class="token number">1</span>\n    <span class="token keyword">while</span> <span class="token punctuation">(</span>p <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> heights<span class="token punctuation">[</span>p<span class="token punctuation">]</span> <span class="token operator">&gt;=</span> heights<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> p <span class="token operator">=</span> left<span class="token punctuation">[</span>p<span class="token punctuation">]</span>\n    left<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> p\n  <span class="token punctuation">}</span>\n\n  <span class="token comment">// é¢„å¤„ç†å³è¾¹ç•Œ</span>\n  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> n <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> p <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span>\n    <span class="token keyword">while</span> <span class="token punctuation">(</span>p <span class="token operator">&lt;</span> n <span class="token operator">&amp;&amp;</span> heights<span class="token punctuation">[</span>p<span class="token punctuation">]</span> <span class="token operator">&gt;=</span> heights<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> p <span class="token operator">=</span> right<span class="token punctuation">[</span>p<span class="token punctuation">]</span>\n    right<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> p\n  <span class="token punctuation">}</span>\n\n  <span class="token comment">// è®¡ç®—æœ€å¤§é¢ç§¯</span>\n  <span class="token keyword">let</span> maxArea <span class="token operator">=</span> <span class="token number">0</span>\n  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> width <span class="token operator">=</span> right<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">-</span> left<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token number">1</span>\n    maxArea <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>maxArea<span class="token punctuation">,</span> heights<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">*</span> width<span class="token punctuation">)</span>\n  <span class="token punctuation">}</span>\n  <span class="token keyword">return</span> maxArea\n<span class="token punctuation">}</span>\n</code></pre></div><h4 id="å•è°ƒæ ˆ-2"><a class="header-anchor" href="#å•è°ƒæ ˆ-2" aria-hidden="true">#</a> å•è°ƒæ ˆ</h4><ul><li>åŒºåˆ«ï¼šå•è°ƒé€’å‡æ ˆï¼ˆæ ˆå¤´åˆ°æ ˆåº•çš„é¡ºåºä»å¤§åˆ°å°ï¼‰</li><li>é‡åˆ°æ¯”æ ˆé¡¶å°çš„æŸ±å­æ—¶ï¼Œå¼¹å‡ºæ ˆé¡¶å¹¶è®¡ç®—ä»¥è¯¥é«˜åº¦ä¸ºé«˜çš„çŸ©å½¢é¢ç§¯ï¼Œå·¦è¾¹ç•Œä¸ºæ–°çš„æ ˆé¡¶ï¼Œå³è¾¹ç•Œä¸ºå½“å‰ç´¢å¼•</li></ul><div class="language-js"><pre><code><span class="token keyword">function</span> <span class="token function">largestRectangleAreaMonotonicStack</span><span class="token punctuation">(</span><span class="token parameter">heights</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  heights <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">...</span>heights<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span> <span class="token comment">// æ·»åŠ å“¨å…µç®€åŒ–ä»£ç </span>\n  <span class="token keyword">let</span> stack <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>\n  <span class="token keyword">let</span> maxArea <span class="token operator">=</span> <span class="token number">0</span>\n  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> heights<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">while</span> <span class="token punctuation">(</span>stack<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> heights<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;</span> heights<span class="token punctuation">[</span>stack<span class="token punctuation">[</span>stack<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token keyword">const</span> top <span class="token operator">=</span> stack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n      <span class="token keyword">const</span> left <span class="token operator">=</span> stack<span class="token punctuation">[</span>stack<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span>\n      <span class="token keyword">const</span> width <span class="token operator">=</span> i <span class="token operator">-</span> left <span class="token operator">-</span> <span class="token number">1</span>\n      maxArea <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>maxArea<span class="token punctuation">,</span> heights<span class="token punctuation">[</span>top<span class="token punctuation">]</span> <span class="token operator">*</span> width<span class="token punctuation">)</span>\n    <span class="token punctuation">}</span>\n    stack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>\n  <span class="token punctuation">}</span>\n  <span class="token keyword">return</span> maxArea\n<span class="token punctuation">}</span>\n</code></pre></div>',42)];t.render=function(a,p,t,e,c,l){return n(),s("div",null,o)};export{p as __pageData,t as default};
