<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>
      ã€Œè®°å½•ç¯‡ã€æˆ‘æ˜¯å¦‚ä½•ä¸€æ­¥æ­¥ä¸ºå…¬å¸æ­å»ºreacté¡¹ç›®è„šæ‰‹æ¶çš„ | å­¦ä¹ ç¬”è®°
    </title>
    <meta name="description" content="A VitePress site">
    <link rel="stylesheet" href="/blog/_assets/style.85766dd9.css">
    <link rel="modulepreload" href="/blog/_assets/common-03e46d7f.js">
    <link rel="modulepreload" href="/blog/_assets/docs_vite_vite-react-cli.md.80bd9198.lean.js">
    <link rel="modulepreload" href="/blog/_assets/app.77369b76.js">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
    <meta name="keywords" content="ç¿”å­Blog">
    <link rel="icon" href="/blog/favicon.ico">
    <link rel="stylesheet" href="https://lib.baomitu.com/gitalk/1.7.0/gitalk.min.css">
    <script src="https://lib.baomitu.com/gitalk/1.7.0/gitalk.min.js"></script>
    <script src="https://lib.baomitu.com/axios/0.21.1/axios.js"></script>
    
  </head>
  <body>
    <div id="app"><!--[--><div id="containerColor" class="no-sidebar theme" data-v-afcf09d4><header class="navbar" data-v-afcf09d4><!--[--><a class="title" aria-label="å­¦ä¹ ç¬”è®°, back to home" href="/blog/"><img class="logo" src="/blog/favicon.ico" alt="logo"><span>å­¦ä¹ ç¬”è®°</span></a><div class="flex-grow"></div><nav class="nav-links hide-mobile"><!--[--><!--[--><div class="nav-item"><a class="nav-link" href="/blog/index.html" target="" rel="">ğŸ  é¦–é¡µ <!----></a></div><!--]--><!--[--><div class="nav-item"><a class="nav-link" href="/blog/more/docs.html" target="" rel="">ğŸ“… å½’æ¡£ <!----></a></div><!--]--><!--[--><div class="nav-item"><a class="nav-link" href="/blog/more/tags.html" target="" rel="">ğŸ“‚ åˆ†ç±» <!----></a></div><!--]--><!--]--><div id="docsearch"></div><!----><!----></nav><!--[--><!--]--><!--]--><div class="sidebar-button" data-v-afcf09d4><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div></header><aside class="" data-v-afcf09d4><!--[--><nav class="nav-links show-mobile"><!--[--><!--[--><div class="nav-item"><a class="nav-link" href="/blog/index.html" target="" rel="">ğŸ  é¦–é¡µ <!----></a></div><!--]--><!--[--><div class="nav-item"><a class="nav-link" href="/blog/more/docs.html" target="" rel="">ğŸ“… å½’æ¡£ <!----></a></div><!--]--><!--[--><div class="nav-item"><a class="nav-link" href="/blog/more/tags.html" target="" rel="">ğŸ“‚ åˆ†ç±» <!----></a></div><!--]--><!--]--><div id="docsearch"></div><!----><!----></nav><!--[--><!--]--><ul class="sidebar"><!--[--><!--]--></ul><!--[--><!--]--><!--]--></aside><!----><!-- TODO: make this button accessible --><div class="sidebar-mask" data-v-afcf09d4></div><main data-v-afcf09d4><!--[--><div class="content"><!--[--><!--]--><div class="md-header"><div class="md-title">ã€Œè®°å½•ç¯‡ã€æˆ‘æ˜¯å¦‚ä½•ä¸€æ­¥æ­¥ä¸ºå…¬å¸æ­å»ºreacté¡¹ç›®è„šæ‰‹æ¶çš„</div><span id="jinrishici-sentence">æ­£åœ¨åŠ è½½ä»Šæ—¥è¯—è¯....</span><div class="md-date">2023-05-13</div></div><ul class="catalog"><!--[--><li class="catalog-item"><a class="level level-2" href="#ğŸ”¥-è¿è¡Œæµç¨‹">ğŸ”¥ è¿è¡Œæµç¨‹</a><!----></li><li class="catalog-item"><a class="level level-2" href="#ğŸ-å®‰è£…-ä½¿ç”¨">ğŸ å®‰è£… &amp; ä½¿ç”¨</a><!----></li><li class="catalog-item"><a class="level level-2" href="#èµ·å› ">èµ·å› </a><!----></li><li class="catalog-item"><a class="level level-2" href="#é’ˆå¯¹-create-vite-çš„ä¿®æ”¹">é’ˆå¯¹ create-vite çš„ä¿®æ”¹</a><!----></li><li class="catalog-item"><!----><a class="level level-3" href="#åˆ é™¤ä¸éœ€è¦çš„æ¨¡å—">åˆ é™¤ä¸éœ€è¦çš„æ¨¡å—</a></li><li class="catalog-item"><!----><a class="level level-3" href="#ä¿®æ”¹æ¨¡æ¿-vite-config-ts-ä»£ç ">ä¿®æ”¹æ¨¡æ¿ vite.config.ts ä»£ç </a></li><li class="catalog-item"><!----><a class="level level-3" href="#ä½¿ç”¨-sass-ä½œä¸º-css-é¢„å¤„ç†å™¨">ä½¿ç”¨ sass ä½œä¸º css é¢„å¤„ç†å™¨</a></li><li class="catalog-item"><!----><a class="level level-3" href="#å°†-classnames-å¼•å…¥é¡¹ç›®">å°† classnames å¼•å…¥é¡¹ç›®</a></li><li class="catalog-item"><a class="level level-2" href="#ç»Ÿä¸€ä»£ç -git-è§„èŒƒ">ç»Ÿä¸€ä»£ç  &amp; git è§„èŒƒ</a><!----></li><li class="catalog-item"><!----><a class="level level-3" href="#ä½¿ç”¨-editorconfig-ç»Ÿä¸€-ide-ç¼–ç é£æ ¼">ä½¿ç”¨ EditorConfig ç»Ÿä¸€ IDE ç¼–ç é£æ ¼</a></li><li class="catalog-item"><!----><a class="level level-3" href="#æ·»åŠ -eslint-prettier-ç”¨äºä»£ç è§„èŒƒ">æ·»åŠ  eslint &amp; prettier ç”¨äºä»£ç è§„èŒƒ</a></li><li class="catalog-item"><!----><a class="level level-3" href="#æ·»åŠ -pre-commit-å’Œ-commit-msg-é’©å­">æ·»åŠ  pre-commit å’Œ commit-msg é’©å­</a></li><li class="catalog-item"><a class="level level-2" href="#é›†æˆ-ant-design-ä½œä¸º-ui-åº“">é›†æˆ ant design ä½œä¸º UI åº“</a><!----></li><li class="catalog-item"><a class="level level-2" href="#é›†æˆ-react-router-ä½œä¸ºè·¯ç”±">é›†æˆ react-router ä½œä¸ºè·¯ç”±</a><!----></li><li class="catalog-item"><!----><a class="level level-3" href="#react-router-v6-è¯´æ˜">react-router v6 è¯´æ˜</a></li><li class="catalog-item"><!----><a class="level level-3" href="#react-router-v6-ä½¿ç”¨æ•™ç¨‹">react-router v6 ä½¿ç”¨æ•™ç¨‹</a></li><li class="catalog-item"><a class="level level-2" href="#é›†æˆ-redux-toolkit-ä½œä¸ºçŠ¶æ€ç®¡ç†">é›†æˆ Redux toolkit ä½œä¸ºçŠ¶æ€ç®¡ç†</a><!----></li><li class="catalog-item"><!----><a class="level level-3" href="#ä¸ºä»€ä¹ˆæ˜¯-redux-toolkit">ä¸ºä»€ä¹ˆæ˜¯ Redux toolkit</a></li><li class="catalog-item"><!----><a class="level level-3" href="#redux-toolkit-ä½¿ç”¨æ•™ç¨‹">Redux Toolkit ä½¿ç”¨æ•™ç¨‹</a></li><li class="catalog-item"><!----><a class="level level-3" href="#redux-toolkit-å¼‚æ­¥æ“ä½œ">Redux Toolkit å¼‚æ­¥æ“ä½œ</a></li><li class="catalog-item"><a class="level level-2" href="#é›†æˆ-react-query-ä½œä¸ºè¯·æ±‚åº“">é›†æˆ react-query ä½œä¸ºè¯·æ±‚åº“</a><!----></li><li class="catalog-item"><!----><a class="level level-3" href="#ä¸ºä»€ä¹ˆæ˜¯-react-query">ä¸ºä»€ä¹ˆæ˜¯ react query</a></li><li class="catalog-item"><!----><a class="level level-3" href="#react-query-ä½¿ç”¨æ•™ç¨‹">react query ä½¿ç”¨æ•™ç¨‹</a></li><li class="catalog-item"><a class="level level-2" href="#å‘å¸ƒ-npm">å‘å¸ƒ npm</a><!----></li><li class="catalog-item"><a class="level level-2" href="#å¦‚ä½•ä½¿ç”¨">å¦‚ä½•ä½¿ç”¨</a><!----></li><li class="catalog-item"><a class="level level-2" href="#æ€»ç»“">æ€»ç»“</a><!----></li><!--]--></ul><div><h1 id="create-vct"><a class="header-anchor" href="#create-vct" aria-hidden="true">#</a> <img src="/blog/_assets/create-vct.3c13469e.svg" alt="create-vct"> create-vct</h1><p>è¿™æ˜¯ä¸€ä¸ªç”¨äºåˆå§‹åŒ– vite + React ä¼ä¸šçº§é¡¹ç›®çš„è„šæ‰‹æ¶å·¥å…·ã€‚</p><h2 id="ğŸ”¥-è¿è¡Œæµç¨‹"><a class="header-anchor" href="#ğŸ”¥-è¿è¡Œæµç¨‹" aria-hidden="true">#</a> ğŸ”¥ è¿è¡Œæµç¨‹</h2><p><img src="/blog/_assets/create-vct-flow.31105c05.gif" alt="create-vct-flow.gif"></p><h2 id="ğŸ-å®‰è£…-ä½¿ç”¨"><a class="header-anchor" href="#ğŸ-å®‰è£…-ä½¿ç”¨" aria-hidden="true">#</a> ğŸ å®‰è£… &amp; ä½¿ç”¨</h2><div class="language-bash"><pre><code>npx create-vct

<span class="token comment"># or</span>
<span class="token function">npm</span> i create-vct -g
create-vct
</code></pre></div><h2 id="èµ·å› "><a class="header-anchor" href="#èµ·å› " aria-hidden="true">#</a> èµ·å› </h2><p>æˆ‘ä»¬å…¬å¸å‰ç«¯ç»Ÿä¸€ç”¨ vue3ï¼Œä½†æœ€è¿‘æœ‰ä¸ªç™½æ¿é¡¹ç›®<a href="https://juejin.cn/post/7232947178691444794" target="_blank" rel="noopener noreferrer">äº§å“ç»ç†ï¼šå®¢æˆ·æƒ³è¦ä¸ªç”»æ¿ï¼Œä½ ä»¬å‰ç«¯èƒ½ä¸èƒ½åšï¼Ÿ</a>ï¼Œåªæœ‰ react çš„æ¡†æ¶å¯ä»¥åšã€‚é¢†å¯¼è¯´è®©æˆ‘æ¥å¼„è¿™ä¸ªé¡¹ç›®ï¼Œé¡ºä¾¿å®Œäº†ä¹‹åæ­ä¸€ä¸ª react è„šæ‰‹æ¶å·¥å…·ç”¨äºä»¥åå¿«é€Ÿå¼€å‘ react åº”ç”¨ã€‚okï¼Œæ¥å—æŒ‘æˆ˜ ğŸ˜œã€‚</p><p>create-vct è„šæ‰‹æ¶å·¥å…·æ˜¯åœ¨ create-vite çš„åŸºç¡€ä¸Šä¿®æ”¹ï¼Œå°è£…äº† react ä¸­å¸¸ç”¨åˆ°çš„å„ç§åŒ…ï¼š<a href="https://reactrouter.com/en/mRin" target="_blank" rel="noopener noreferrer">react-router</a>ã€<a href="https://redux-toolkit.js.org/" target="_blank" rel="noopener noreferrer">redux-toolkit</a>ã€<a href="https://cangsdarm.github.io/react-query-web-i18n/react/" target="_blank" rel="noopener noreferrer">react-query</a>ã€<a href="https://ant.design/index-cn" target="_blank" rel="noopener noreferrer">antd</a> ç­‰ç­‰ï¼ŒåŒ…å« ts å’Œ js ç‰ˆæœ¬ï¼ŒåŒæ—¶ä¹Ÿå°è£…äº† eslint + prettier + husky + commitlint ç”¨äºå›¢é˜Ÿè§„èŒƒã€‚</p><p>ä¸‹é¢è®©æˆ‘ä»¬æ¥çœ‹çœ‹æ•´ä¸ªè¿‡ç¨‹ï¼Œç¯‡å¹…è¾ƒé•¿ï¼Œè¯·è€å¿ƒè§‚çœ‹ã€‚</p><h2 id="é’ˆå¯¹-create-vite-çš„ä¿®æ”¹"><a class="header-anchor" href="#é’ˆå¯¹-create-vite-çš„ä¿®æ”¹" aria-hidden="true">#</a> é’ˆå¯¹ create-vite çš„ä¿®æ”¹</h2><p><img src="/blog/_assets/create-vite-load.dec459a4.png" alt="create-vite-load.png"></p><p><strong>&quot;å·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨&quot;</strong>ï¼Œå¼€å§‹ä¹‹å‰ï¼Œå¦‚æœä¸ç†Ÿæ‚‰ create-vite æºç çš„å°ä¼™ä¼´ï¼Œæ¬¢è¿é˜…è¯»è¿™ç¯‡æ–‡ç« <a href="https://juejin.cn/post/7217750296171118651" target="_blank" rel="noopener noreferrer">ç«™åœ¨å·¨äººçš„è‚©è†€ä¸Šï¼šä½ è¿˜ä¸æ‡‚ create-vite åŸç†å—ï¼Ÿæ¥ä¸€èµ·åº·åº·</a>ï¼Œé¡ºä¾¿åŠ¨åŠ¨ä½ çš„å°æ‰‹æ‰‹ç‚¹ä¸ªèµ ğŸ‘ã€‚</p><h3 id="åˆ é™¤ä¸éœ€è¦çš„æ¨¡å—"><a class="header-anchor" href="#åˆ é™¤ä¸éœ€è¦çš„æ¨¡å—" aria-hidden="true">#</a> åˆ é™¤ä¸éœ€è¦çš„æ¨¡å—</h3><p>å› ä¸ºæˆ‘ä»¬åªéœ€è¦ react çš„æ¨¡æ¿ï¼Œæ‰€ä»¥æŠŠå…¶ä»–ä¸éœ€è¦çš„ä¸€å¹¶åˆ é™¤æ‰ï¼Œæœ€ååªç•™ä¸‹è¿™äº›æ–‡ä»¶ã€‚ <img src="/blog/_assets/create-vite-delete.ea9e65d5.png" alt="create-vite-delete.png"></p><h3 id="ä¿®æ”¹æ¨¡æ¿-vite-config-ts-ä»£ç "><a class="header-anchor" href="#ä¿®æ”¹æ¨¡æ¿-vite-config-ts-ä»£ç " aria-hidden="true">#</a> ä¿®æ”¹æ¨¡æ¿ vite.config.ts ä»£ç </h3><ol><li><p>é…ç½® alias æ·»åŠ åˆ«åè®¾ç½®</p></li><li><p>é…ç½® server ä»£ç†æœåŠ¡å™¨</p><div class="language-ts"><pre><code> <span class="token comment">// vite.config.ts</span>
 <span class="token operator">...</span>
 <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
   plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">react</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
   resolve<span class="token operator">:</span> <span class="token punctuation">{</span>
     alias<span class="token operator">:</span> <span class="token punctuation">{</span>
       <span class="token string-property property">&#39;@&#39;</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;src&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// src è·¯å¾„</span>
     <span class="token punctuation">}</span>
   <span class="token punctuation">}</span><span class="token punctuation">,</span>
   server<span class="token operator">:</span> <span class="token punctuation">{</span>
     port<span class="token operator">:</span> <span class="token number">5173</span><span class="token punctuation">,</span> <span class="token comment">// å¼€å‘ç¯å¢ƒå¯åŠ¨çš„ç«¯å£</span>
     proxy<span class="token operator">:</span> <span class="token punctuation">{</span>
       <span class="token string-property property">&#39;/api&#39;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
         <span class="token comment">// å½“é‡åˆ° /api è·¯å¾„æ—¶ï¼Œå°†å…¶è½¬æ¢æˆ target çš„å€¼</span>
         target<span class="token operator">:</span> <span class="token string">&#39;http://xx.xx.xx.xx:8080/api&#39;</span><span class="token punctuation">,</span>
         changeOrigin<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
         <span class="token function-variable function">rewrite</span><span class="token operator">:</span> <span class="token punctuation">(</span>path<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> path<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\/api</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// å°† /api é‡å†™ä¸ºç©º</span>
       <span class="token punctuation">}</span><span class="token punctuation">,</span>
     <span class="token punctuation">}</span><span class="token punctuation">,</span>
   <span class="token punctuation">}</span><span class="token punctuation">,</span>
 <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></li><li><p>è·¯å¾„åˆ«ååŒæ—¶éœ€è¦é…ç½® tsconfig.jsonï¼Œä¸ç„¶ç›´æ¥ä½¿ç”¨ ts ä¼šæŠ¥é”™</p><div class="language-json"><pre><code><span class="token comment">// tsconfig.json</span>
<span class="token punctuation">{</span>
  <span class="token property">&quot;compilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;paths&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;@/*&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;./src/*&quot;</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ol><h3 id="ä½¿ç”¨-sass-ä½œä¸º-css-é¢„å¤„ç†å™¨"><a class="header-anchor" href="#ä½¿ç”¨-sass-ä½œä¸º-css-é¢„å¤„ç†å™¨" aria-hidden="true">#</a> ä½¿ç”¨ sass ä½œä¸º css é¢„å¤„ç†å™¨</h3><p>å…¬å¸é¡¹ç›®éƒ½æ˜¯ä½¿ç”¨ sassï¼Œæ‰€ä»¥è¿™ä¸ªè„šæ‰‹æ¶è‡ªç„¶ä½¿ç”¨ sass æ¥å¤„ç† cssã€‚</p><ol><li><p>åœ¨ package.json ä¸­ä¾èµ–ä¸­æ·»åŠ <code>&quot;sass&quot;: &quot;^1.62.1&quot;</code>ï¼›</p></li><li><p>å°†.css åç¼€æ–‡ä»¶ä¿®æ”¹ä¸º.scss åç¼€æ–‡ä»¶ï¼›</p></li><li><p>åˆ›å»º src/styles/variables.scssï¼Œè®¾ç½®å…¨å±€ sass å˜é‡ï¼›</p></li><li><p>åœ¨ vite.config.js ä¸­é…ç½®å…¨å±€ sass å˜é‡ï¼š</p><div class="language-js"><pre><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token literal-property property">css</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">preprocessorOptions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">scss</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">additionalData</span><span class="token operator">:</span> <span class="token string">&#39;@import &quot;@/styles/variables.scss&quot;;&#39;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>æ³¨æ„ï¼švite å¯¹.sass å·²ç»æä¾›äº†å†…ç½®æ”¯æŒï¼Œæ‰€ä»¥ä¸å†éœ€è¦å®‰è£… loader äº†ï¼Œ<a href="https://cn.vitejs.dev/guide/features.html#css-pre-processors" target="_blank" rel="noopener noreferrer">å®˜æ–¹è§£é‡Š</a></strong></p></li></ol><h3 id="å°†-classnames-å¼•å…¥é¡¹ç›®"><a class="header-anchor" href="#å°†-classnames-å¼•å…¥é¡¹ç›®" aria-hidden="true">#</a> å°† classnames å¼•å…¥é¡¹ç›®</h3><p>ä¸ªäººæ„Ÿè§‰ CSS Modules æ¯” CSS In JS ç”¨èµ·æ¥æ›´èˆ’æœï¼Œæ‰€ä»¥è¯¥è„šæ‰‹æ¶ä½¿ç”¨ CSS Modules çš„æ–¹å¼æ¥å¤„ç† cssï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥ç”¨ CSS In JS çš„æ–¹å¼å¤„ç†ï¼Œé¡¹ç›®æ¨¡æ¿æ²¡æœ‰å¤ªå¤š css ä»£ç ï¼Œä¸ä¼šå½±å“åˆ°ä½ çš„é€‰æ‹©ã€‚</p><p>åœ¨ package.json ä¸­ä¾èµ–ä¸­æ·»åŠ <code>&quot;classnames&quot;: &quot;^2.3.2&quot;</code>å³å¯ã€‚</p><p>ä½¿ç”¨ä¹Ÿå¾ˆç®€å•ï¼š</p><div class="language-js"><pre><code><span class="token keyword">import</span> classNames <span class="token keyword">from</span> <span class="token string">&#39;classnames/bind&#39;</span>
<span class="token keyword">import</span> styles <span class="token keyword">from</span> <span class="token string">&#39;./index.module.scss&#39;</span>
<span class="token keyword">const</span> cx <span class="token operator">=</span> <span class="token function">classNames</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>styles<span class="token punctuation">)</span>

<span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">cx</span><span class="token punctuation">(</span><span class="token string">&#39;btn&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;btn-primary&#39;</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="ç»Ÿä¸€ä»£ç -git-è§„èŒƒ"><a class="header-anchor" href="#ç»Ÿä¸€ä»£ç -git-è§„èŒƒ" aria-hidden="true">#</a> ç»Ÿä¸€ä»£ç  &amp; git è§„èŒƒ</h2><p><img src="/blog/_assets/eslint-logo.7cebb5dd.png" alt="eslint-logo.png"></p><h3 id="ä½¿ç”¨-editorconfig-ç»Ÿä¸€-ide-ç¼–ç é£æ ¼"><a class="header-anchor" href="#ä½¿ç”¨-editorconfig-ç»Ÿä¸€-ide-ç¼–ç é£æ ¼" aria-hidden="true">#</a> ä½¿ç”¨ EditorConfig ç»Ÿä¸€ IDE ç¼–ç é£æ ¼</h3><p>.editorconfig æ–‡ä»¶åˆ›å»ºåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼š</p><div class="language-bash"><pre><code><span class="token punctuation">[</span>*<span class="token punctuation">]</span>
indent_style <span class="token operator">=</span> space
indent_size <span class="token operator">=</span> <span class="token number">2</span>
end_of_line <span class="token operator">=</span> lf
charset <span class="token operator">=</span> utf-8
trim_trailing_whitespace <span class="token operator">=</span> <span class="token boolean">false</span>
insert_final_newline <span class="token operator">=</span> <span class="token boolean">false</span>
</code></pre></div><h3 id="æ·»åŠ -eslint-prettier-ç”¨äºä»£ç è§„èŒƒ"><a class="header-anchor" href="#æ·»åŠ -eslint-prettier-ç”¨äºä»£ç è§„èŒƒ" aria-hidden="true">#</a> æ·»åŠ  eslint &amp; prettier ç”¨äºä»£ç è§„èŒƒ</h3><p>eslint å’Œ prettier çš„å®‰è£…å‚è€ƒçš„æ˜¯<a href="https://github.com/tzsk/vite-pretty-lint" target="_blank" rel="noopener noreferrer">vite-pretty-lint</a>ï¼Œå°†é¡¹ç›®æºç å…‹éš†åˆ°æœ¬åœ°ï¼Œåªéœ€è¦åˆ›å»ºæ–‡ä»¶çš„é‚£éƒ¨åˆ†ä»£ç ï¼Œå…¶ä½™çš„å¯åˆ é™¤ã€‚</p><h3 id="æ·»åŠ -pre-commit-å’Œ-commit-msg-é’©å­"><a class="header-anchor" href="#æ·»åŠ -pre-commit-å’Œ-commit-msg-é’©å­" aria-hidden="true">#</a> æ·»åŠ  pre-commit å’Œ commit-msg é’©å­</h3><p>æ·»åŠ  githooksï¼Œåœ¨æäº¤å‰å¯¹ä»£ç è¿›è¡Œæ ¡éªŒå’Œæ ¼å¼åŒ–å¤„ç†ï¼Œå¹¶è§„èŒƒæäº¤ä¿¡æ¯ï¼Œå¯ä»¥å‚è€ƒæˆ‘ä¹‹å‰çš„æ–‡ç« ï¼š<a href="https://juejin.cn/post/7215454235046445112" target="_blank" rel="noopener noreferrer">vue3 é¡¹ç›®æ·»åŠ  husky+lint-staged é…ç½®</a>ã€‚</p><p>æˆ‘ä»¬çœ‹çœ‹åœ¨ä¸€ä¸ªé¡¹ç›®ä¸­é…ç½® git hooks éƒ½éœ€è¦å“ªäº›æ­¥éª¤ã€‚</p><ol><li><p>æ·»åŠ  husky å’Œ lint-staged ä¾èµ–</p><div class="language-bash"><pre><code><span class="token function">yarn</span> <span class="token function">add</span> lint-staged husky
</code></pre></div></li><li><p>åˆå§‹åŒ– huskyï¼Œç”Ÿæˆ.husky æ–‡ä»¶</p><div class="language-bash"><pre><code><span class="token function">yarn</span> husky <span class="token function">install</span>
</code></pre></div></li><li><p>åœ¨ package.json çš„ scripts ä¸­æ·»åŠ  prepare ä¸ªé’©å­</p><div class="language-json"><pre><code> <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
   <span class="token property">&quot;dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vite&quot;</span><span class="token punctuation">,</span>
   <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;tsc &amp;&amp; vite build&quot;</span><span class="token punctuation">,</span>
   <span class="token property">&quot;preview&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vite preview&quot;</span><span class="token punctuation">,</span>
   <span class="token property">&quot;lint&quot;</span><span class="token operator">:</span> <span class="token string">&quot;eslint --ext .ts --ext .tsx src --fix&quot;</span><span class="token punctuation">,</span>
   <span class="token property">&quot;prepare&quot;</span><span class="token operator">:</span> <span class="token string">&quot;npx husky install&quot;</span>
 <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div></li><li><p>åœ¨ package.json ä¸­é…ç½® lint-staged</p><div class="language-json"><pre><code> <span class="token property">&quot;lint-staged&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
   <span class="token property">&quot;src/**/*.{js,jsx,ts,tsx,json,md}&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
     <span class="token string">&quot;eslint --fix --max-warnings=0&quot;</span><span class="token punctuation">,</span>
     <span class="token string">&quot;prettier --write&quot;</span>
   <span class="token punctuation">]</span><span class="token punctuation">,</span>
   <span class="token property">&quot;src/**/*.{scss,less,css}&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
     <span class="token string">&quot;prettier --write&quot;</span>
   <span class="token punctuation">]</span><span class="token punctuation">,</span>
 <span class="token punctuation">}</span>
</code></pre></div></li><li><p>æ·»åŠ  pre-commit é’©å­ï¼Œä¼šåœ¨.husky ç›®å½•ä¸‹ç”Ÿæˆ pre-commit æ–‡ä»¶</p><div class="language-bash"><pre><code>npx husky <span class="token function">add</span> .husky/pre-commit <span class="token string">&quot;npx lint-staged&quot;</span>
</code></pre></div><p>è¿™ä¸€æ­¥å®Œæˆåï¼Œåœ¨æäº¤ä»£ç çš„æ—¶å€™å°±ä¼šæœ‰å¯¹æš‚å­˜åŒºçš„ä»£ç åš ESLint ä»£ç æ ¡éªŒå’Œ Prettier æ ¼å¼åŒ–å¤„ç†ã€‚</p></li><li><p>æ¥ç€æ˜¯ commitlint è§„èŒƒæäº¤ä¿¡æ¯ï¼Œå®‰è£…ä¾èµ–</p><div class="language-bash"><pre><code><span class="token function">yarn</span> <span class="token function">add</span> @commitlint/cli @commitlint/config-conventional -D
</code></pre></div></li><li><p>åˆ›å»º commitlint.config.js é…ç½®æ–‡ä»¶</p><div class="language-js"><pre><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;@commitlint/config-conventional&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div></li><li><p>ç”Ÿæˆ pre-commit hook</p><div class="language-bash"><pre><code>npx husky <span class="token function">add</span> .husky/commit-msg <span class="token string">&#39;npx commitlint --edit&#39;</span>
</code></pre></div></li><li><p>åˆ°è¿™é‡Œï¼Œhusky + lint-staged + commitlint éƒ½é…ç½®å®Œæˆäº†ã€‚</p><p><img src="/blog/_assets/husky-error.be7e10b3.png" alt="husky-error.png"></p></li></ol><p>è¿™ä¸€æ­¥å®Œæˆåï¼Œæˆ‘ä»¬åŒæ—¶é…ç½®äº†ä»£ç è§„èŒƒå’Œ git è§„èŒƒï¼Œæ·»åŠ äº† huskyï¼Œæ‰€ä»¥éœ€è¦åœ¨é¡¹ç›®åˆ›å»ºå®Œæˆåï¼Œé¦–å…ˆ<strong>æ‰§è¡Œä¸€ä¸‹ git init åˆå§‹åŒ– git ä»“åº“ï¼Œç„¶å husky æ‰èƒ½æ­£å¸¸è¿è¡Œ</strong>ï¼Œäºæ˜¯å°±æŠŠæç¤ºä¿¡æ¯å¤šåŠ äº†ä¸€é¡¹ ğŸ¤”ï¼Œå¦‚ä¸‹ï¼š</p><p><img src="/blog/_assets/create-vct-init.a6fdd41c.png" alt="create-vct-init.png"></p><p>åŸºäºä»¥ä¸Šï¼Œæˆ‘ä»¬ä¿®æ”¹ create-vite çš„ä»£ç ï¼Œæ·»åŠ å¦‚ä¸‹ï¼š</p><div class="language-js"><pre><code><span class="token keyword">if</span> <span class="token punctuation">(</span>isEslint<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> eslintTemplate <span class="token operator">=</span> <span class="token string">&#39;../eslint-templates&#39;</span>
  <span class="token keyword">const</span> eslintFile <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>targetPath<span class="token punctuation">,</span> <span class="token string">&#39;.eslintrc.json&#39;</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> prettierFile <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>targetPath<span class="token punctuation">,</span> <span class="token string">&#39;.prettierrc.json&#39;</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> eslintIgnoreFile <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>targetPath<span class="token punctuation">,</span> <span class="token string">&#39;.eslintignore&#39;</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> packages<span class="token punctuation">,</span> eslintOverrides <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">import</span><span class="token punctuation">(</span>
    <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>eslintTemplate<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>template<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.js</span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">)</span>

  <span class="token keyword">const</span> packageList <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">...</span>commonPackages<span class="token punctuation">,</span> <span class="token operator">...</span>packages <span class="token punctuation">}</span>
  <span class="token keyword">const</span> eslintConfigOverrides <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>eslintConfig<span class="token punctuation">.</span>overrides<span class="token punctuation">,</span> <span class="token operator">...</span>eslintOverrides<span class="token punctuation">]</span>
  <span class="token keyword">const</span> eslint <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">...</span>eslintConfig<span class="token punctuation">,</span> <span class="token literal-property property">overrides</span><span class="token operator">:</span> eslintConfigOverrides <span class="token punctuation">}</span>

  <span class="token keyword">const</span> viteConfigFiles <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;vite.config.js&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;vite.config.ts&#39;</span><span class="token punctuation">]</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>viteFile<span class="token punctuation">]</span> <span class="token operator">=</span> viteConfigFiles
    <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>targetPath<span class="token punctuation">,</span> file<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> fs<span class="token punctuation">.</span><span class="token function">existsSync</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">)</span>

  <span class="token keyword">const</span> viteConfig <span class="token operator">=</span> <span class="token function">viteEslint</span><span class="token punctuation">(</span>fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>viteFile<span class="token punctuation">,</span> <span class="token string">&#39;utf8&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

  fs<span class="token punctuation">.</span><span class="token function">writeFileSync</span><span class="token punctuation">(</span>eslintFile<span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>eslint<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  fs<span class="token punctuation">.</span><span class="token function">writeFileSync</span><span class="token punctuation">(</span>prettierFile<span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>prettierConfig<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  fs<span class="token punctuation">.</span><span class="token function">writeFileSync</span><span class="token punctuation">(</span>eslintIgnoreFile<span class="token punctuation">,</span> eslintIgnore<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&#39;\n&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  fs<span class="token punctuation">.</span><span class="token function">writeFileSync</span><span class="token punctuation">(</span>viteFile<span class="token punctuation">,</span> viteConfig<span class="token punctuation">)</span>
  <span class="token keyword">const</span> files <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readdirSync</span><span class="token punctuation">(</span>eslintTemplate<span class="token punctuation">)</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> file <span class="token keyword">of</span> files<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">f</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">!</span>f<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">&#39;react&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">write</span><span class="token punctuation">(</span>file<span class="token punctuation">,</span> eslintTemplate<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  pkg<span class="token punctuation">.</span>devDependencies <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">...</span>pkg<span class="token punctuation">.</span>devDependencies<span class="token punctuation">,</span> <span class="token operator">...</span>packageList <span class="token punctuation">}</span>
  pkg<span class="token punctuation">.</span>scripts <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">...</span>pkg<span class="token punctuation">.</span>scripts<span class="token punctuation">,</span> <span class="token operator">...</span>packageScripts <span class="token punctuation">}</span>
  pkg<span class="token punctuation">[</span><span class="token string">&#39;lint-staged&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> packageMore

  <span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&#39;package.json&#39;</span><span class="token punctuation">,</span> templateDir<span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>pkg<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&#39;\n&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è¿™ä¸€æ­¥ä¼šå°†<code>.husky</code>ã€<code>.editorconfig</code>ã€<code>commitlint.config.js</code>ã€<code>.eslintrc.json</code>ã€<code>.prettierrc.json</code>å’Œ<code>.eslintignore</code>é…ç½®æ·»åŠ åˆ°æ‰€åˆ›å»ºçš„é¡¹ç›®ä¸­ï¼Œå¹¶ä¿®æ”¹ package.json æ–‡ä»¶ï¼Œæ·»åŠ  ESLint çš„ä¾èµ–é¡¹ã€‚</p><h2 id="é›†æˆ-ant-design-ä½œä¸º-ui-åº“"><a class="header-anchor" href="#é›†æˆ-ant-design-ä½œä¸º-ui-åº“" aria-hidden="true">#</a> é›†æˆ ant design ä½œä¸º UI åº“</h2><p><img src="/blog/_assets/antd-logo.d12a9b34.png" alt="antd-logo.png"></p><p>æˆ‘ä»¬å…ˆæ¥æ¢³ç†ä¸‹ï¼Œå¦‚æœå¾€é¡¹ç›®ä¸­æ·»åŠ  Antd éœ€è¦åšå“ªäº›äº‹ï¼š</p><ol><li><p>æ·»åŠ  Antd ä¾èµ–ï¼›</p><p>ant-design@v5 ç‰ˆæœ¬æ”¯æŒ tree-shakingï¼Œå°±ä¸ç”¨é…ç½®æŒ‰éœ€åŠ è½½äº†ã€‚é‚£ä¹ˆå°±å¾ˆç®€å•ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨ package.json çš„<code>dependencies</code>å­—æ®µä¸­æ·»åŠ  Antd çš„åº“ã€‚</p></li><li><p>å…¨å±€å¼•å…¥ reset.css æ–‡ä»¶ï¼›</p></li><li><p>è®¾ç½® ConfigProvider å…¨å±€åŒ–é…ç½®ï¼›</p><div class="language-jsx"><pre><code><span class="token keyword">import</span> <span class="token string">&#39;antd/dist/reset.css&#39;</span>
<span class="token keyword">import</span> zhCN <span class="token keyword">from</span> <span class="token string">&#39;antd/locale/zh_CN&#39;</span>
<span class="token keyword">import</span> dayjs <span class="token keyword">from</span> <span class="token string">&#39;dayjs&#39;</span>
<span class="token keyword">import</span> <span class="token string">&#39;dayjs/locale/zh-cn&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ConfigProvider <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;antd&#39;</span>

dayjs<span class="token punctuation">.</span><span class="token function">locale</span><span class="token punctuation">(</span><span class="token string">&#39;zh-cn&#39;</span><span class="token punctuation">)</span>

ReactDOM<span class="token punctuation">.</span><span class="token function">createRoot</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;root&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">React.StrictMode</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ConfigProvider</span></span> <span class="token attr-name">locale</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>zhCN<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">App</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">ConfigProvider</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">React.StrictMode</span></span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">)</span>
</code></pre></div></li><li><p>ä¿®æ”¹ App ç»„ä»¶ï¼Œæ·»åŠ ä¸€ä¸ª antd çš„ç»„ä»¶ï¼Œè¿™æ ·å¯åŠ¨é¡¹ç›®å°±å¯ä»¥çœ‹åˆ° Antd çš„ç»„ä»¶ä½¿ç”¨æ–¹æ³•ã€‚</p></li></ol><p>åŸºäºä»¥ä¸Šçš„æ­¥éª¤ï¼Œæˆ‘ä»¬å¯ä»¥ä»¿ç…§ ESLint é‚£å—çš„ä»£ç æ¥ä¿®æ”¹ï¼Œæœ€ç»ˆå®ç°å¦‚ä¸‹ï¼š</p><div class="language-js"><pre><code><span class="token comment">// antdé…ç½®</span>
<span class="token keyword">const</span> fileSuffix <span class="token operator">=</span> template<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">&#39;-ts&#39;</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">&#39;.tsx&#39;</span> <span class="token operator">:</span> <span class="token string">&#39;.jsx&#39;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>isAntd<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> AppComponent <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>targetPath<span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/src/App</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>fileSuffix<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> MainComponent <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>targetPath<span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/src/main</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>fileSuffix<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
  <span class="token comment">// @ts-ignore</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> packages<span class="token punctuation">,</span> App<span class="token punctuation">,</span> Main <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#39;../antd-templates/index.js&#39;</span><span class="token punctuation">)</span>
  fs<span class="token punctuation">.</span><span class="token function">writeFileSync</span><span class="token punctuation">(</span>AppComponent<span class="token punctuation">,</span> App<span class="token punctuation">)</span>
  fs<span class="token punctuation">.</span><span class="token function">writeFileSync</span><span class="token punctuation">(</span>MainComponent<span class="token punctuation">,</span> Main<span class="token punctuation">)</span>

  pkg<span class="token punctuation">.</span>dependencies <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">...</span>pkg<span class="token punctuation">.</span>dependencies<span class="token punctuation">,</span> <span class="token operator">...</span>packages <span class="token punctuation">}</span>
  <span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&#39;package.json&#39;</span><span class="token punctuation">,</span> templateDir<span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>pkg<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&#39;\n&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="é›†æˆ-react-router-ä½œä¸ºè·¯ç”±"><a class="header-anchor" href="#é›†æˆ-react-router-ä½œä¸ºè·¯ç”±" aria-hidden="true">#</a> é›†æˆ react-router ä½œä¸ºè·¯ç”±</h2><p><img src="/blog/_assets/react-router-logo.6efcd422.png" alt="react-router-logo"></p><p>è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨<a href="https://reactrouter.com/zh/main" target="_blank" rel="noopener noreferrer">react-router@v6</a>ç‰ˆæœ¬ï¼Œv6 ç‰ˆæœ¬ä¹‹å‰å¦‚æœä½¿ç”¨ typescript æ—¶ï¼Œéœ€è¦åŒæ—¶å®‰è£…<code>@types/react-router</code>ã€<code>@types/react-router-dom</code>ã€<code>react-router</code>å’Œ<code>react-router-dom</code>ã€‚</p><blockquote><p>react-router å’Œ react-router-dom çš„å…³ç³»ç±»ä¼¼äº react å’Œ react-domã€‚dom åŠæµè§ˆå™¨ç¯å¢ƒï¼Œreact-router-dom é€šè¿‡æ·»åŠ ç”¨äº DOM çš„ç»„ä»¶ï¼Œå¯ä»¥è®© react-router è¿è¡Œåœ¨æµè§ˆå™¨ç¯å¢ƒï¼ŒåŒæ—¶è¿˜æœ‰ react-router-nativeï¼Œç”¨äº native ç¯å¢ƒã€‚</p></blockquote><p>ä½¿ç”¨ v6 åä¸éœ€è¦å†å¼•å…¥é¢å¤–çš„ç±»å‹ï¼Œåªéœ€è¦å®‰è£…<code>react-router</code>å’Œ<code>react-router-dom</code>å³å¯ã€‚</p><h3 id="react-router-v6-è¯´æ˜"><a class="header-anchor" href="#react-router-v6-è¯´æ˜" aria-hidden="true">#</a> react-router v6 è¯´æ˜</h3><ul><li><code>&lt;Routes /&gt;</code>: æ–°å¢ç»„ä»¶ï¼Œç§»é™¤ v5 çš„<code>&lt;Switch /&gt;</code>ç»„ä»¶ï¼Œç”¨<code>&lt;Routes /&gt;</code>ç»„ä»¶ä»£æ›¿ï¼Œç”¨æ³•ç›¸åŒï¼›</li><li><code>&lt;Router /&gt;</code>: åŸºç¡€è·¯ç”±ç»„ä»¶ï¼Œv5 çš„ component={Home}æ”¹å†™ä¸º element={Home}ï¼›</li><li><code>&lt;Link /&gt;</code>: å¯¼èˆªç»„ä»¶ï¼›</li><li><code>&lt;Outlet /&gt;</code>: æ–°å¢ç»„ä»¶ï¼Œè‡ªé€‚åº”æ¸²æŸ“ç»„ä»¶ï¼›</li><li>useParams: æ–°å¢ Hookï¼Œè·å–å½“å‰è·¯ç”±æºå¸¦å‚æ•°ï¼›</li><li>useNavigate: æ–°å¢ Hookï¼Œç±»ä¼¼ v5 çš„ useHistoryï¼Œè·å–å½“å‰è·¯ç”±ï¼›</li><li>useOutlet: æ–°å¢ Hookï¼Œè·å–æ ¹æ®è·¯ç”±ç”Ÿæˆçš„ elementï¼›</li><li>useLocation: è·å–å½“å‰ location å¯¹è±¡ï¼›</li><li>useRoutes: åŒ<code>&lt;Routes&gt;</code>ç»„ä»¶ï¼Œåœ¨ js ä¸­ä½¿ç”¨ï¼›</li><li>useSearchParams: è·å– URL ä¸­ search å‚æ•°ã€‚</li></ul><h3 id="react-router-v6-ä½¿ç”¨æ•™ç¨‹"><a class="header-anchor" href="#react-router-v6-ä½¿ç”¨æ•™ç¨‹" aria-hidden="true">#</a> react-router v6 ä½¿ç”¨æ•™ç¨‹</h3><p>åŒ Antdï¼Œé¦–å…ˆæˆ‘ä»¬å…ˆæ¢³ç†ä¸€ä¸‹å°† react-router æ·»åŠ åˆ°é¡¹ç›®ä¸­çš„æ­¥éª¤ã€‚</p><ol><li><p>æ·»åŠ  react-router å’Œ react-router-dom ä¾èµ–ï¼›</p><div class="language-bash"><pre><code><span class="token function">yarn</span> <span class="token function">add</span> react-router-dom react-router
</code></pre></div></li><li><p>æ·»åŠ  src/routes/routerConfig.ts æ–‡ä»¶ï¼Œé…ç½®è·¯ç”±è¡¨ï¼›</p><div class="language-js"><pre><code><span class="token keyword">import</span> ErrorPage <span class="token keyword">from</span> <span class="token string">&#39;@/pages/ErrorPage&#39;</span>
<span class="token keyword">import</span> AppLayout <span class="token keyword">from</span> <span class="token string">&#39;@/layout/AppLayout&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> lazy <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> MetaMenu<span class="token punctuation">,</span> AuthRouteObject <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./interface&#39;</span>

<span class="token comment">// å¿«é€Ÿå¯¼å…¥å·¥å…·å‡½æ•°</span>
<span class="token keyword">const</span> <span class="token function-variable function">lazyLoad</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">moduleName</span><span class="token operator">:</span> string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
  <span class="token function">lazy</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">@/pages/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>moduleName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/index.tsx</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> Home <span class="token operator">=</span> <span class="token function">lazyLoad</span><span class="token punctuation">(</span><span class="token string">&#39;Home&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> ReduxToolkitDemo <span class="token operator">=</span> <span class="token function">lazyLoad</span><span class="token punctuation">(</span><span class="token string">&#39;ReduxToolkitDemo&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> ReactQueryDemo <span class="token operator">=</span> <span class="token function">lazyLoad</span><span class="token punctuation">(</span><span class="token string">&#39;ReactQueryDemo&#39;</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> <span class="token literal-property property">routers</span><span class="token operator">:</span> AuthRouteObject<span class="token operator">&lt;</span>MetaMenu<span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&#39;/&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token operator">&lt;</span>AppLayout <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">errorElement</span><span class="token operator">:</span> <span class="token operator">&lt;</span>ErrorPage <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&#39;home&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token operator">&lt;</span>Home <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;Home&#39;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&#39;toolkit&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token operator">&lt;</span>ReduxToolkitDemo <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;React Toolkit&#39;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&#39;query&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token operator">&lt;</span>ReactQueryDemo <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;React Query&#39;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> routers
</code></pre></div></li><li><p>åˆ›å»º src/layout æ–‡ä»¶å¤¹ï¼Œæ·»åŠ  AppLayout ç»„ä»¶ï¼›</p></li><li><p>åˆ›å»º src/pages æ–‡ä»¶å¤¹ï¼Œæ·»åŠ  Home å’Œ ReactQueryDemo ç»„ä»¶ï¼›</p></li><li><p>é€šè¿‡ <a href="https://reactrouter.com/en/main/hooks/use-routes" target="_blank" rel="noopener noreferrer">useRoutes</a> é’©å­å°†ä¸Šé¢çš„è·¯ç”±è¡¨ä¸€ä¸€æ˜ å°„ä¸ºè·¯ç”±å¯¹è±¡</p><p>useRoutes ä¹Ÿå°±æ˜¯<code>&lt;Routes /&gt;</code>ç»„ä»¶çš„ js å®ç°ï¼Œåœ¨è·¯ç”±è·³è½¬æ—¶éœ€è¦å¢åŠ  loading è½¬åœºï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>&lt;Suspense /&gt;</code>ç»„ä»¶ä¼ å…¥ä¸€ä¸ª loading ç»„ä»¶æ¥å®ç°ã€‚</p><blockquote><p>æ­¤å¤„çš„ Loading ç»„ä»¶å¯æ ¹æ®é¡¹ç›®éœ€æ±‚æ¥ä¿®æ”¹è½¬åœºåŠ¨ç”»</p></blockquote><div class="language-tsx"><pre><code><span class="token keyword">import</span> <span class="token string">&#39;./App.scss&#39;</span>
<span class="token keyword">import</span> routers <span class="token keyword">from</span> <span class="token string">&#39;./routes/routerConfig&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useRoutes <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react-router-dom&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Suspense <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Spin <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;antd&#39;</span>

<span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> elements <span class="token operator">=</span> <span class="token function">useRoutes</span><span class="token punctuation">(</span>routers<span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Suspense</span></span> <span class="token attr-name">fallback</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Spin</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>elements<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Suspense</span></span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App
</code></pre></div></li><li><p>åœ¨ main.tsx ä¸­é…ç½®<code>&lt;BrowserRouter /&gt;</code>åŒ…è£¹ App ç»„ä»¶</p><div class="language-tsx"><pre><code><span class="token keyword">import</span> <span class="token punctuation">{</span> BrowserRouter <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react-router-dom&#39;</span>

ReactDOM<span class="token punctuation">.</span><span class="token function">createRoot</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;root&#39;</span><span class="token punctuation">)</span> <span class="token keyword">as</span> HTMLElement<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">React.StrictMode</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">BrowserRouter</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">App</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">BrowserRouter</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">React.StrictMode</span></span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">)</span>
</code></pre></div></li></ol><p>åŸºäºä»¥ä¸Šæ­¥éª¤ï¼Œæˆ‘ä»¬å®ç°çš„ä»£ç å¦‚ä¸‹ï¼š</p><p>é¦–å…ˆè¯¢é—®æ˜¯å¦éœ€è¦å®‰è£… react-routerï¼Œå¹¶è¿”å› isRouter æ˜¯å¦ä¸º trueï¼Œå¦‚æœä¸º true æ—¶ï¼Œå°† react-router çš„æ¨¡æ¿æ–‡ä»¶æ·»åŠ åˆ°è¾“å‡ºç›®å½•ä¸­ï¼ŒåŒæ—¶ä¿®æ”¹ App.tsx å’Œ main.tsx çš„ä»£ç ï¼š</p><div class="language-ts"><pre><code><span class="token keyword">if</span> <span class="token punctuation">(</span>isRouter<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">copyTemplateFile</span><span class="token punctuation">(</span><span class="token string">&#39;router&#39;</span><span class="token punctuation">)</span>
  <span class="token comment">// @ts-ignore</span>
  <span class="token keyword">let</span> <span class="token punctuation">{</span> packages<span class="token punctuation">,</span> App<span class="token punctuation">,</span> Main<span class="token punctuation">,</span> Antd_App<span class="token punctuation">,</span> Antd_Main <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">import</span><span class="token punctuation">(</span>
    <span class="token string">&#39;../router-templates/index.js&#39;</span>
  <span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>isAntd<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    App <span class="token operator">=</span> Antd_App
    Main <span class="token operator">=</span> Antd_Main
  <span class="token punctuation">}</span>
  fs<span class="token punctuation">.</span><span class="token function">writeFileSync</span><span class="token punctuation">(</span>AppComponent<span class="token punctuation">,</span> App<span class="token punctuation">)</span>
  fs<span class="token punctuation">.</span><span class="token function">writeFileSync</span><span class="token punctuation">(</span>MainComponent<span class="token punctuation">,</span> Main<span class="token punctuation">)</span>

  pkg<span class="token punctuation">.</span>dependencies <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">...</span>pkg<span class="token punctuation">.</span>dependencies<span class="token punctuation">,</span> <span class="token operator">...</span>packages <span class="token punctuation">}</span>
  <span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&#39;package.json&#39;</span><span class="token punctuation">,</span> templateDir<span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>pkg<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&#39;\n&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="é›†æˆ-redux-toolkit-ä½œä¸ºçŠ¶æ€ç®¡ç†"><a class="header-anchor" href="#é›†æˆ-redux-toolkit-ä½œä¸ºçŠ¶æ€ç®¡ç†" aria-hidden="true">#</a> é›†æˆ Redux toolkit ä½œä¸ºçŠ¶æ€ç®¡ç†</h2><p><img src="/blog/_assets/redux-toolkit-logo.287a2c4c.png" alt="redux-toolkit-logo.png"></p><h3 id="ä¸ºä»€ä¹ˆæ˜¯-redux-toolkit"><a class="header-anchor" href="#ä¸ºä»€ä¹ˆæ˜¯-redux-toolkit" aria-hidden="true">#</a> ä¸ºä»€ä¹ˆæ˜¯ Redux toolkit</h3><p><a href="https://cn.redux.js.org/redux-toolkit/overview/" target="_blank" rel="noopener noreferrer">Redux Toolkit</a> æ˜¯ Redux å®˜æ–¹å¼ºçƒˆæ¨èï¼Œå¼€ç®±å³ç”¨çš„ä¸€ä¸ªé«˜æ•ˆçš„ Redux å¼€å‘å·¥å…·é›†ã€‚å®ƒæ—¨åœ¨æˆä¸ºæ ‡å‡†çš„ Redux é€»è¾‘å¼€å‘æ¨¡å¼ï¼Œå¼ºçƒˆå»ºè®®ä½ ä½¿ç”¨å®ƒã€‚</p><p>ä¼˜ç‚¹å¦‚ä¸‹ï¼š</p><ul><li>ä¼˜åŒ– Redux ä¸­é—´ä»¶ã€å„ç§é…ç½®ä»¥åŠä¹¦å†™ç›®å½•è§„èŒƒç­‰ï¼Œç®€åŒ–æ“ä½œï¼Œä¾‹å¦‚å–ä»£ Redux ä¸­å¾ˆæ¶å¿ƒçš„ typesã€actionsã€reducersï¼›</li><li>React-Redux Hook API å–ä»£éº»çƒ¦çš„<code>connect</code>å’Œ<code>mapState</code>ï¼›</li><li>Reducer ä¸­é»˜è®¤ä½¿ç”¨ Immer æ¥æ›´æ–° Immutable æ•°æ®ï¼Œä¸ç”¨å†è¿”å› stateï¼Œç®€å•ã€çœäº‹ï¼›</li><li>å°è£…å¥½äº† redux-devtools-extensionï¼Œå¯ç›´æ¥ä½¿ç”¨ï¼›</li><li>å·²ç»é›†æˆ redux-thunkï¼Œä¸éœ€è¦å†æ¬¡å®‰è£…ï¼›</li><li>æŒ‰ feature ç»„ç»‡ Redux é€»è¾‘ï¼Œæ›´åŠ æ¸…æ™°ã€‚</li></ul><p>æ€»ä½“æ¥è¯´ï¼ŒRedux Toolkit çš„å‡ºç°è®©ä¹‹å‰æƒ³å°è¯• Reduxï¼Œä½†åˆè¢« Redux å„ç§ç¹ççš„é…ç½®åŠé€€çš„äººé‡æ–°å½’ä½ ğŸ˜„ã€‚</p><h3 id="redux-toolkit-ä½¿ç”¨æ•™ç¨‹"><a class="header-anchor" href="#redux-toolkit-ä½¿ç”¨æ•™ç¨‹" aria-hidden="true">#</a> Redux Toolkit ä½¿ç”¨æ•™ç¨‹</h3><p>å‚è€ƒï¼š<a href="https://redux.js.org/usage/usage-with-typescript#define-typed-hooks" target="_blank" rel="noopener noreferrer">https://redux.js.org/usage/usage-with-typescript#define-typed-hooks</a></p><ol><li><p>æ·»åŠ  Redux Toolkit ç›¸å…³ä¾èµ–ï¼›</p><div class="language-bash"><pre><code><span class="token function">yarn</span> <span class="token function">add</span> @reduxjs/toolkit react-redux
</code></pre></div></li><li><p>åˆ›å»º store æ–‡ä»¶å¤¹ï¼›</p><p>store ä¸­åŒ…å« featureï¼ˆåŒ…å«æ‰€æœ‰çš„ Sliceï¼‰ã€hooksï¼ˆå°è£… useSelector å’Œ useDispatchï¼‰ã€indexï¼ˆä¸»å…¥å£æ–‡ä»¶ï¼‰</p><div class="language-bash"><pre><code>store
â”‚   â”œâ”€â”€ feature
â”‚   â”‚   â””â”€â”€ appSlice.ts
â”‚   â”œâ”€â”€ hooks.ts
â”‚   â””â”€â”€ index.ts
</code></pre></div></li><li><p>index.ts å…¥å£ï¼›</p><div class="language-ts"><pre><code><span class="token keyword">import</span> <span class="token punctuation">{</span> configureStore<span class="token punctuation">,</span> ThunkAction<span class="token punctuation">,</span> Action <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@reduxjs/toolkit&#39;</span>
<span class="token keyword">import</span> appReducer <span class="token keyword">from</span> <span class="token string">&#39;./feature/appSlice&#39;</span>
<span class="token comment">// åˆ›å»ºstore</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">configureStore</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// featureä¸­åˆ›å»ºå¤šä¸ªå­reducer æœ€ç»ˆåœ¨è¿™é‡Œè¿›è¡Œåˆå¹¶</span>
  reducer<span class="token operator">:</span> <span class="token punctuation">{</span>
    app<span class="token operator">:</span> appReducer<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// ä¸­é—´ä»¶</span>
  <span class="token function-variable function">middleware</span><span class="token operator">:</span> <span class="token punctuation">(</span>getDefaultMiddleware<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    <span class="token function">getDefaultMiddleware</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      serializableCheck<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token comment">// redux-devtools-extensionä½•æ—¶å¼€å¯</span>
  devTools<span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">!==</span> <span class="token string">&#39;production&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">type</span> <span class="token class-name">AppDispatch</span> <span class="token operator">=</span> <span class="token keyword">typeof</span> store<span class="token punctuation">.</span>dispatch
<span class="token keyword">export</span> <span class="token keyword">type</span> <span class="token class-name">RootState</span> <span class="token operator">=</span> ReturnType<span class="token operator">&lt;</span><span class="token keyword">typeof</span> store<span class="token punctuation">.</span>getState<span class="token operator">&gt;</span>
<span class="token keyword">export</span> <span class="token keyword">type</span> <span class="token class-name">AppThunk<span class="token operator">&lt;</span>ReturnType <span class="token operator">=</span> <span class="token keyword">void</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> ThunkAction<span class="token operator">&lt;</span>
  ReturnType<span class="token punctuation">,</span>
  RootState<span class="token punctuation">,</span>
  <span class="token builtin">unknown</span><span class="token punctuation">,</span>
  Action<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span>
<span class="token operator">&gt;</span>
</code></pre></div><blockquote><p>serializableCheck: false å…³é—­ serializableCheck æ£€æŸ¥ï¼Œå½“æ•°æ®è¾ƒå¤æ‚æ—¶ï¼Œå¼€å¯æ—¶ä¼šæŠ¥é”™ï¼› @reduxjs/toolkit å·²ç»å°è£…å¥½äº† redux-devtools-extensionï¼Œé€šè¿‡ devTools: true å¼€å¯ã€‚</p></blockquote></li><li><p>hooks.ts é’©å­</p><p>å®˜æ–¹æ¨èä½¿ç”¨ useAppSelector æ¥æ“ä½œ store æ•°æ®ï¼Œä½¿ç”¨ useAppDispatch è§¦å‘å­ store ä¸­çš„ actionã€‚</p><div class="language-ts"><pre><code><span class="token keyword">import</span> <span class="token punctuation">{</span> TypedUseSelectorHook<span class="token punctuation">,</span> useDispatch<span class="token punctuation">,</span> useSelector <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react-redux&#39;</span>
<span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> RootState<span class="token punctuation">,</span> AppDispatch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;.&#39;</span>

<span class="token comment">// Use throughout your app instead of plain `useDispatch` and `useSelector`</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">useAppDispatch</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token generic-function"><span class="token function">useDispatch</span><span class="token generic class-name"><span class="token operator">&lt;</span>AppDispatch<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> useAppSelector<span class="token operator">:</span> TypedUseSelectorHook<span class="token operator">&lt;</span>RootState<span class="token operator">&gt;</span> <span class="token operator">=</span> useSelector
</code></pre></div></li><li><p>å°† Redux è¿æ¥åˆ° React</p><p>åœ¨ main.tsx ä¸­ï¼Œä½¿ç”¨ react-redux çš„ Provider ç»„ä»¶å°† store æ³¨å…¥åˆ°ä¸Šä¸‹æ–‡ä¸­ï¼Œå’Œä¹‹å‰æ²¡æœ‰å˜åŒ–</p><div class="language-tsx"><pre><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Provider <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react-redux&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> store <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./store&#39;</span><span class="token punctuation">;</span>
<span class="token operator">...</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Provider</span></span> <span class="token attr-name">store</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>store<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
...
</span></code></pre></div></li><li><p>ç»„ä»¶ä¸­å¦‚ä½•ä½¿ç”¨</p><p>åœ¨ç»„ä»¶æ–‡ä»¶ä¸­ï¼Œä½¿ç”¨å®˜æ–¹æ¨èçš„ useAppDispatch å’Œ useAppSelectorï¼Œä»æ¯ä¸ªå­ slice ä¸­è·å– actionã€‚</p><div class="language-tsx"><pre><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useAppDispatch<span class="token punctuation">,</span> useAppSelector <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./store/hooks&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  selectCount<span class="token punctuation">,</span>
  decremented<span class="token punctuation">,</span>
  incremented<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./store/feature/appSlice&#39;</span>

<span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> elements <span class="token operator">=</span> <span class="token function">useRoutes</span><span class="token punctuation">(</span>routers<span class="token punctuation">)</span>
  <span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">useAppSelector</span><span class="token punctuation">(</span>selectCount<span class="token punctuation">)</span>

  <span class="token keyword">const</span> dispatch <span class="token operator">=</span> <span class="token function">useAppDispatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span>
          <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> marginRight<span class="token operator">:</span> <span class="token string">&#39;8px&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
          <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>primary<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">incremented</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span>
        <span class="token punctuation">&gt;</span></span><span class="token plain-text">
          +
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        ...
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> App
</code></pre></div></li></ol><h3 id="redux-toolkit-å¼‚æ­¥æ“ä½œ"><a class="header-anchor" href="#redux-toolkit-å¼‚æ­¥æ“ä½œ" aria-hidden="true">#</a> Redux Toolkit å¼‚æ­¥æ“ä½œ</h3><p>åœ¨ Redux ä¸­ï¼Œå¦‚æœéœ€è¦å¼‚æ­¥æ“ä½œåˆ™éœ€è¦å®‰è£… Redux-Thunkï¼Œè€Œ Redux Toolkit å·²ç»å†…ç½®äº† Redux-Thunkï¼Œä¸éœ€è¦å¦å¤–å®‰è£…å’Œé…ç½®ã€‚</p><p>æˆ‘ä»¬åªéœ€è¦ä½¿ç”¨ createAsyncThunk å°±èƒ½å®Œæˆå¼‚æ­¥ action çš„åˆ›å»ºã€‚</p><p>ä¸‹é¢ä»¥ä¸€ä¸ªè·å– github ç”¨æˆ·åˆ—è¡¨ä¸ºä¾‹ï¼š</p><h4 id="åˆ›å»º-userslice"><a class="header-anchor" href="#åˆ›å»º-userslice" aria-hidden="true">#</a> åˆ›å»º userSlice</h4><div class="language-ts"><pre><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createSlice<span class="token punctuation">,</span> createAsyncThunk <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@reduxjs/toolkit&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> RootState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;..&#39;</span>

<span class="token keyword">type</span> <span class="token class-name">UserType</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span>props<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token builtin">boolean</span> <span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">UserState</span> <span class="token punctuation">{</span>
  users<span class="token operator">:</span> UserType<span class="token punctuation">[</span><span class="token punctuation">]</span>
  total<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> initialState<span class="token operator">:</span> UserState <span class="token operator">=</span> <span class="token punctuation">{</span>
  users<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  total<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token comment">// createAsyncThunkåˆ›å»ºä¸€ä¸ªå¼‚æ­¥actionï¼Œreturnå‡ºå»çš„å€¼ï¼Œä¼šåœ¨extraReducersä¸­æ¥æ”¶ï¼Œæœ‰ä¸‰ç§çŠ¶æ€ï¼š</span>
<span class="token comment">// pendingï¼ˆè¿›è¡Œä¸­ï¼‰ã€fulfilledï¼ˆæˆåŠŸï¼‰ã€rejectedï¼ˆå¤±è´¥ï¼‰</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> getUserData <span class="token operator">=</span> <span class="token function">createAsyncThunk</span><span class="token punctuation">(</span><span class="token string">&#39;user/getList&#39;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">&#39;https://api.github.com/search/users?q=wang&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span>
  <span class="token keyword">return</span> res
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// åˆ›å»ºä¸€ä¸ª Slice</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> userSlice <span class="token operator">=</span> <span class="token function">createSlice</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">&#39;user&#39;</span><span class="token punctuation">,</span>
  initialState<span class="token punctuation">,</span>
  reducers<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// Reducer ä¸­é»˜è®¤ä½¿ç”¨ Immer æ¥æ›´æ–° Immutable æ•°æ®ï¼Œä¸ç”¨å†è¿”å› state</span>
    <span class="token function-variable function">deleteUser</span><span class="token operator">:</span> <span class="token punctuation">(</span>state<span class="token punctuation">,</span> <span class="token punctuation">{</span> payload <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      state<span class="token punctuation">.</span>users <span class="token operator">=</span> state<span class="token punctuation">.</span>users<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> user<span class="token punctuation">.</span>id <span class="token operator">!==</span> payload<span class="token punctuation">)</span>
      state<span class="token punctuation">.</span>total <span class="token operator">-=</span> <span class="token number">1</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// extraReducers æ¥å— createAsyncThunkçš„çŠ¶æ€</span>
  <span class="token function">extraReducers</span><span class="token punctuation">(</span>builder<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    builder
      <span class="token punctuation">.</span><span class="token function">addCase</span><span class="token punctuation">(</span>getUserData<span class="token punctuation">.</span>pending<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;loading...&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token comment">// é€šå¸¸åªéœ€è¦æ¥å—fulfilledå³å¯ æ¥æ”¶åˆ°è¿”å›å€¼åœ¨åŒæ­¥åˆ°stateçŠ¶æ€ä¸­å³å¯</span>
      <span class="token punctuation">.</span><span class="token function">addCase</span><span class="token punctuation">(</span>getUserData<span class="token punctuation">.</span>fulfilled<span class="token punctuation">,</span> <span class="token punctuation">(</span>state<span class="token punctuation">,</span> <span class="token punctuation">{</span> payload <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        state<span class="token punctuation">.</span>users <span class="token operator">=</span> payload<span class="token punctuation">.</span>items
        state<span class="token punctuation">.</span>total <span class="token operator">=</span> payload<span class="token punctuation">.</span>total_count
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">addCase</span><span class="token punctuation">(</span>getUserData<span class="token punctuation">.</span>rejected<span class="token punctuation">,</span> <span class="token punctuation">(</span>_<span class="token punctuation">,</span> err<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;error&#39;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token punctuation">{</span> deleteUser <span class="token punctuation">}</span> <span class="token operator">=</span> userSlice<span class="token punctuation">.</span>actions
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">selectUser</span> <span class="token operator">=</span> <span class="token punctuation">(</span>state<span class="token operator">:</span> RootState<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>user<span class="token punctuation">.</span>users
<span class="token keyword">export</span> <span class="token keyword">default</span> userSlice<span class="token punctuation">.</span>reducer
</code></pre></div><p>åœ¨ userSlice ä¸­æˆ‘ä»¬ä¸»è¦åšäº†è¿™å‡ ä»¶äº‹ï¼š</p><ol><li><p>ä½¿ç”¨ createAsyncThunk åˆ›å»ºä¸€ä¸ªå¼‚æ­¥ action</p><p>é€šè¿‡ createAsyncThunk return å‡ºå»çš„å€¼ï¼Œä¼šåœ¨ extraReducers ä¸­æ¥æ”¶ï¼Œæœ‰ä¸‰ç§çŠ¶æ€ï¼š</p><ul><li>pendingï¼ˆè¿›è¡Œä¸­ï¼‰</li><li>fulfilledï¼ˆæˆåŠŸï¼‰</li><li>ejectedï¼ˆå¤±è´¥ï¼‰</li></ul></li><li><p>é€šè¿‡ extraReducers æ¥æ¥å— createAsyncThunk çš„ç»“æœ</p><p>åœ¨<code>addCase(getUserData.fulfilled..</code>ä¸­è·å–å¼‚æ­¥ç»“æœæˆåŠŸåçš„è¿”å›å€¼ï¼Œç›´æ¥æ›´æ–°åœ¨ state ä¸­ã€‚</p></li><li><p>åˆ›å»ºä¸€ä¸ª deleteUser actionï¼Œç”¨æ¥åˆ é™¤ç”¨æˆ·</p><p>è¿™ä¸€æ­¥ä¸»è¦æ˜¯ä¸ºäº†<strong>æ¼”ç¤º immer çš„ä½œç”¨</strong>ï¼Œå¦‚æœå¯¹ immer ä¸å¤ªç†Ÿæ‚‰çš„åŒå­¦ï¼Œå¯ä»¥çœ‹çœ‹è¿™ç¯‡æ–‡ç« ï¼š<a href="https://juejin.cn/post/7047450607984541710#heading-18" target="_blank" rel="noopener noreferrer">ä¸å¯å˜æ•°æ®å®ç°-Immer.js</a>ã€‚</p><p>è¦æ˜¯ä»¥å‰åœ¨ Redux ä¸­ï¼Œæˆ‘ä»¬éœ€è¦è¿™æ ·æ“ä½œï¼š</p><div class="language-ts"><pre><code><span class="token function-variable function">deleteUser</span><span class="token operator">:</span> <span class="token punctuation">(</span>state<span class="token punctuation">,</span> <span class="token punctuation">{</span> payload <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
 <span class="token keyword">return</span> <span class="token punctuation">{</span>
   <span class="token operator">...</span>state<span class="token punctuation">,</span>
   users<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">...</span>state<span class="token punctuation">.</span>users<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> user<span class="token punctuation">.</span>id <span class="token operator">!==</span> payload<span class="token punctuation">)</span><span class="token punctuation">,</span>
   count<span class="token operator">:</span> state<span class="token punctuation">.</span>total <span class="token operator">-</span> <span class="token number">1</span>
 <span class="token punctuation">}</span>
</code></pre></div><p>è€Œä½¿ç”¨ Redux Toolkit ä¹‹åï¼Œåªéœ€è¦è¿™æ ·æ“ä½œï¼š</p><div class="language-ts"><pre><code><span class="token function-variable function">deleteUser</span><span class="token operator">:</span> <span class="token punctuation">(</span>state<span class="token punctuation">,</span> <span class="token punctuation">{</span> payload <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
   state<span class="token punctuation">.</span>users <span class="token operator">=</span> state<span class="token punctuation">.</span>users<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> user<span class="token punctuation">.</span>id <span class="token operator">!==</span> payload<span class="token punctuation">)</span><span class="token punctuation">;</span>
   state<span class="token punctuation">.</span>total <span class="token operator">-=</span> <span class="token number">1</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div></li><li><p>åœ¨ä¸»å…¥å£åˆå¹¶åˆ° reducer ä¸­ï¼Œå’Œ appSlice ä¸€æ ·æ“ä½œï¼›</p></li><li><p>ä½¿ç”¨ï¼ŒåŒåŒæ­¥æ“ä½œ</p></li></ol><p>åŸºäºä»¥ä¸Šæ­¥éª¤ï¼Œæˆ‘ä»¬å®ç°çš„ä»£ç å¦‚ä¸‹ï¼š</p><p>é¦–å…ˆè¯¢é—®æ˜¯å¦éœ€è¦å®‰è£… Redux Toolkitï¼Œå¹¶è¿”å› isRedux æ˜¯å¦ä¸º trueï¼Œå¦‚æœä¸º true æ—¶ï¼Œå°† Redux Toolkit çš„æ¨¡æ¿æ–‡ä»¶æ·»åŠ åˆ°è¾“å‡ºç›®å½•ä¸­ï¼ŒåŒæ—¶ä¿®æ”¹ main.tsx çš„ä»£ç ï¼š</p><div class="language-ts"><pre><code><span class="token keyword">if</span> <span class="token punctuation">(</span>isRedux<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">copyTemplateFile</span><span class="token punctuation">(</span><span class="token string">&#39;redux&#39;</span><span class="token punctuation">)</span>
  <span class="token comment">// @ts-ignore</span>
  <span class="token keyword">let</span> <span class="token punctuation">{</span> packages<span class="token punctuation">,</span> Main<span class="token punctuation">,</span> Router_Main<span class="token punctuation">,</span> Antd_Main<span class="token punctuation">,</span> Antd_Router_Main <span class="token punctuation">}</span> <span class="token operator">=</span>
    <span class="token keyword">await</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#39;../redux-templates/index.js&#39;</span><span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>isAntd<span class="token punctuation">)</span> Main <span class="token operator">=</span> Antd_Main
  <span class="token keyword">if</span> <span class="token punctuation">(</span>isRouter<span class="token punctuation">)</span> Main <span class="token operator">=</span> Router_Main
  <span class="token keyword">if</span> <span class="token punctuation">(</span>isAntd <span class="token operator">&amp;&amp;</span> isRouter<span class="token punctuation">)</span> Main <span class="token operator">=</span> Antd_Router_Main
  fs<span class="token punctuation">.</span><span class="token function">writeFileSync</span><span class="token punctuation">(</span>MainComponent<span class="token punctuation">,</span> Main<span class="token punctuation">)</span>

  pkg<span class="token punctuation">.</span>dependencies <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">...</span>pkg<span class="token punctuation">.</span>dependencies<span class="token punctuation">,</span> <span class="token operator">...</span>packages <span class="token punctuation">}</span>
  <span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&#39;package.json&#39;</span><span class="token punctuation">,</span> templateDir<span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>pkg<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&#39;\n&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="é›†æˆ-react-query-ä½œä¸ºè¯·æ±‚åº“"><a class="header-anchor" href="#é›†æˆ-react-query-ä½œä¸ºè¯·æ±‚åº“" aria-hidden="true">#</a> é›†æˆ react-query ä½œä¸ºè¯·æ±‚åº“</h2><p><img src="/blog/_assets/react-query-logo.581d8b5c.png" alt="react-query-logo"></p><h3 id="ä¸ºä»€ä¹ˆæ˜¯-react-query"><a class="header-anchor" href="#ä¸ºä»€ä¹ˆæ˜¯-react-query" aria-hidden="true">#</a> ä¸ºä»€ä¹ˆæ˜¯ react query</h3><p>ç”¨å®˜æ–¹çš„æ¥è¯´ï¼šReact Query é€šå¸¸è¢«æè¿°ä¸º React ç¼ºå°‘çš„æ•°æ®è·å–(data-fetching)åº“ï¼Œä½†æ˜¯ä»æ›´å¹¿æ³›çš„è§’åº¦æ¥çœ‹ï¼Œå®ƒ<strong>ä½¿ React ç¨‹åºä¸­çš„è·å–ï¼Œç¼“å­˜ï¼ŒåŒæ­¥å’Œæ›´æ–°æœåŠ¡å™¨çŠ¶æ€å˜å¾—è½»è€Œæ˜“ä¸¾</strong>ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œè·Ÿç€æˆ‘çš„æµç¨‹çœ‹ä¸€ä¸‹ï¼Œä½ å°±ä¼šå‘ç° react query å¤ªé¦™äº†ã€‚</p><p><img src="/blog/_assets/zhenxiang.e9d079b9.jpg" alt="zhenxiang.jpg"></p><h3 id="react-query-ä½¿ç”¨æ•™ç¨‹"><a class="header-anchor" href="#react-query-ä½¿ç”¨æ•™ç¨‹" aria-hidden="true">#</a> react query ä½¿ç”¨æ•™ç¨‹</h3><p><a href="https://cangsdarm.github.io/react-query-web-i18n/react/" target="_blank" rel="noopener noreferrer">å®˜æ–¹æ•™ç¨‹</a> ä¹Ÿå¯ä»¥çœ‹æˆ‘ä¹‹å‰å†™çš„ä¸€ä¸ªæ•™ç¨‹ï¼š<a href="https://juejin.cn/post/7162005581224968205" target="_blank" rel="noopener noreferrer">react-query ç³»åˆ—ä¸€â€”â€”åŸºç¡€åŠ useQuery ä½¿ç”¨</a></p><ol><li><p>æ·»åŠ  react query å’Œ axios ä¾èµ–</p><div class="language-bash"><pre><code><span class="token function">yarn</span> <span class="token function">add</span> react-query axios
</code></pre></div></li><li><p>åˆ›å»º api æ–‡ä»¶å¤¹</p><p>api ä¸­åŒ…å« featureï¼ˆåŒ…å«æ‰€æœ‰çš„è¯·æ±‚æ¥å£ï¼‰ã€interface(ç±»å‹ç»Ÿä¸€ç®¡ç†)ã€queryï¼ˆreact query ç›¸å…³é…ç½®ï¼‰ã€requestï¼ˆå°è£… axiosï¼‰ã€‚</p><div class="language-bash"><pre><code>â”œâ”€â”€ api
â”‚   â”œâ”€â”€ feature
â”‚   â”‚   â””â”€â”€ app.ts
â”‚   â”œâ”€â”€ interface.ts
â”‚   â”œâ”€â”€ query
â”‚   â”‚   â”œâ”€â”€ query.client.ts
â”‚   â”‚   â””â”€â”€ query.constant.ts
â”‚   â””â”€â”€ request.ts
</code></pre></div><p>å¯¹äº axiosï¼Œç½‘ä¸Šæœ‰å¤§æŠŠè¿‡æ¸¡å°è£…çš„æ¡ˆä¾‹ ğŸ¤®ï¼Œæˆ‘åªæ˜¯ç®€å•çš„æ·»åŠ äº†è¯·æ±‚æ‹¦æˆªå’Œç›¸åº”æ‹¦æˆªï¼Œæ„Ÿè§‰å°±å·²ç»å¤Ÿç”¨äº†ã€‚</p><div class="language-ts"><pre><code><span class="token keyword">import</span> <span class="token punctuation">{</span> message <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;antd&#39;</span>
<span class="token keyword">import</span> Axios<span class="token punctuation">,</span> <span class="token punctuation">{</span> AxiosRequestConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;axios&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> resData <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./interface&#39;</span>

<span class="token comment">// ç»Ÿä¸€é…ç½®</span>
<span class="token keyword">const</span> baseURL <span class="token operator">=</span> <span class="token string">&#39;&#39;</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> service <span class="token operator">=</span> Axios<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  baseURL<span class="token punctuation">,</span>
  responseType<span class="token operator">:</span> <span class="token string">&#39;json&#39;</span><span class="token punctuation">,</span>
  timeout<span class="token operator">:</span> <span class="token number">600000</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// è¯·æ±‚æ‹¦æˆª</span>
service<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">(</span>res<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>token <span class="token operator">=</span> <span class="token string">&#39;token&#39;</span>
  <span class="token keyword">return</span> res
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// æ‹¦æˆªå“åº”</span>
service<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>response<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>
  <span class="token punctuation">(</span>response<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> response<span class="token punctuation">.</span>data
    <span class="token comment">// è¿™å—éœ€è¦ä¿®æ”¹ æ ¹æ®è¯·æ±‚è¿”å›æˆåŠŸæ ‡å¿—</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>res <span class="token operator">||</span> res<span class="token punctuation">.</span>success<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>message<span class="token punctuation">)</span> message<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>message<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span> response
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>message<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>code <span class="token operator">===</span> <span class="token number">401</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href <span class="token operator">=</span> <span class="token string">&#39;/login&#39;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> <span class="token builtin">Promise</span><span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>message<span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token builtin">Promise</span><span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span>

<span class="token comment">// è®¾ç½®è¿”å›å€¼å’Œè¯·æ±‚å€¼èŒƒå‹</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token generic-function"><span class="token function">request</span><span class="token generic class-name"><span class="token operator">&lt;</span>Res <span class="token operator">=</span> <span class="token builtin">any</span><span class="token punctuation">,</span> <span class="token constant">Q</span> <span class="token operator">=</span> <span class="token builtin">any</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>
  req<span class="token operator">:</span> AxiosRequestConfig <span class="token operator">&amp;</span> <span class="token punctuation">{</span>
    data<span class="token operator">?</span><span class="token operator">:</span> <span class="token constant">Q</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">service</span><span class="token punctuation">(</span>req<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> res<span class="token punctuation">.</span>data <span class="token keyword">as</span> resData<span class="token operator">&lt;</span>Res<span class="token operator">&gt;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token builtin">Promise</span><span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data <span class="token operator">||</span> res<span class="token punctuation">)</span> <span class="token keyword">as</span> resData<span class="token operator">&lt;</span>Res<span class="token operator">&gt;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>é¡ºä¾¿çœ‹ä¸‹å¯¼å‡ºçš„ request æ–¹æ³•ï¼Œä¼ å…¥äº†è¿”å›å’Œè¯·æ±‚å€¼çš„ç±»å‹ï¼Œç„¶ååœ¨ app.ts ä¸­ï¼Œä½¿ç”¨ request å‘é€è¯·æ±‚æ—¶ï¼Œæˆ‘ä»¬åªè¦ä¼ å…¥åç«¯çš„è¿”å›ç±»å‹ï¼Œè¿™æ ·åœ¨æ¥å£è¯·æ±‚å®Œæˆåï¼Œä½¿ç”¨æ•°æ®çš„æ—¶å€™å°±ä¼šæ–¹ä¾¿å¾ˆå¤šï¼Œè¿™å°±æ˜¯ TS çš„å¥½å¤„ ğŸ®ã€‚</p><div class="language-ts"><pre><code><span class="token keyword">import</span> <span class="token punctuation">{</span> GithubType <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;../interface&#39;</span>
<span class="token keyword">import</span> request <span class="token keyword">from</span> <span class="token string">&#39;../request&#39;</span>

<span class="token comment">/* ç”¨æˆ·åˆ—è¡¨ */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getUserList</span> <span class="token operator">=</span> <span class="token punctuation">(</span>searchName<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
  <span class="token generic-function"><span class="token function">request</span><span class="token generic class-name"><span class="token operator">&lt;</span>GithubType<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    url<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/api/search/users?q=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>searchName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
    method<span class="token operator">:</span> <span class="token string">&#39;get&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><img src="/blog/_assets/axios-ts-resdata.36e6d00b.gif" alt="axios-ts-resdata"></p><p>query.client.ts ç”¨äºåˆå§‹åŒ– react queryï¼Œå¯¼å‡º client ä¼šåœ¨ QueryClientProvider ä¸­è¿›è¡Œé€ä¼ ã€‚</p><div class="language-ts"><pre><code><span class="token keyword">import</span> <span class="token punctuation">{</span> QueryClient <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react-query&#39;</span>
<span class="token keyword">const</span> client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QueryClient</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// client.setQueryDefaults(QUERY_CHAT_TRANSLATE_INPUT, {</span>
<span class="token comment">//   select: (res) =&gt; res.data,</span>
<span class="token comment">//   enabled: false,</span>
<span class="token comment">// });</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> client
</code></pre></div><p>query.constant.ts ç”¨äºç»Ÿä¸€ç®¡ç† react query æ‰€æœ‰çš„ keyï¼Œ<strong>key æœ‰ä»€ä¹ˆç”¨å‘¢</strong>ï¼Ÿè¿™ä¸ªåªè¦ä½ æŠŠ react query ç”¨èµ·æ¥å°±å¯ä»¥çŸ¥é“ key çš„ä½œç”¨äº†ã€‚</p><div class="language-ts"><pre><code><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">QUERY_USER_LIST</span> <span class="token operator">=</span> <span class="token string">&#39;user/list&#39;</span>
</code></pre></div></li><li><p>åœ¨ main.tsx ä¸­é…ç½®</p><div class="language-tsx"><pre><code><span class="token keyword">import</span> <span class="token punctuation">{</span> QueryClientProvider <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react-query&#39;</span>
<span class="token keyword">import</span> client <span class="token keyword">from</span> <span class="token string">&#39;./api/query/query.client&#39;</span>
<span class="token operator">...</span>

ReactDOM<span class="token punctuation">.</span><span class="token function">createRoot</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;root&#39;</span><span class="token punctuation">)</span> <span class="token keyword">as</span> HTMLElement<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">QueryClientProvider</span></span> <span class="token attr-name">client</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>client<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token punctuation">{</span><span class="token comment">/* æ·»åŠ devtools */</span><span class="token punctuation">}</span><span class="token plain-text">
    </span><span class="token punctuation">{</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">&#39;development&#39;</span> <span class="token operator">?</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ReactQueryDevtools</span></span>
         <span class="token attr-name">initialIsOpen</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token boolean">false</span><span class="token punctuation">}</span></span>
         <span class="token attr-name">position</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bottom-right<span class="token punctuation">&quot;</span></span>
       <span class="token punctuation">/&gt;</span></span>
    <span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span>
      <span class="token string">&#39;&#39;</span>
    <span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">App</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">QueryClientProvider</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token operator">...</span>
<span class="token punctuation">)</span>
</code></pre></div></li><li><p>åœ¨ç»„ä»¶ä¸­ä½¿ç”¨</p><p>é€šè¿‡ä¸‹é¢è¿™ä¸ªä¾‹å­å¯ä»¥çœ‹å‡ºæ¥ï¼Œä¸ä½¿ç”¨ react query çš„æƒ…å†µä¸‹ï¼Œæˆ‘è¦æ—¢è¦é€šè¿‡ useState ç®¡ç† loading å’Œæ•°æ®çŠ¶æ€ï¼Œè¿˜å¾—é€šè¿‡ useEffect æ¥å‘é€è¯·æ±‚ï¼›è€Œä½¿ç”¨ react-query çš„æƒ…å†µä¸‹ï¼Œå„ç§<strong>æ•°æ®çŠ¶æ€ç›´æ¥å¯ä»¥ä½¿ç”¨ useQuery æ¥ä»£æ›¿</strong>ï¼Œç®€åŒ–æˆ‘ä»¬çš„ä»£ç ã€‚</p><div class="language-tsx"><pre><code><span class="token keyword">import</span> <span class="token punctuation">{</span> getUserList <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/api/feature/app&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> UserType <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/api/interface&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">QUERY_USER_LIST</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/api/query/query.constant&#39;</span>
<span class="token comment">// import React, { useEffect, useState } from &#39;react&#39;;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useQuery <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react-query&#39;</span>

<span class="token keyword">const</span> <span class="token function-variable function">QueryDemo</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// ä¸ä½¿ç”¨react-queryæ—¶çš„è¯·æ±‚</span>
  <span class="token comment">// const [loading, setLoading] = useState(false);</span>
  <span class="token comment">// const [users, setUsers] = useState&lt;UserType[]&gt;([]);</span>
  <span class="token comment">// const getList = () =&gt; {</span>
  <span class="token comment">//   setLoading(true);</span>
  <span class="token comment">//   getUserList(&#39;wang&#39;)</span>
  <span class="token comment">//     .then((res) =&gt; setUsers(res.items))</span>
  <span class="token comment">//     .finally(() =&gt; setLoading(false));</span>
  <span class="token comment">// };</span>
  <span class="token comment">// useEffect(() =&gt; getList(), []);</span>
  <span class="token comment">// ä½¿ç”¨react-query</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> data<span class="token operator">:</span> users<span class="token punctuation">,</span> isLoading<span class="token operator">:</span> loading <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useQuery</span><span class="token punctuation">(</span>
    <span class="token constant">QUERY_USER_LIST</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">getUserList</span><span class="token punctuation">(</span><span class="token string">&#39;wang&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token function-variable function">select</span><span class="token operator">:</span> <span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> res<span class="token punctuation">.</span>items<span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token punctuation">{</span>loading <span class="token operator">&amp;&amp;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">loading...</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token punctuation">{</span>users<span class="token operator">?.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>user<span class="token operator">:</span> UserType<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>user<span class="token punctuation">.</span>id <span class="token keyword">as</span> <span class="token builtin">string</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>user<span class="token punctuation">.</span>login<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
        <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> QueryDemo
</code></pre></div></li></ol><p>åŸºäºä»¥ä¸Šæ­¥éª¤ï¼Œæˆ‘ä»¬å®ç°çš„ä»£ç å¦‚ä¸‹ï¼š</p><p>é¦–å…ˆè¯¢é—®æ˜¯å¦éœ€è¦å®‰è£… react-queryï¼Œå¹¶è¿”å› isQuery æ˜¯å¦ä¸º trueï¼Œå¦‚æœä¸º true æ—¶ï¼Œå°† react-query çš„æ¨¡æ¿æ–‡ä»¶æ·»åŠ åˆ°è¾“å‡ºç›®å½•ä¸­ï¼ŒåŒæ—¶ä¿®æ”¹ main.tsx çš„ä»£ç ï¼š</p><div class="language-ts"><pre><code><span class="token keyword">if</span> <span class="token punctuation">(</span>isQuery<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">copyTemplateFile</span><span class="token punctuation">(</span><span class="token string">&#39;query&#39;</span><span class="token punctuation">)</span>
  <span class="token comment">// è·å–æ¨¡æ¿ä¸‹çš„æ–‡ä»¶ å°†é™¤äº†package.jsonçš„æ–‡ä»¶å…¨éƒ¨å¤åˆ¶åˆ°è¾“å‡ºç›®å½•ä¸­</span>
  <span class="token keyword">const</span> MainComponent <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>targetPath<span class="token punctuation">,</span> <span class="token string">&#39;./src/Main.tsx&#39;</span><span class="token punctuation">)</span>
  <span class="token comment">// @ts-ignore</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> packages<span class="token punctuation">,</span> Main <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#39;../query-templates/index.js&#39;</span><span class="token punctuation">)</span>
  fs<span class="token punctuation">.</span><span class="token function">writeFileSync</span><span class="token punctuation">(</span>MainComponent<span class="token punctuation">,</span> Main<span class="token punctuation">)</span>

  pkg<span class="token punctuation">.</span>dependencies <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">...</span>pkg<span class="token punctuation">.</span>dependencies<span class="token punctuation">,</span> <span class="token operator">...</span>packages <span class="token punctuation">}</span>
  <span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&#39;package.json&#39;</span><span class="token punctuation">,</span> templateDir<span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>pkg<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&#39;\n&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ğŸ‰ğŸ‰ğŸ‰ åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬éœ€è¦åšçš„äº‹æƒ…éƒ½å·²ç»å®Œæˆäº†ï¼æ¥ä¸‹æ¥å°±æ˜¯å‘å¸ƒ npm åŒ…ã€‚</p><h2 id="å‘å¸ƒ-npm"><a class="header-anchor" href="#å‘å¸ƒ-npm" aria-hidden="true">#</a> å‘å¸ƒ npm</h2><div class="language-json"><pre><code><span class="token property">&quot;bin&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;create-vct&quot;</span><span class="token operator">:</span> <span class="token string">&quot;index.js&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;cvt&quot;</span><span class="token operator">:</span> <span class="token string">&quot;index.js&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token property">&quot;files&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token string">&quot;index.js&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;template-*&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;*-templates&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;dist&quot;</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre></div><p>å‘å¸ƒ npm åŒ…æ—¶ï¼Œæˆ‘ä»¬éœ€è¦å°†æ‰€æœ‰æ¨¡æ¿æ–‡ä»¶éƒ½å‘å¸ƒï¼Œä¿®æ”¹ package.json çš„<code>files</code>å¦‚ä¸Šæ‰€ç¤ºï¼Œfiles å°±æ˜¯å‘å¸ƒåˆ° npm ä»“åº“çš„æ–‡ä»¶ã€‚</p><p>bin å­—æ®µä¿®æ”¹ä¸º<code>create-vct</code>ï¼Œè¿™æ ·åœ¨æ‰§è¡Œ<code>create-vct</code>å‘½ä»¤æ—¶æœ€ç»ˆæ‰§è¡Œçš„æ–‡ä»¶å°±æ˜¯ index.jsã€‚</p><p><img src="/blog/_assets/package-bin.b08f13f1.png" alt="package-bin.png"></p><blockquote><p>bin é‡Œçš„å‘½ä»¤å¯¹åº”çš„æ˜¯ä¸€ä¸ªå¯æ‰§è¡Œçš„æ–‡ä»¶ï¼Œé€šè¿‡è½¯é“¾æ¥æˆ–è€…ç¬¦å·é“¾æ¥åˆ°æŒ‡å®šèµ„æºçš„æ˜ å°„ï¼Œè¿™äº›å¯æ‰§è¡Œæ–‡ä»¶å¿…é¡»ä»¥ #!/usr/bin/env node å¼€å¤´ï¼Œå¦åˆ™è„šæœ¬å°†åœ¨æ²¡æœ‰ node å¯æ‰§è¡Œæ–‡ä»¶çš„æƒ…å†µä¸‹å¯åŠ¨ã€‚</p></blockquote><p>ä¿®æ”¹å®Œæˆåï¼Œæ‰§è¡Œ</p><div class="language-bash"><pre><code><span class="token function">pnpm</span> build
nrm use <span class="token function">npm</span>
<span class="token function">npm</span> publish
</code></pre></div><h2 id="å¦‚ä½•ä½¿ç”¨"><a class="header-anchor" href="#å¦‚ä½•ä½¿ç”¨" aria-hidden="true">#</a> å¦‚ä½•ä½¿ç”¨</h2><ul><li><p>å…¨å±€å®‰è£…</p><div class="language-bash"><pre><code><span class="token function">npm</span> i create-vct -g
create-vct
</code></pre></div><p>å…¨å±€å®‰è£…åï¼Œç›´æ¥åœ¨æ§åˆ¶å°è¾“å…¥<code>create-vct</code>å³å¯ã€‚</p></li><li><p>ä½¿ç”¨ npx</p><p>npm ä» 5.25.2 ç‰ˆå¼€å§‹ï¼Œå¢åŠ äº† npx å‘½ä»¤ï¼Œå¯ä»¥è®©æˆ‘ä»¬åœ¨å½“å‰è·¯å¾„ä½¿ç”¨å…¨å±€åŒ…ã€‚npx è¿è¡Œæ—¶ï¼Œä¼šåˆ°å½“å‰ node_modules/.bin è·¯å¾„å’Œç¯å¢ƒå˜é‡$PATH é‡Œé¢ï¼Œæ£€æŸ¥å‘½ä»¤æ˜¯å¦å­˜åœ¨ã€‚å¦‚æœæ‰¾ä¸åˆ°æ—¶ä¼šä» npm ä¸Šä¸‹è½½æœ€æ–°ç‰ˆæœ¬ä½¿ç”¨ã€‚</p><div class="language-bash"><pre><code>npx create-vct
</code></pre></div></li></ul><h2 id="æ€»ç»“"><a class="header-anchor" href="#æ€»ç»“" aria-hidden="true">#</a> æ€»ç»“</h2><p>æ•´ä¸ªæµç¨‹èµ°ä¸‹æ¥ï¼ŒçœŸçš„æ˜¯æ”¶è·å¾ˆå¤šï¼Œå­¦åˆ°äº† node æ“ä½œæ–‡ä»¶çš„å¾ˆå¤š apiã€‚å¯¹ react-routerã€redux-toolkit å’Œ react-query åˆé‡æ–°å›é¡¾äº†ä¸€éã€‚ä¹‹å‰åšçš„ç™½æ¿è¦æ´¾ä¸Šç”¨åœºäº†ï¼Œæˆ‘ç”¨å®ƒæ¥åšæ¯ä¸ªæ¨¡å—çš„å›¾ï¼ˆè™½ç„¶ç•¥ä¸‘ ğŸ˜…ï¼‰ï¼ŒåŒæ—¶è¿˜å­¦ç€åšäº†ä¸€ä¸‹ svg çš„å›¾æ ‡ï¼Œå¯è°“æ˜¯æ”¶è·æ»¡æ»¡ã€‚</p><p>ä»¥ä¸Šå°±æ˜¯æœ¬æ–‡çš„å…¨éƒ¨å†…å®¹ï¼Œå¸Œæœ›è¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼Œæ¬¢è¿ç‚¹èµå’Œæ”¶è— ğŸ™ï¼Œå¦‚æœå‘ç°æœ‰ä»€ä¹ˆé”™è¯¯æˆ–è€…æ›´å¥½çš„è§£å†³æ–¹æ¡ˆåŠå»ºè®®ï¼Œæ¬¢è¿éšæ—¶è”ç³»ã€‚</p><p>æœ¬æ–‡é¡¹ç›®åœ°å€ï¼Œ<a href="https://github.com/wang1xiang/create-vct" target="_blank" rel="noopener noreferrer">https://github.com/wang1xiang/create-vct</a> æ¬¢è¿ starã€‚</p></div><div class="links-wrapper"><div class="prev-link"><!----></div><div class="next-link"><!----></div></div><div><footer class="page-edit"><!-- <a v-for="(item,index) in data.platform" :key="index" :href="item.href">
        <img class="imgIcon" :src="item.icon" />
      </a> --></footer><!-- <p class="platform">
      ä»¥ä¸Šçš†ä¸º
      <a href="javascript:;">çºªå¹´</a> æ–‡ç« å‘å¸ƒå¹³å°
    </p> --><p class="platform"><a href="https://beian.miit.gov.cn/" target="_blank">äº¬ICPå¤‡2022027737å·</a><br> Copyright Â© 2022 - present <a href="https://github.com/wang1xiang">@wangxiang</a></p></div><!--[--><!--]--></div><!-- åªæƒ³ç‚¹å‡»èƒŒæ™¯æ‰å…³é—­ è¯·ä½¿ç”¨ .self ä¿®é¥°ç¬¦ --><div style="display:none;" class="imgBox"><img src=""></div><!--]--></main><div class="theme-select" data-v-afcf09d4><ul data-v-afcf09d4><li class="active" data-v-afcf09d4>â˜€ï¸</li><li class="" data-v-afcf09d4>ğŸŒ‘</li></ul></div></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"README.md\":\"c431f2d0\",\"index.md\":\"822a0846\",\"more_docs.md\":\"88acfb4a\",\"more_index.md\":\"37f23744\",\"more_tags.md\":\"8d6b8dea\",\"docs_css_grid.md\":\"56bbf93a\",\"docs_css_placeholder.md\":\"6396b6fc\",\"docs_css_tailWindcss-start.md\":\"842232b3\",\"docs_docker_docker-start.md\":\"681909e5\",\"docs_electron_electron-bug.md\":\"248fd3f4\",\"docs_electron_electron-check-update.md\":\"ec668e2c\",\"docs_electron_electron-diaoyan.md\":\"b25aaee4\",\"docs_electron_electron-object-destroyed.md\":\"b21306e7\",\"docs_electron_electron-og.md\":\"ed319352\",\"docs_electron_electron-open-other.md\":\"4593b54b\",\"docs_electron_electron-protocol.md\":\"d6a02fc4\",\"docs_electron_electron-sentry.md\":\"81a11b07\",\"docs_electron_electron-sign-windows.md\":\"68499546\",\"docs_electron_electron-sign.md\":\"20ffb6d8\",\"docs_electron_electron-sqlite3-bug.md\":\"6b2e90cd\",\"docs_electron_electron-sqlite3-start.md\":\"d7bd3e12\",\"docs_electron_electron-sqlite3.md\":\"9161bbf3\",\"docs_electron_electron-start.md\":\"efc600cd\",\"docs_electron_electron-update.md\":\"20ad6f71\",\"docs_electron_electron-webview-zoom.md\":\"3a47e617\",\"docs_electron_hybrid-electron.md\":\"19666417\",\"docs_electron_sentry-electron.md\":\"f86ea557\",\"docs_flutter_flutter-dart.md\":\"e5e0aca7\",\"docs_flutter_flutter-other.md\":\"2b46b259\",\"docs_flutter_flutter-route-manage.md\":\"01242f13\",\"docs_flutter_flutter-start.md\":\"21c4d3f5\",\"docs_flutter_flutter-state-manage.md\":\"155332d4\",\"docs_flutter_flutter-wechat-pay.md\":\"cbc6c8cf\",\"docs_git_git-autocrlf.md\":\"0c7fcd0a\",\"docs_git_git-ignorecase.md\":\"47726a87\",\"docs_git_git-notes.md\":\"b604a187\",\"docs_git_git-rebase.md\":\"b2d9f967\",\"docs_git_git-username.md\":\"2fbef76f\",\"docs_git_gitflow.md\":\"a4f93e95\",\"docs_git_gitlab-ci-start.md\":\"a19c8ab1\",\"docs_http_http.md\":\"317618e7\",\"docs_javascript_async-await.md\":\"ad085864\",\"docs_javascript_createEvent.md\":\"e17a728b\",\"docs_javascript_html2docs.md\":\"9c0e6730\",\"docs_javascript_http-cache.md\":\"02a2bf36\",\"docs_javascript_image-load.md\":\"4dde9cfd\",\"docs_javascript_indexDB-dexie.md\":\"7999e066\",\"docs_javascript_javascript-utils.md\":\"13b8af83\",\"docs_javascript_memory-leak.md\":\"0740b8db\",\"docs_javascript_office-preview-type.md\":\"7a08c315\",\"docs_javascript_page-alive.md\":\"4be216c7\",\"docs_javascript_performance-optimization.md\":\"9d681974\",\"docs_javascript_preload-prefetch.md\":\"931718af\",\"docs_javascript_scrollend.md\":\"b73ad130\",\"docs_javascript_storage-change.md\":\"7699ea3a\",\"docs_javascript_turborepo-start.md\":\"80626b91\",\"docs_javascript_webworker.md\":\"51ba5ff7\",\"docs_javascript_zero-width-space.md\":\"7fea4cf8\",\"docs_leetcode_array-code.md\":\"b5828e7c\",\"docs_leetcode_array-code1.md\":\"50b77469\",\"docs_leetcode_back-tracking-code.md\":\"6e2cacbe\",\"docs_leetcode_back-tracking-code1.md\":\"6562d214\",\"docs_leetcode_back-tracking-code2.md\":\"d4bbffc0\",\"docs_leetcode_back-tracking-code3.md\":\"6a2725d9\",\"docs_leetcode_binary-tree-code.md\":\"8d8eeb8d\",\"docs_leetcode_binary-tree-code1.md\":\"85f472c5\",\"docs_leetcode_binary-tree-code2.md\":\"ebc1b179\",\"docs_leetcode_binary-tree-code3.md\":\"ae88d0db\",\"docs_leetcode_binary-tree-code4.md\":\"b3cfc139\",\"docs_leetcode_binary-tree-code5.md\":\"178d4aef\",\"docs_leetcode_binary-tree-code6.md\":\"e5b61b58\",\"docs_leetcode_binary-tree-code7.md\":\"c22fcb9a\",\"docs_leetcode_dynamic-programming-code.md\":\"441045c6\",\"docs_leetcode_dynamic-programming-code10.md\":\"5de01aa3\",\"docs_leetcode_dynamic-programming-code11.md\":\"96373170\",\"docs_leetcode_dynamic-programming-code12.md\":\"3f6c1754\",\"docs_leetcode_dynamic-programming-code13.md\":\"ad86d271\",\"docs_leetcode_dynamic-programming-code2.md\":\"73dadd2d\",\"docs_leetcode_dynamic-programming-code3.md\":\"bef2233b\",\"docs_leetcode_dynamic-programming-code4.md\":\"7da96ab4\",\"docs_leetcode_dynamic-programming-code5.md\":\"cdfdbf35\",\"docs_leetcode_dynamic-programming-code6.md\":\"c5d227b8\",\"docs_leetcode_dynamic-programming-code7.md\":\"fff1ea51\",\"docs_leetcode_dynamic-programming-code8.md\":\"9b376328\",\"docs_leetcode_dynamic-programming-code9.md\":\"b9536aa9\",\"docs_leetcode_greedy-algorithmc-code.md\":\"ce046766\",\"docs_leetcode_greedy-algorithmc-code2.md\":\"34d6421e\",\"docs_leetcode_greedy-algorithmc-code3.md\":\"5b77fb99\",\"docs_leetcode_greedy-algorithmc-code4.md\":\"799157be\",\"docs_leetcode_greedy-algorithmc-code5.md\":\"cb6b05f5\",\"docs_leetcode_hash-code.md\":\"043bb4eb\",\"docs_leetcode_hash-code1.md\":\"0530e1ca\",\"docs_leetcode_linked-list-code.md\":\"d013a5f7\",\"docs_leetcode_linked-list-code1.md\":\"41008cce\",\"docs_leetcode_monotone-stack.md\":\"2ec62fbd\",\"docs_leetcode_monotone-stack1.md\":\"58dca6ea\",\"docs_leetcode_stack-code.md\":\"7de94d14\",\"docs_leetcode_stack-code1.md\":\"00797a4a\",\"docs_leetcode_string-code.md\":\"24ac966c\",\"docs_leetcode_string-code1.md\":\"b626630e\",\"docs_linux_centos-docker.md\":\"05cfdfdd\",\"docs_linux_linux-no-possword.md\":\"3a955b78\",\"docs_mobile_mobileDebugging.md\":\"44feb044\",\"docs_nest_mysql-satart.md\":\"df93d63c\",\"docs_nest_nest-bff.md\":\"9ea1eb3f\",\"docs_nest_nest-start.md\":\"1039dcda\",\"docs_node_bff-express-esm.md\":\"a37ef281\",\"docs_node_bff-express.md\":\"86b04855\",\"docs_node_bff.md\":\"2fb7d9b9\",\"docs_node_deploy-server.md\":\"4170e228\",\"docs_node_express-mysql2.md\":\"91da7bec\",\"docs_node_express-swigger.md\":\"cb7c2661\",\"docs_node_socketIO-start.md\":\"ced098d4\",\"docs_photography_nd.md\":\"52889458\",\"docs_pnpm_pnpm-monorepo.md\":\"89ddab50\",\"docs_prosemirror_html2docs-pdf.md\":\"fc54d42b\",\"docs_react_create-react-app.md\":\"273e377d\",\"docs_react_dompurify.md\":\"9142206a\",\"docs_react_eslint-react.md\":\"8dd31352\",\"docs_react_react-classnames.md\":\"8c9ef0b7\",\"docs_react_react-grid-layout.md\":\"9fb3eed4\",\"docs_react_react-intl.md\":\"2ee4246d\",\"docs_react_react-philosophies.md\":\"3a3d5398\",\"docs_react_react-query.md\":\"2fd84702\",\"docs_react_react-router-change.md\":\"e9ed056b\",\"docs_react_react-vs-vue3.md\":\"618fd1fa\",\"docs_react_redux-audition.md\":\"85f607c9\",\"docs_react_tomcat-404.md\":\"2941d88e\",\"docs_reactNative_react-native-errors.md\":\"ad1f2e12\",\"docs_taro_taro-get-started.md\":\"d2399e96\",\"docs_taro_taro-start.md\":\"5b37a5fc\",\"docs_tiptap_tiptap-tutorial.md\":\"e33819d1\",\"docs_tiptap_tiptap-tutorial10.md\":\"299dec7f\",\"docs_tiptap_tiptap-tutorial2.md\":\"c72def40\",\"docs_tiptap_tiptap-tutorial3.md\":\"193863be\",\"docs_tiptap_tiptap-tutorial4.md\":\"70ff9e56\",\"docs_tiptap_tiptap-tutorial5.md\":\"70c50401\",\"docs_tiptap_tiptap-tutorial6.md\":\"9feb4732\",\"docs_tiptap_tiptap-tutorial7.md\":\"848d46ae\",\"docs_tiptap_tiptap-tutorial8.md\":\"94ba9336\",\"docs_tiptap_tiptap-tutorial9.md\":\"6d4993e3\",\"docs_tool_2023-summary.md\":\"b9a417fc\",\"docs_tool_2024-summary.md\":\"c1d07c95\",\"docs_tool_blog.md\":\"12aaa864\",\"docs_tool_chatgpt.md\":\"a757917a\",\"docs_tool_chrome-extension.md\":\"e44d1e5a\",\"docs_tool_chrome-override.md\":\"4d1bd14f\",\"docs_tool_debugging.md\":\"6fc02daf\",\"docs_tool_mac.md\":\"778e01f6\",\"docs_tool_mock.md\":\"3c60ee9f\",\"docs_tool_moment-api.md\":\"34247cf3\",\"docs_tool_mvp.md\":\"4433a590\",\"docs_tool_np.md\":\"f2ee7555\",\"docs_tool_prosemirror-tables.md\":\"922ff693\",\"docs_tool_vitepress-error.md\":\"fff47471\",\"docs_tool_vscode-web-error.md\":\"25ca028f\",\"docs_tool_whistle.md\":\"84b6957a\",\"docs_tool_yarn-certificate.md\":\"f35ac9b8\",\"docs_vite_componentLibrary.md\":\"fa089cda\",\"docs_vite_create-vite.md\":\"263f4a80\",\"docs_vite_vite-env.md\":\"314c51c5\",\"docs_vite_vite-mulit-import.md\":\"509d8c2f\",\"docs_vite_vite-react-cli.md\":\"80bd9198\",\"docs_vite_vite-react.md\":\"f4dd761e\",\"docs_vite_vite.md\":\"7241165e\",\"docs_vite_vite3.0.md\":\"59f27e56\",\"docs_vscode_vscode-markdown.md\":\"c27c1adf\",\"docs_vscode_vscode-todo.md\":\"da5dc9e6\",\"docs_vue_antd-form.md\":\"b544d658\",\"docs_vue_antd-vue.md\":\"07971bc8\",\"docs_vue_axios-token.md\":\"3e1d67ef\",\"docs_vue_history-mode.md\":\"257c25e9\",\"docs_vue_keepAlive.md\":\"f6f1881f\",\"docs_vue_tjTodo.md\":\"b9e6d80b\",\"docs_vue_unplugin-auto-import.md\":\"4f5f0864\",\"docs_vue_vue-scoped-issue.md\":\"66d0502e\",\"docs_vue_vue3-jsx.md\":\"f21fde22\",\"docs_vue_vue3-lint-staged.md\":\"30ede6ea\",\"docs_vue_vue3-unexpected-token.md\":\"ad051c20\",\"docs_webrtc_getstarted-webrtc.md\":\"dda796fe\",\"docs_webrtc_livekit-start.md\":\"e37a8097\",\"docs_webrtc_webrtc-one.md\":\"9526533a\",\"docs_wechat_uniapp-start.md\":\"1a8dc046\",\"docs_wechat_wechat-app.md\":\"dc82843f\",\"docs_work_360-develop.md\":\"0e716951\",\"docs_work_babel.md\":\"6ae35128\",\"docs_work_click-event.md\":\"d2852b7f\",\"docs_work_contentEdit-div-insert.md\":\"9c13055b\",\"docs_work_developer.md\":\"10a18259\",\"docs_work_echarts.md\":\"90dbe82a\",\"docs_work_email-font.md\":\"f41a9bf7\",\"docs_work_excalidraw-use.md\":\"78d1c208\",\"docs_work_excalidraw.md\":\"ea4dc663\",\"docs_work_font-loading-speed.md\":\"d092b225\",\"docs_work_g2-vs-echarts.md\":\"4c88dcaf\",\"docs_work_h5-app.md\":\"1059f356\",\"docs_work_html2canvas-bug.md\":\"b94bc05d\",\"docs_work_i18n.md\":\"f2361e2a\",\"docs_work_image-type.md\":\"6f8c3f5c\",\"docs_work_jenkins-start.md\":\"32ce7d0e\",\"docs_work_js-long.md\":\"db24418b\",\"docs_work_malformed.md\":\"39091551\",\"docs_work_mutationObserver.md\":\"3a9ce3e1\",\"docs_work_node16-docker.md\":\"79bc5e5d\",\"docs_work_one-react-screenshots.md\":\"cf5cff9c\",\"docs_work_plop-express.md\":\"fa7f0f21\",\"docs_work_puppeteer.md\":\"2881de86\",\"docs_work_react-ref.md\":\"e9adf66d\",\"docs_work_report-2023.md\":\"4efccb7c\",\"docs_work_report-regular.md\":\"4c076b41\",\"docs_work_richeditor.md\":\"c72364d9\",\"docs_work_sentry-cli-error.md\":\"9c3a5e2a\",\"docs_work_sentry-error.md\":\"cfceb9eb\",\"docs_work_sentry.md\":\"ef708be5\",\"docs_work_server-deploy.md\":\"d24178ac\",\"docs_work_sse.md\":\"503d4bc2\",\"docs_work_text-decoration.md\":\"2ceeb1a0\",\"docs_work_unocss.md\":\"c51b1c2f\",\"docs_work_white-board.md\":\"f3d8e441\",\"docs_work_word-cpu.md\":\"bcccf74c\",\"docs_work_zero-width-spaces.md\":\"1712f947\"}")</script>
    <script type="module" async src="/blog/_assets/app.77369b76.js"></script>
  </body>
</html>