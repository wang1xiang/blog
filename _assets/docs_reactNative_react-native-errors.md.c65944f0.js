import{f as e,g as o,J as s}from"./common-03e46d7f.js";const a='{"title":"react-native环境搭建遇到的坑","frontmatter":{"date":"2023-03-13","title":"react-native环境搭建遇到的坑","tags":["react native"],"describe":"react-native-errors"},"headers":[{"level":2,"title":"安装时选择 Custom 安装无法选择 platform","slug":"安装时选择-custom-安装无法选择-platform"},{"level":2,"title":"ruby 环境升级到 2.7.6","slug":"ruby-环境升级到-2-7-6"},{"level":2,"title":"CocoaPods 依赖 ruby","slug":"cocoapods-依赖-ruby"},{"level":2,"title":"检查安卓和 ios 环境","slug":"检查安卓和-ios-环境"},{"level":2,"title":"创建新项目前卸载 cli","slug":"创建新项目前卸载-cli"},{"level":2,"title":"创建新项目报错","slug":"创建新项目报错"},{"level":2,"title":"pod install 报错解决","slug":"pod-install-报错解决"},{"level":2,"title":"Error installing boost / LibreSSL SSL_read: Connection reset by peer, errno 54","slug":"error-installing-boost-libressl-ssl-read-connection-reset-by-peer-errno-54"},{"level":2,"title":"项目无法启动/或者报错时","slug":"项目无法启动-或者报错时"},{"level":2,"title":"启动过程报错 Unable to boot device in current state: Booted","slug":"启动过程报错-unable-to-boot-device-in-current-state-booted"},{"level":2,"title":"error Failed to build iOS project. We ran \\"xcodebuild\\" command but it exited with error code 65.","slug":"error-failed-to-build-ios-project-we-ran-xcodebuild-command-but-it-exited-with-error-code-65"},{"level":2,"title":"no bundle url present","slug":"no-bundle-url-present"}],"relativePath":"docs/reactNative/react-native-errors.md","lastUpdated":1743566425657.4038}';var t={};const r=[s('<h2 id="安装时选择-custom-安装无法选择-platform"><a class="header-anchor" href="#安装时选择-custom-安装无法选择-platform" aria-hidden="true">#</a> 安装时选择 Custom 安装无法选择 platform</h2><p><img src="/blog/_assets/httpproxy.3fc87acf.png" alt="httpproxy"></p><p>找到<code>Settings -&gt; Preferences -&gt; System Settings -&gt; HTTP Proxy</code>，选择<code>Auto-detect proxy settings</code>自动检测代理设置即可，前提是需要稳定的代理软件</p><h2 id="ruby-环境升级到-2-7-6"><a class="header-anchor" href="#ruby-环境升级到-2-7-6" aria-hidden="true">#</a> ruby 环境升级到 2.7.6</h2><p>react-native 需要 Ruby 2.7.6，mac 自带的是 2.6.0，需要重新安装 ruby</p><ol><li><p>安装 rvm</p><div class="language-bash"><pre><code><span class="token function">curl</span> -L get.rvm.io <span class="token operator">|</span> <span class="token function">bash</span> -s stable\n<span class="token builtin class-name">source</span> ~/.rvm/scripts/rvm\n<span class="token comment"># 查看rvm版本 2.7.6就可以</span>\nrvm -v\n</code></pre></div></li><li><p>升级 ruby</p><div class="language-bash"><pre><code><span class="token comment"># 检查ruby版本是否是2.7.6</span>\nruby --version\n</code></pre></div></li></ol><h2 id="cocoapods-依赖-ruby"><a class="header-anchor" href="#cocoapods-依赖-ruby" aria-hidden="true">#</a> CocoaPods 依赖 ruby</h2><p>CocoaPods 是一个负责管理 iOS 项目中第三方开源库的工具，进行 iOS 开发时免不了会使用第三方的开源库，所以需要 CocoaPods 来进行统一管理</p><p>需要安装完 ruby 后再安装 CocoaPods，如果已安装，删除重新安装</p><div class="language-bash"><pre><code><span class="token comment"># homebrew安装的话</span>\nbrew uninstall cocoapods\n<span class="token comment"># 查看本地cocoapods相关</span>\ngem list --local <span class="token operator">|</span> <span class="token function">grep</span> cocoapods\n<span class="token comment"># 逐一删除</span>\ngem uninstall xxx\n\n<span class="token comment"># 修改镜像</span>\ngem sources --remove https://rubygems.org/\ngem sources --add https://gems.ruby-china.com/\n\n<span class="token comment"># 重新安装cocoapods</span>\ngem <span class="token function">install</span> -n /usr/local/bin cocoapods -v <span class="token number">1.11</span>.3\n<span class="token comment"># 查看版本 显示1.11.3安装完成</span>\npod --version\n\n<span class="token comment"># 更新Podspec索引</span>\n<span class="token builtin class-name">cd</span> ~/.cocoapods/repos\npod repo remove master\n<span class="token function">git</span> clone https://mirrors.tuna.tsinghua.edu.cn/git/CocoaPods/Specs.git master\n</code></pre></div><h2 id="检查安卓和-ios-环境"><a class="header-anchor" href="#检查安卓和-ios-环境" aria-hidden="true">#</a> 检查安卓和 ios 环境</h2><p>运行 React Native 项目之前，需要配置好原生开发环境。即运行 iOS 需要正确安装和配置 Xcode 工具，运行 Android App 需要正确安装和配置 Android Studio 和 Android SDK Tools。 同时，为了能够正常的运行项目，还需要在项目运行之前启动模拟器或者真机设备。启动模拟器或真机后，我们可以使用如下的命令来查看连接情况。</p><p>查看 IOS 模拟器：打开 XCode -&gt; Settings -&gt; Platforms 可以看到如下所示 <img src="/blog/_assets/xcode-platform.81af32e1.png" alt="xcode-platform.png"> 或者运行命令<code>xcrun simctl list devices</code>即可看到可用的 IOS 模拟器</p><div class="language-js"><pre><code>\nadb devices <span class="token comment">//查看可用的Android设备</span>\n</code></pre></div><h2 id="创建新项目前卸载-cli"><a class="header-anchor" href="#创建新项目前卸载-cli" aria-hidden="true">#</a> 创建新项目前卸载 cli</h2><p>如果不卸载的话，会报错如下 <img src="/blog/_assets/cliinit.b262f565.png" alt="cliinit.png"></p><p>全局卸载<code>react native cli</code>即可</p><div class="language-bash"><pre><code><span class="token function">npm</span> uninstall -g react-native-cli @react-native-community/cli\n</code></pre></div><h2 id="创建新项目报错"><a class="header-anchor" href="#创建新项目报错" aria-hidden="true">#</a> 创建新项目报错</h2><div class="language-bash"><pre><code>npx react-native init AwesomeProject\n</code></pre></div><p><img src="/blog/_assets/mulit-error.01dcb24e.png" alt="mulit-error.png"> 报错信息如上时，指的是 IOS 的依赖通过 Cocoapods 下载时的路径不对，修改 ios/Podfile，在第一行添加以下代码</p><div class="language-js"><pre><code>source <span class="token string">&#39;https://mirrors.tuna.tsinghua.edu.cn/git/CocoaPods/Specs.git&#39;</span>\n</code></pre></div><p>完了执行 pod install</p><h2 id="pod-install-报错解决"><a class="header-anchor" href="#pod-install-报错解决" aria-hidden="true">#</a> pod install 报错解决</h2><p><img src="/blog/_assets/podinstallerror.586d9111.png" alt="podinstallerror.png"></p><p>将 <a href="https://github.com/facebook/flipper.git" target="_blank" rel="noopener noreferrer">https://github.com/facebook/flipper.git</a> 替换为 gitee 仓库</p><p><img src="/blog/_assets/github2gitlab.0c9b0b1d.png" alt="github2gitlab.png"></p><p>打开<code>~/.cocoapods/repos/master</code>文件件，全局替换此地址</p><p>完了继续执行<code>pod install</code>，如果</p><h2 id="error-installing-boost-libressl-ssl-read-connection-reset-by-peer-errno-54"><a class="header-anchor" href="#error-installing-boost-libressl-ssl-read-connection-reset-by-peer-errno-54" aria-hidden="true">#</a> Error installing boost / LibreSSL SSL_read: Connection reset by peer, errno 54</h2><p>或者<strong>boost</strong>下载很慢时，参考<a href="https://github.com/CocoaPods/cocoapods-downloader/issues/69" target="_blank" rel="noopener noreferrer">issues</a></p><ol><li>在 master 里面全局搜索<code>https://boostorg.jfrog.io/artifactory/main/release/1.76.0/source/boost_1_76_0.tar.bz2</code></li><li>将第一步搜索到的地址替换为<code>https://downloads.sourceforge.net/project/boost/boost/1.76.0/boost_1_76_0.tar.gz?r=&amp;ts=1513105136&amp;use_mirror=kent</code>即可</li><li>重新 pod install</li></ol><p>直到出现如下图所示，安装完成 <img src="/blog/_assets/installsuccesss.7d0f9224.png" alt="installsuccesss.png"></p><h2 id="项目无法启动-或者报错时"><a class="header-anchor" href="#项目无法启动-或者报错时" aria-hidden="true">#</a> 项目无法启动/或者报错时</h2><p>输入以下命令查看环境问题</p><div class="language-bash"><pre><code>npx react-native doctor\n<span class="token comment"># or</span>\nnpx react-native info\n</code></pre></div><p><img src="/blog/_assets/reactnativedoctor.845b97f7.png" alt="reactnativedoctor.png"><img src="/blog/_assets/reactnativeinfo.da6fa44b.png" alt="reactnativeinfo.png"></p><h2 id="启动过程报错-unable-to-boot-device-in-current-state-booted"><a class="header-anchor" href="#启动过程报错-unable-to-boot-device-in-current-state-booted" aria-hidden="true">#</a> 启动过程报错 Unable to boot device in current state: Booted</h2><div class="language-bash"><pre><code><span class="token comment"># 关闭已经打开的虚拟机</span>\nxcrun simctl <span class="token function">shutdown</span> all\n</code></pre></div><h2 id="error-failed-to-build-ios-project-we-ran-xcodebuild-command-but-it-exited-with-error-code-65"><a class="header-anchor" href="#error-failed-to-build-ios-project-we-ran-xcodebuild-command-but-it-exited-with-error-code-65" aria-hidden="true">#</a> error Failed to build iOS project. We ran &quot;xcodebuild&quot; command but it exited with error code 65.</h2><h2 id="no-bundle-url-present"><a class="header-anchor" href="#no-bundle-url-present" aria-hidden="true">#</a> no bundle url present</h2><p><img src="/blog/_assets/iosbundleerror.7b7e3950.png" alt="iosbundleerror.png"></p>',42)];t.render=function(s,a,t,n,i,c){return e(),o("div",null,r)};export{a as __pageData,t as default};
