import{f as a,g as s,J as n}from"./common-03e46d7f.js";const e='{"title":"flutter其他","frontmatter":{"date":"2024-05-03","title":"flutter其他","tags":["flutter"],"describe":"flutter其他"},"headers":[{"level":2,"title":"包管理","slug":"包管理"},{"level":3,"title":"其他依赖方式","slug":"其他依赖方式"},{"level":2,"title":"资源管理","slug":"资源管理"},{"level":2,"title":"运行项目报错","slug":"运行项目报错"},{"level":3,"title":"报错：一直显示 Running Gradle task \'assembleDebug\'","slug":"报错：一直显示-running-gradle-task-assembledebug"},{"level":3,"title":"报错：Could not locate aapt. Please ensure you have the Android buildtools installed.","slug":"报错：could-not-locate-aapt-please-ensure-you-have-the-android-buildtools-installed"},{"level":3,"title":"报错：task \':permission_handler:compileReleaseJavaWithJavac\'","slug":"报错：task-permission-handler-compilereleasejavawithjavac"},{"level":3,"title":"解决：Flutter canvaskit Failed to downloadhttps://chrome-infra-packages.appspot","slug":"解决：flutter-canvaskit-failed-to-downloadhttps-chrome-infra-packages-appspot"},{"level":3,"title":"flutter build ipa 报错：Cannot find \\"xcodebuild\\"","slug":"flutter-build-ipa-报错：cannot-find-xcodebuild"}],"relativePath":"docs/flutter/flutter-other.md","lastUpdated":1742819970536.5374}';var t={};const o=[n('<h2 id="包管理"><a class="header-anchor" href="#包管理" aria-hidden="true">#</a> 包管理</h2><p>Pub（<a href="https://pub.dev/" target="_blank" rel="noopener noreferrer">https://pub.dev/</a> ）是 Google 官方的 Dart Packages 仓库，类似于 node 中的 npm 仓库</p><p>通过以下命令安装依赖</p><div class="language-bash"><pre><code>flutter packages get\n</code></pre></div><h3 id="其他依赖方式"><a class="header-anchor" href="#其他依赖方式" aria-hidden="true">#</a> 其他依赖方式</h3><p>依赖 Git：你也可以依赖存储在 Git 仓库中的包。如果软件包位于仓库的根目录中，请使用以下语法</p><div class="language-yaml"><pre><code><span class="token key atrule">dependencies</span><span class="token punctuation">:</span>\n  <span class="token key atrule">pkg1</span><span class="token punctuation">:</span>\n    <span class="token key atrule">git</span><span class="token punctuation">:</span>\n      <span class="token key atrule">url</span><span class="token punctuation">:</span> git<span class="token punctuation">:</span>//github.com/xxx/pkg1.git\n</code></pre></div><h2 id="资源管理"><a class="header-anchor" href="#资源管理" aria-hidden="true">#</a> 资源管理</h2><p>静态资源图片管理</p><ul><li>/assets/my_icon.png</li><li>/assets/2.0x/my_icon.png</li><li>/assets/3.0x/my_icon.png</li></ul><div class="language-dart"><pre><code><span class="token class-name">Widget</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token class-name">BuildContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token comment">// 根据DPI自动配置图片</span>\n  <span class="token keyword">return</span> <span class="token class-name">AssetImage</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&#39;assets/my_icon.png&#39;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token comment">// 依赖包中的图片</span>\n  <span class="token keyword">return</span> <span class="token class-name">AssetImage</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&#39;icons/heart.png&#39;</span></span><span class="token punctuation">,</span> package<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&#39;some_pkg&#39;</span></span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\n</code></pre></div><h2 id="运行项目报错"><a class="header-anchor" href="#运行项目报错" aria-hidden="true">#</a> 运行项目报错</h2><h3 id="报错：一直显示-running-gradle-task-assembledebug"><a class="header-anchor" href="#报错：一直显示-running-gradle-task-assembledebug" aria-hidden="true">#</a> 报错：一直显示 Running Gradle task &#39;assembleDebug&#39;</h3><p>在上文的基础上，如果还是不能解决问题，检查 android 目录下是否有 settings.gradle 文件，文件内容如下：</p><div class="language-groovy"><pre><code>include <span class="token string">&#39;:app&#39;</span>\n\n<span class="token keyword">def</span> localPropertiesFile <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>rootProject<span class="token punctuation">.</span>projectDir<span class="token punctuation">,</span> <span class="token interpolation-string"><span class="token string">&quot;local.properties&quot;</span></span><span class="token punctuation">)</span>\n<span class="token keyword">def</span> properties <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n\n<span class="token keyword">assert</span> localPropertiesFile<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\nlocalPropertiesFile<span class="token punctuation">.</span><span class="token function">withReader</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">&quot;UTF-8&quot;</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span> reader <span class="token operator">-&gt;</span> properties<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>reader<span class="token punctuation">)</span> <span class="token punctuation">}</span>\n\n<span class="token keyword">def</span> flutterSdkPath <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">&quot;flutter.sdk&quot;</span></span><span class="token punctuation">)</span>\n<span class="token keyword">assert</span> flutterSdkPath <span class="token operator">!=</span> null<span class="token punctuation">,</span> <span class="token interpolation-string"><span class="token string">&quot;flutter.sdk not set in local.properties&quot;</span></span>\napply from<span class="token punctuation">:</span> <span class="token interpolation-string"><span class="token string">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">flutterSdkPath</span></span><span class="token string">/packages/flutter_tools/gradle/app_plugin_loader.gradle&quot;</span></span>\n</code></pre></div><p>如果没有请添加此文件。</p><p>再运行，可能出现文件 <code>flutter\\packages\\flutter_tools\\gradle\\flutter.gradle</code> 第 108 行报错，修改 hostedRepository 的值如下：</p><div class="language-dart"><pre><code><span class="token class-name">String</span> hostedRepository <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;https://storage.flutter-io.cn&quot;</span></span><span class="token punctuation">;</span>\n</code></pre></div><p>运行，如果还有如下报错信息：</p><p><strong>Task &#39;assembleAarRelease&#39; not found in root project &#39;flutter_plugin_android_lifecycle&#39;.</strong></p><p>请安装此包，</p><p>还有，需要检查 <code>AndroidManifest.xml</code>，<code>users-permission</code> 是否放错了位置，应该放在 application 外面</p><p><img src="/blog/_assets/flutter-error-1.75e2ddce.png" alt="flutter-error-1"></p><h3 id="报错：could-not-locate-aapt-please-ensure-you-have-the-android-buildtools-installed"><a class="header-anchor" href="#报错：could-not-locate-aapt-please-ensure-you-have-the-android-buildtools-installed" aria-hidden="true">#</a> 报错：Could not locate aapt. Please ensure you have the Android buildtools installed.</h3><h3 id="报错：task-permission-handler-compilereleasejavawithjavac"><a class="header-anchor" href="#报错：task-permission-handler-compilereleasejavawithjavac" aria-hidden="true">#</a> 报错：task &#39;:permission_handler:compileReleaseJavaWithJavac&#39;</h3><p>修改 compileSdkVersion 版本为 31 ：<code>android/app/build.gradle</code></p><h3 id="解决：flutter-canvaskit-failed-to-downloadhttps-chrome-infra-packages-appspot"><a class="header-anchor" href="#解决：flutter-canvaskit-failed-to-downloadhttps-chrome-infra-packages-appspot" aria-hidden="true">#</a> 解决：Flutter canvaskit Failed to download<a href="https://chrome-infra-packages.appspot/" target="_blank" rel="noopener noreferrer">https://chrome-infra-packages.appspot</a></h3><p>flutter web 工程第一次运行时会下载 <code>web sdk</code>, <code>canvaskit</code>，但是在国内常常卡在 <code>Downloading canvaskit</code> 就下载失败了</p><p>解决办法：使用国内的镜像</p><div class="language-bash"><pre><code><span class="token builtin class-name">export</span> <span class="token assign-left variable">FLUTTER_STORAGE_BASE_URL</span><span class="token operator">=</span>https://storage.flutter-io.cn\n</code></pre></div><p>再次运行时如果出现了 <code>Flutter assets will be downloaded from https://storage.flutter-io.cn. Make sure you trust this source!</code> 那基本就成功了，没有就重启下电脑</p><h3 id="flutter-build-ipa-报错：cannot-find-xcodebuild"><a class="header-anchor" href="#flutter-build-ipa-报错：cannot-find-xcodebuild" aria-hidden="true">#</a> flutter build ipa 报错：Cannot find &quot;xcodebuild&quot;</h3><div class="language-text"><pre><code>Cannot find &quot;xcodebuild&quot;. Xcode 13 or greater is required to develop for iOS.\nEncountered error while archiving for device.\n</code></pre></div><p>解决方法：</p><div class="language-bash"><pre><code><span class="token function">sudo</span> xcode-select --switch /Applications/Xcode.app/Contents/Developer \n</code></pre></div><p>如果路径不对，可以找到 Xcode，拉去路径</p>',36)];t.render=function(n,e,t,p,l,r){return a(),s("div",null,o)};export{e as __pageData,t as default};
