<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>
      å¯Œæ–‡æœ¬ç¼–è¾‘å™¨Tiptapç³»åˆ—æ•™ç¨‹â€”â€”Tiptapå¸¸ç”¨API & å‘½ä»¤è¯¦è§£ | å­¦ä¹ ç¬”è®°
    </title>
    <meta name="description" content="A VitePress site">
    <link rel="stylesheet" href="/blog/_assets/style.a71f0539.css">
    <link rel="modulepreload" href="/blog/_assets/common-03e46d7f.js">
    <link rel="modulepreload" href="/blog/_assets/docs_tiptap_tiptap-tutorial4.md.2394c182.lean.js">
    <link rel="modulepreload" href="/blog/_assets/app.1eef6263.js">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
    <meta name="keywords" content="ç¿”å­Blog">
    <link rel="icon" href="/blog/favicon.ico">
    <link rel="stylesheet" href="https://lib.baomitu.com/gitalk/1.7.0/gitalk.min.css">
    <script src="https://lib.baomitu.com/gitalk/1.7.0/gitalk.min.js"></script>
    <script src="https://lib.baomitu.com/axios/0.21.1/axios.js"></script>
    
  </head>
  <body>
    <div id="app"><!--[--><div id="containerColor" class="no-sidebar theme" data-v-afcf09d4><header class="navbar" data-v-afcf09d4><!--[--><a class="title" aria-label="å­¦ä¹ ç¬”è®°, back to home" href="/blog/"><img class="logo" src="/blog/favicon.ico" alt="logo"><span>å­¦ä¹ ç¬”è®°</span></a><div class="flex-grow"></div><nav class="nav-links hide-mobile"><!--[--><!--[--><div class="nav-item"><a class="nav-link" href="/blog/index.html" target="" rel="">ğŸ  é¦–é¡µ <!----></a></div><!--]--><!--[--><div class="nav-item"><a class="nav-link" href="/blog/more/docs.html" target="" rel="">ğŸ“… å½’æ¡£ <!----></a></div><!--]--><!--[--><div class="nav-item"><a class="nav-link" href="/blog/more/tags.html" target="" rel="">ğŸ“‚ åˆ†ç±» <!----></a></div><!--]--><!--]--><div id="docsearch"></div><!----><!----></nav><!--[--><!--]--><!--]--><div class="sidebar-button" data-v-afcf09d4><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div></header><aside class="" data-v-afcf09d4><!--[--><nav class="nav-links show-mobile"><!--[--><!--[--><div class="nav-item"><a class="nav-link" href="/blog/index.html" target="" rel="">ğŸ  é¦–é¡µ <!----></a></div><!--]--><!--[--><div class="nav-item"><a class="nav-link" href="/blog/more/docs.html" target="" rel="">ğŸ“… å½’æ¡£ <!----></a></div><!--]--><!--[--><div class="nav-item"><a class="nav-link" href="/blog/more/tags.html" target="" rel="">ğŸ“‚ åˆ†ç±» <!----></a></div><!--]--><!--]--><div id="docsearch"></div><!----><!----></nav><!--[--><!--]--><ul class="sidebar"><!--[--><!--]--></ul><!--[--><!--]--><!--]--></aside><!----><!-- TODO: make this button accessible --><div class="sidebar-mask" data-v-afcf09d4></div><main data-v-afcf09d4><!--[--><div class="content"><!--[--><!--]--><div class="md-header"><div class="md-title">å¯Œæ–‡æœ¬ç¼–è¾‘å™¨Tiptapç³»åˆ—æ•™ç¨‹â€”â€”Tiptapå¸¸ç”¨API &amp; å‘½ä»¤è¯¦è§£</div><span id="jinrishici-sentence">æ­£åœ¨åŠ è½½ä»Šæ—¥è¯—è¯....</span><div class="md-date">2023-07-02</div></div><ul class="catalog"><!--[--><li class="catalog-item"><a class="level level-2" href="#tiptap-å®ä¾‹">Tiptap å®ä¾‹</a><!----></li><li class="catalog-item"><!----><a class="level level-3" href="#æ–¹æ³•">æ–¹æ³•</a></li><li class="catalog-item"><!----><a class="level level-3" href="#can">can()</a></li><li class="catalog-item"><!----><a class="level level-3" href="#chain">chain()</a></li><li class="catalog-item"><!----><a class="level level-3" href="#destroy">destroy()</a></li><li class="catalog-item"><!----><a class="level level-3" href="#gethtml-getjson-gettext">getHTML()/getJSON()/getText()</a></li><li class="catalog-item"><!----><a class="level level-3" href="#getattributes">getAttributes()</a></li><li class="catalog-item"><!----><a class="level level-3" href="#isactive">isActive()</a></li><li class="catalog-item"><!----><a class="level level-3" href="#registerplugin-unregisterplugin">registerPlugin()/unregisterPlugin()</a></li><li class="catalog-item"><!----><a class="level level-3" href="#setoptions">setOptions()</a></li><li class="catalog-item"><!----><a class="level level-3" href="#seteditable">setEditable()</a></li><li class="catalog-item"><!----><a class="level level-3" href="#å±æ€§">å±æ€§</a></li><li class="catalog-item"><!----><a class="level level-3" href="#iseditable">isEditable</a></li><li class="catalog-item"><!----><a class="level level-3" href="#isempty">isEmpty</a></li><li class="catalog-item"><a class="level level-2" href="#commands-å‘½ä»¤">Commands å‘½ä»¤</a><!----></li><li class="catalog-item"><!----><a class="level level-3" href="#æ‰§è¡Œå‘½ä»¤">æ‰§è¡Œå‘½ä»¤</a></li><li class="catalog-item"><!----><a class="level level-3" href="#try-commands">Try commands</a></li><li class="catalog-item"><!----><a class="level level-3" href="#å‘½ä»¤åˆé›†">å‘½ä»¤åˆé›†</a></li><li class="catalog-item"><a class="level level-2" href="#æ€»ç»“">æ€»ç»“</a><!----></li><!--]--></ul><div><p>æ¥ä¸Šç¯‡<a href="https://juejin.cn/post/7243413934765621307" target="_blank" rel="noopener noreferrer">å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ Tiptap ç³»åˆ—æ•™ç¨‹â€”â€”Tiptap æ¨¡å—&amp;æ¦‚å¿µè¯¦è§£</a>ï¼Œæœ¬æ–‡æˆ‘ä»¬ä¸»è¦è¯´ä¸€ä¸‹ Tiptap çš„å¸¸ç”¨æ–¹æ³• &amp; å‘½ä»¤ã€‚</p><h2 id="tiptap-å®ä¾‹"><a class="header-anchor" href="#tiptap-å®ä¾‹" aria-hidden="true">#</a> Tiptap å®ä¾‹</h2><p>é¦–å…ˆå›å¿†ä¸€ä¸‹æˆ‘ä»¬ä¹‹å‰åˆå§‹åŒ–ç¼–è¾‘å™¨éƒ¨åˆ†ï¼š</p><div class="language-js"><pre><code><span class="token keyword">const</span> editor <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Editor</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>é€šè¿‡<code>new Editor</code>æˆ–<code>useEditor</code>åˆå§‹åŒ–å¾—åˆ°çš„<code>editor</code>å°±æ˜¯ä¸€ä¸ªç¼–è¾‘å™¨å®ä¾‹ï¼Œå®ä¾‹ä¸Šå­˜åœ¨å¾ˆå¤šå®ç”¨æ–¹æ³•å’Œå±æ€§ï¼Œä¸‹é¢æˆ‘ä»¬æ¥ä¸€ä¸€åˆ—ä¸¾ä¸‹ã€‚</p><h3 id="æ–¹æ³•"><a class="header-anchor" href="#æ–¹æ³•" aria-hidden="true">#</a> æ–¹æ³•</h3><p>ç¼–è¾‘å™¨å®ä¾‹æä¾›äº†å¾ˆå¤šæ–¹æ³•ï¼Œå¯ä»¥è¿”å›ä»»ä½•å†…å®¹ï¼Œå¢åŠ  Tiptap çš„å¯æ“ä½œæ€§ã€‚</p><h3 id="can"><a class="header-anchor" href="#can" aria-hidden="true">#</a> can()</h3><p>æ£€æŸ¥å‘½ä»¤æˆ–å‘½ä»¤é“¾æ˜¯å¦å¯ä»¥æ‰§è¡Œï¼Œä¸ä¼šå®é™…æ‰§è¡Œã€‚è¿”å›å€¼ä¸º<code>false/true</code>ã€‚</p><p>æ¯”å¦‚ï¼šä¹‹å‰åˆ©ç”¨<code>!editor.can().chain().focus().toggleBold().run()</code>æ¥å¯¹<code>åŠ ç²—bold</code>æŒ‰é’®è¿›è¡Œå¯ç”¨æˆ–ç¦ç”¨ã€‚</p><div class="language-js"><pre><code><span class="token operator">&lt;</span>button
  @click<span class="token operator">=</span><span class="token string">&quot;editor.chain().focus().toggleBold().run()&quot;</span>
  <span class="token operator">:</span>disabled<span class="token operator">=</span><span class="token string">&quot;!editor.can().chain().focus().toggleBold().run()&quot;</span>
  <span class="token operator">:</span><span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;{ &#39;is-active&#39;: editor.isActive(&#39;bold&#39;) }&quot;</span>
<span class="token operator">&gt;</span>
  bold
<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
</code></pre></div><h3 id="chain"><a class="header-anchor" href="#chain" aria-hidden="true">#</a> chain()</h3><p>ä¹‹å‰è¯´è¿‡ï¼Œé€šè¿‡<code>chain()</code>å¯ä»¥åˆ›å»ºä¸€æ¡é“¾æ¥æ‰§è¡Œå¤šä¸ªæ–¹æ³•ï¼Œæœ€åéœ€è¦æ·»åŠ <code>.run()</code>æ¥å®é™…æ‰§è¡Œæ‰€æœ‰å‘½ä»¤ã€‚</p><div class="language-js"><pre><code>editor<span class="token punctuation">.</span><span class="token function">chain</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toggleBold</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="destroy"><a class="header-anchor" href="#destroy" aria-hidden="true">#</a> destroy()</h3><p>é”€æ¯ç¼–è¾‘å™¨å®ä¾‹å¹¶æ³¨é”€æ‰€æœ‰äº‹ä»¶ï¼Œåœ¨ç»„ä»¶é”€æ¯æ—¶è°ƒç”¨ã€‚</p><div class="language-js"><pre><code><span class="token function">onUnmounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> editor<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="gethtml-getjson-gettext"><a class="header-anchor" href="#gethtml-getjson-gettext" aria-hidden="true">#</a> getHTML()/getJSON()/getText()</h3><p>è·å–ç¼–è¾‘å™¨ HTML/JSON/çº¯æ–‡æœ¬ Text å†…å®¹ã€‚</p><div class="language-js"><pre><code><span class="token function">onUpdate</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> editor <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> json <span class="token operator">=</span> editor<span class="token punctuation">.</span><span class="token function">getJSON</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> html <span class="token operator">=</span> editor<span class="token punctuation">.</span><span class="token function">getHTML</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token comment">// é»˜è®¤ä¸¤ä¸ªèŠ‚ç‚¹ nodes ä¹‹é—´ä¸¤ä¸ªæ¢è¡Œç¬¦</span>
  <span class="token keyword">const</span> text <span class="token operator">=</span> editor<span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token comment">// å¯ä¼ å…¥å‚æ•° blockSeparator æ§åˆ¶èŠ‚ç‚¹ä¹‹é—´çš„è¿æ¥</span>
  <span class="token keyword">const</span> lineText <span class="token operator">=</span> editor<span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">blockSeparator</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>json<span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>html<span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>lineText<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p><img src="/blog/_assets/getJSON-getHTML-getText.77ea5f74.png" alt="getJSON-getHTML-getText.png"></p><h3 id="getattributes"><a class="header-anchor" href="#getattributes" aria-hidden="true">#</a> getAttributes()</h3><p>è·å–å½“å‰é€‰ä¸­çš„èŠ‚ç‚¹æˆ–æ ‡è®°çš„å±æ€§ï¼Œå¦‚è·å–å½“å‰é“¾æ¥çš„hrefå±æ€§ï¼š</p><div class="language-js"><pre><code>editor<span class="token punctuation">.</span><span class="token function">getAttributes</span><span class="token punctuation">(</span><span class="token string">&#39;link&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>href
</code></pre></div><h3 id="isactive"><a class="header-anchor" href="#isactive" aria-hidden="true">#</a> isActive()</h3><p>è¿”å›å½“å‰é€‰å®šçš„èŠ‚ç‚¹æˆ–æ ‡è®°æ˜¯å¦å¤„äºæ¿€æ´»çŠ¶æ€ï¼Œå¦‚æˆ‘ä»¬ä¹‹å‰ç”¨äºåˆ¤æ–­<code>bold</code>æ˜¯å¦å¤„äºæ¿€æ´»çŠ¶æ€æ—¶ï¼Œä¸ºå…¶æ·»åŠ <code>is-active</code>ç±»ï¼š</p><div class="language-js"><pre><code><span class="token operator">:</span><span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;{ &#39;is-active&#39;: editor.isActive(&#39;bold&#39;) }&quot;</span>
</code></pre></div><h3 id="registerplugin-unregisterplugin"><a class="header-anchor" href="#registerplugin-unregisterplugin" aria-hidden="true">#</a> registerPlugin()/unregisterPlugin()</h3><p>æ³¨å†Œ/æ³¨é”€ä¸€ä¸ª ProseMirror æ’ä»¶ã€‚</p><p>é¡¹ç›®ä¸­æš‚æ—¶è¿˜æ²¡æœ‰ç”¨åˆ°ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹ä¸‹ vue3 ä¸­å¯¹<a href="https://github.com/ueberdosis/tiptap/blob/HEAD/packages/vue-3/src/BubbleMenu.ts#L53" target="_blank" rel="noopener noreferrer">BubbleMenu</a>æ³¨å†Œæ’ä»¶çš„ä»£ç ã€‚</p><div class="language-js"><pre><code><span class="token keyword">import</span> <span class="token punctuation">{</span> BubbleMenuPlugin<span class="token punctuation">,</span> BubbleMenuPluginProps <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@tiptap/extension-bubble-menu&#39;</span>
<span class="token comment">// ...</span>
<span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span>
    updateDelay<span class="token punctuation">,</span>
    editor<span class="token punctuation">,</span>
    pluginKey<span class="token punctuation">,</span>
    shouldShow<span class="token punctuation">,</span>
    tippyOptions<span class="token punctuation">,</span>
  <span class="token punctuation">}</span> <span class="token operator">=</span> props

  editor<span class="token punctuation">.</span><span class="token function">registerPlugin</span><span class="token punctuation">(</span><span class="token function">BubbleMenuPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    updateDelay<span class="token punctuation">,</span>
    editor<span class="token punctuation">,</span>
    <span class="token literal-property property">element</span><span class="token operator">:</span> root<span class="token punctuation">.</span>value <span class="token keyword">as</span> HTMLElement<span class="token punctuation">,</span>
    pluginKey<span class="token punctuation">,</span>
    shouldShow<span class="token punctuation">,</span>
    tippyOptions<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token function">onBeforeUnmount</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> pluginKey<span class="token punctuation">,</span> editor <span class="token punctuation">}</span> <span class="token operator">=</span> props

  editor<span class="token punctuation">.</span><span class="token function">unregisterPlugin</span><span class="token punctuation">(</span>pluginKey<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// ...</span>
</code></pre></div><p>åœ¨<code>onMounted</code>ä¸­æ³¨å†Œæ’ä»¶<code>BubbleMenuPlugin</code>ï¼Œå¹¶åœ¨<code>onBeforeUnmount</code>é€šè¿‡<code>pluginKey</code>æ³¨é”€è¿™ä¸ªæ’ä»¶ã€‚</p><h3 id="setoptions"><a class="header-anchor" href="#setoptions" aria-hidden="true">#</a> setOptions()</h3><p>æ‰‹åŠ¨æ›´æ–°ç¼–è¾‘å™¨çš„é…ç½®ã€‚</p><p>æˆ‘ä»¬é€šè¿‡<code>new Editor()</code>åˆå§‹åŒ–æ—¶å¯¹ç¼–è¾‘å™¨æ·»åŠ é…ç½®ä¹‹å¤–ï¼Œè¿˜å¯ä»¥é€šè¿‡<code>setOptions()</code>å»åŠ¨æ€çš„ä¿®æ”¹é…ç½®ï¼Œå‚æ•°åŒåˆå§‹åŒ–ç›¸åŒã€‚</p><div class="language-js"><pre><code><span class="token comment">// æ·»åŠ  class æ ·å¼åˆ°ç¼–è¾‘å™¨å®ä¾‹</span>
editor<span class="token punctuation">.</span><span class="token function">setOptions</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">editorProps</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">attributes</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token keyword">class</span><span class="token operator">:</span> <span class="token string">&#39;my-custom-class&#39;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="seteditable"><a class="header-anchor" href="#seteditable" aria-hidden="true">#</a> setEditable()</h3><p>æ›´æ–°ç¼–è¾‘å™¨çš„å¯ç¼–è¾‘çŠ¶æ€ï¼Œæ¥å—ä¸¤ä¸ªå‚æ•°<code>editable</code>å’Œ<code>emitUpdate</code>ã€‚</p><div class="language-js"><pre><code><span class="token comment">// è®¾ç½®ç¼–è¾‘å™¨åªè¯»</span>
editor<span class="token punctuation">.</span><span class="token function">setEditable</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="å±æ€§"><a class="header-anchor" href="#å±æ€§" aria-hidden="true">#</a> å±æ€§</h3><p>ç›®å‰æœ‰ isEditableï¼ˆæ˜¯å¦æ˜¯ç¼–è¾‘çŠ¶æ€ï¼‰ å’Œ isEmptyï¼ˆå†…å®¹æ˜¯å¦ä¸ºç©ºï¼‰ ä¸¤ä¸ªå±æ€§ã€‚</p><h3 id="iseditable"><a class="header-anchor" href="#iseditable" aria-hidden="true">#</a> isEditable</h3><p>è¿”å›ç¼–è¾‘å™¨æ˜¯å¯ç¼–è¾‘çš„è¿˜æ˜¯åªè¯»çš„ã€‚</p><div class="language-js"><pre><code>editor<span class="token punctuation">.</span>isEditable
</code></pre></div><h3 id="isempty"><a class="header-anchor" href="#isempty" aria-hidden="true">#</a> isEmpty</h3><p>æ£€æŸ¥æ˜¯å¦æœ‰å†…å®¹ã€‚</p><div class="language-js"><pre><code>editor<span class="token punctuation">.</span>isEmpty
</code></pre></div><h2 id="commands-å‘½ä»¤"><a class="header-anchor" href="#commands-å‘½ä»¤" aria-hidden="true">#</a> Commands å‘½ä»¤</h2><p>Commands å‘½ä»¤ç”¨äºæ›´æ”¹ç¼–è¾‘å™¨çš„çŠ¶æ€ï¼ˆå†…å®¹ã€é€‰åŒºç­‰ï¼‰ï¼Œä»…è¿”å› <code>true/false</code>ã€‚Tiptap ç¼–è¾‘å™¨æä¾›äº†å¤§é‡ Commands å‘½ä»¤ï¼Œå¯ä»¥æ·»åŠ æˆ–æ›´æ”¹å†…å®¹ã€æ›´æ”¹é€‰æ‹©ç­‰ã€‚åªæœ‰æŒæ¡è¿™äº›å‘½ä»¤ï¼Œæ‰èƒ½æ›´å¥½çš„ä½¿ç”¨ Tiptap ç¼–è¾‘å™¨ã€‚</p><p><strong>åˆ‡è®°ï¼šä¸è¦æ··æ·†å®ä¾‹æ–¹æ³•å’Œ commands å‘½ä»¤</strong>ï¼Œå®ä¾‹æ–¹æ³•å¯è¿”å›ä»»ä½•å†…å®¹ï¼Œå‘½ä»¤ä»…è¿”å› <code>true/false</code>ã€‚</p><h3 id="æ‰§è¡Œå‘½ä»¤"><a class="header-anchor" href="#æ‰§è¡Œå‘½ä»¤" aria-hidden="true">#</a> æ‰§è¡Œå‘½ä»¤</h3><p>Tiptap ä¸­æ‰€æœ‰å‘½ä»¤éƒ½å¯ä»¥é€šè¿‡ç¼–è¾‘å™¨å®ä¾‹<code>editor</code>è°ƒç”¨ï¼Œæ¯”å¦‚åœ¨ç”¨æˆ·å•å‡»æŒ‰é’®æ—¶å°†æ–‡æœ¬è®¾ç½®ä¸ºç²—ä½“ï¼š</p><div class="language-js"><pre><code>editor<span class="token punctuation">.</span>commands<span class="token punctuation">.</span><span class="token function">setBold</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>ä¸Šé¢å‘½ä»¤å¯ä»¥ä½¿æ‰€é€‰å†…å®¹å˜ä¸ºç²—ä½“ï¼Œä½†åœ¨ä½¿ç”¨æ­¤ç±»å‘½ä»¤æ—¶æ˜¯ç‚¹å‡»å¤–éƒ¨æŒ‰é’®ï¼Œä¼šå¯¼è‡´ç¼–è¾‘å™¨å¤±ç„¦ï¼Œæ‰€ä»¥é€šå¸¸ä¼šé€šè¿‡é“¾å¼è°ƒç”¨ä½¿ç¼–è¾‘å™¨é‡æ–°è·å–ç„¦ç‚¹ã€‚</p><h4 id="chain-é“¾å¼è°ƒç”¨"><a class="header-anchor" href="#chain-é“¾å¼è°ƒç”¨" aria-hidden="true">#</a> chain é“¾å¼è°ƒç”¨</h4><p>å¤§å¤šæ•°çš„å‘½ä»¤å¯ä»¥ç»„åˆä¸ºä¸€ä¸ªè°ƒç”¨ï¼Œè¿™æ¯”å•ç‹¬çš„å‡½æ•°è°ƒç”¨è¦ç®€çŸ­ä¼˜é›…ä¸€äº›ï¼Œé“¾å‘½ä»¤ä»¥<code>.chain()</code>å¼€å¤´<code>.run()</code>ç»“å°¾ï¼Œå°†å¤šä¸ªå‘½ä»¤åˆå¹¶æˆä¸€ä¸ªäº‹åŠ¡ï¼Œå†…å®¹åªæ›´æ–°ä¸€æ¬¡ï¼Œå¹¶ä¸”äº‹åŠ¡ä¹Ÿåªè§¦å‘ä¸€æ¬¡ï¼Œæ¯”å¦‚ä¿®æ”¹ä¸Šé¢ä½¿æ–‡æœ¬åŠ ç²—çš„ä¾‹å­ï¼š</p><div class="language-js"><pre><code>editor<span class="token punctuation">.</span><span class="token function">chain</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toggleBold</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>ä¸Šé¢æˆ‘ä»¬è¯´è¿‡å½“ç‚¹å‡»ç¼–è¾‘å™¨å¤–éƒ¨åŒºåŸŸè°ƒç”¨æ–¹æ³•æ—¶ï¼Œä¼šå¯¼è‡´ç¼–è¾‘å™¨å¤±ç„¦ï¼Œæ‰€ä»¥éœ€è¦é“¾å¼è°ƒç”¨<code>focus()</code>ä½¿ç¼–è¾‘å™¨é‡æ–°è·å–ç„¦ç‚¹ï¼Œå†ç»§ç»­æ‰§è¡Œå…¶ä»–æ–¹æ³•ã€‚</p><h4 id="æ£€æµ‹å‘½ä»¤æ˜¯å¦å¯æ‰§è¡Œ"><a class="header-anchor" href="#æ£€æµ‹å‘½ä»¤æ˜¯å¦å¯æ‰§è¡Œ" aria-hidden="true">#</a> æ£€æµ‹å‘½ä»¤æ˜¯å¦å¯æ‰§è¡Œ</h4><p>é€šè¿‡<code>editor.can().xxx()</code>å¯ä»¥åˆ¤æ–­å‘½ä»¤æ˜¯å¦å¯ä»¥æ‰§è¡Œï¼Œè¿”å›<code>true/false</code>ã€‚æ¯”å¦‚æˆ‘ä»¬åœ¨è¡¨æ ¼ä¸­éœ€è¦åˆ¤æ–­å½“å‰é€‰ä¸­å•å…ƒæ ¼æ˜¯å¦å¯ä»¥åˆå¹¶/æ‹†åˆ†ï¼Œå› ä¸ºå¹¶ä¸æ˜¯æ‰€é€‰çš„å•å…ƒæ ¼å°±å¯ä»¥è¿›è¡Œåˆå¹¶/æ‹†åˆ†æ“ä½œï¼š</p><div class="language-js"><pre><code><span class="token comment">// æ˜¯å¦å¯åˆå¹¶</span>
editor<span class="token punctuation">.</span><span class="token function">can</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mergeCells</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// æ˜¯å¦å¯æ‹†åˆ†</span>
editor<span class="token punctuation">.</span><span class="token function">can</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">splitCell</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="try-commands"><a class="header-anchor" href="#try-commands" aria-hidden="true">#</a> Try commands</h3><p><code>.first()</code>ç”¨äºæ‰§è¡Œå‘½ä»¤åˆ—è¡¨ï¼Œé¦–å…ˆæ‰§è¡Œç¬¬ä¸€ä¸ªå‘½ä»¤ï¼Œå¦‚æœç¬¬ä¸€ä¸ªå‘½ä»¤è¿”å›<code>true</code>ï¼Œå³æ‰§è¡ŒæˆåŠŸæ—¶å°±ä¼šåœæ­¢ï¼›å¦‚æœç¬¬ä¸€ä¸ªå‘½ä»¤æ‰§è¡Œå¤±è´¥ï¼Œå°±ä¼šæ¥ç€æ‰§è¡Œç¬¬äºŒä¸ªå‘½ä»¤ï¼Œå³ä¸€ä¸ªæ¥ä¸€ä¸ªæ‰§è¡Œï¼Œé‡åˆ°æˆåŠŸæ‰§è¡Œçš„å‘½ä»¤åˆ™åœæ­¢æ‰§è¡Œã€‚</p><p>å¦‚ï¼šé€€æ ¼é”®é¦–å…ˆå°è¯•æ’¤æ¶ˆè¾“å…¥è§„åˆ™ã€‚å¦‚æœæˆåŠŸï¼Œå°±åˆ°æ­¤ä¸ºæ­¢ã€‚å¦‚æœæ²¡æœ‰åº”ç”¨è¾“å…¥è§„åˆ™ï¼Œå› æ­¤æ— æ³•æ¢å¤ï¼Œå®ƒå°†è¿è¡Œä¸‹ä¸€ä¸ªå‘½ä»¤å¹¶åˆ é™¤é€‰æ‹©ã€‚</p><div class="language-js"><pre><code>editor<span class="token punctuation">.</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> commands <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span>
  <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> commands<span class="token punctuation">.</span><span class="token function">undoInputRule</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> commands<span class="token punctuation">.</span><span class="token function">deleteSelection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token comment">// â€¦</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><p>ä¹Ÿå¯ä»¥åœ¨å‘½ä»¤ä¸­åº”ç”¨ <code>commands.first()</code> æ–¹æ³•</p><div class="language-js"><pre><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
  <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> commands <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> commands<span class="token punctuation">.</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
      <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> commands<span class="token punctuation">.</span><span class="token function">undoInputRule</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> commands<span class="token punctuation">.</span><span class="token function">deleteSelection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token comment">// â€¦</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
</code></pre></div><h3 id="å‘½ä»¤åˆé›†"><a class="header-anchor" href="#å‘½ä»¤åˆé›†" aria-hidden="true">#</a> å‘½ä»¤åˆé›†</h3><p>Tiptap æœ‰å¾ˆå¯ä½¿ç”¨å¤šå‘½ä»¤ï¼ŒåŒ…æ‹¬å¯¹æ–‡æ¡£ã€èŠ‚ç‚¹/æ ‡è®°å’Œé€‰ä¸­åŒºåŸŸçš„å„ç§æ“ä½œï¼Œæ‰€ä»¥è¦æƒ³ç©è½¬ Tiptapï¼Œå¿…é¡»ç†Ÿæ‚‰è¿™äº›å‘½ä»¤ï¼ŒçŸ¥é“åœ¨ä»€ä¹ˆæ—¶å€™ç”¨ä»€ä¹ˆå‘½ä»¤ã€‚</p><h4 id="content-æ–‡æ¡£å‘½ä»¤"><a class="header-anchor" href="#content-æ–‡æ¡£å‘½ä»¤" aria-hidden="true">#</a> content æ–‡æ¡£å‘½ä»¤</h4><ul><li><p>clearContent</p><p>æ¸…ç©ºæ–‡æ¡£ä¸­çš„æ‰€æœ‰å†…å®¹ã€‚</p></li><li><p>insertContent/insertContentAt</p><p>åœ¨å½“å‰/æŒ‡å®šä½ç½®æ’å…¥çº¯æ–‡æœ¬ã€HTML æˆ– JSON èŠ‚ç‚¹ã€‚è¿™ä¸¤ä¸ªå‘½ä»¤ä½¿ç”¨è¾ƒå¤šï¼Œå¦‚ä¸€äº›è‡ªå®šä¹‰èŠ‚ç‚¹æ’å…¥å†…å®¹æ—¶æˆ‘ä»¬ä¼šä½¿ç”¨ï¼š</p><div class="language-js"><pre><code>commands<span class="token punctuation">.</span><span class="token function">insertContent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;xxx&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">attrs</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>æˆ–è€…å¦‚æ’å…¥è¡¨æƒ…å†…å®¹æ—¶ï¼š</p><div class="language-js"><pre><code>props<span class="token punctuation">.</span>editor<span class="token punctuation">.</span><span class="token function">chain</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">insertContent</span><span class="token punctuation">(</span>emoji<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div></li><li><p>setContent</p><p>è®¾ç½®æ–‡æ¡£å†…å®¹ï¼ˆç”¨æ–°æ–‡æ¡£æ›¿æ¢è¯¥æ–‡æ¡£ï¼‰ï¼Œä¸€èˆ¬ç”¨äºåˆå§‹åŒ–æ–‡æ¡£å†…å®¹ã€‚</p></li></ul><h4 id="èŠ‚ç‚¹ã€æ ‡è®°å‘½ä»¤"><a class="header-anchor" href="#èŠ‚ç‚¹ã€æ ‡è®°å‘½ä»¤" aria-hidden="true">#</a> èŠ‚ç‚¹ã€æ ‡è®°å‘½ä»¤</h4><ul><li><p>clearNodes</p><p>å°†èŠ‚ç‚¹è§„èŒƒåŒ–ä¸ºé»˜è®¤èŠ‚ç‚¹ï¼Œä¸€èˆ¬ç”¨äºæ¸…é™¤æ ·å¼ï¼Œå¦‚ï¼šæ©¡çš®æ“¦åŠŸèƒ½ã€‚</p></li><li><p>createParagraphNear</p><p>åœ¨é€‰ä¸­èŠ‚ç‚¹åé¢æ·»åŠ ç©ºæ®µè½ã€‚</p></li><li><p>deleteNode</p><p>åˆ é™¤é€‰ä¸­èŠ‚ç‚¹ï¼Œå¦‚ä¸€äº›è‡ªå®šä¹‰èŠ‚ç‚¹åˆ é™¤æ—¶ï¼š</p><div class="language-js"><pre><code><span class="token function-variable function">Backspace</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>editor
    <span class="token punctuation">.</span><span class="token function">chain</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">deleteNode</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">insertContent</span><span class="token punctuation">(</span><span class="token string">&#39;&lt;p&gt;&lt;/p&gt;&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span>
</code></pre></div></li><li><p>extendMarkRange</p><p>æ‰©å±•å½“å‰çš„é€‰æ‹©ä»¥åŒ…å«å½“å‰æ ‡è®°ï¼Œå¦‚å°†å½“å‰é€‰ä¸­åŒºåŸŸè®¾ç½®ä¸ºé“¾æ¥ï¼š</p><div class="language-js"><pre><code>props<span class="token punctuation">.</span>editor
  <span class="token punctuation">.</span><span class="token function">chain</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">extendMarkRange</span><span class="token punctuation">(</span><span class="token string">&#39;link&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">setLink</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">href</span><span class="token operator">:</span> link <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div></li><li><p>setMark</p><p>åœ¨å½“å‰é€‰æ‹©å¤„æ·»åŠ ä¸€ä¸ªæ–°æ ‡è®°ï¼Œä¸»è¦ç”¨äºå¯¹é€‰ä¸­æ–‡æœ¬æ·»åŠ å„ç§æ ‡è®°ï¼Œå¦‚å¯¹è®¾ç½®åŠ ç²—æˆ–å­—ä½“ç­‰ï¼š</p><div class="language-js"><pre><code><span class="token function-variable function">setFontSize</span><span class="token operator">:</span>
  <span class="token punctuation">(</span><span class="token parameter">fontSize</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
  <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> tr<span class="token punctuation">,</span> chain<span class="token punctuation">,</span> editor<span class="token punctuation">,</span> dispatch <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">chain</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setMark</span><span class="token punctuation">(</span><span class="token string">&#39;textStyle&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> fontSize <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token function-variable function">unsetFontSize</span><span class="token operator">:</span>
  <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
  <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> chain <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">chain</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setMark</span><span class="token punctuation">(</span><span class="token string">&#39;textStyle&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">fontSize</span><span class="token operator">:</span> <span class="token keyword">null</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
</code></pre></div></li><li><p>setNode</p><p>å°†å½“å‰èŠ‚ç‚¹æ›¿æ¢æˆæŒ‡å®šèŠ‚ç‚¹ï¼Œå¦‚å¯¹å½“å‰èŠ‚ç‚¹è¿›è¡Œæ ‡é¢˜å’Œæ­£æ–‡çš„åˆ‡æ¢ï¼š</p><div class="language-js"><pre><code>editor<span class="token punctuation">.</span>commands<span class="token punctuation">.</span><span class="token function">setNode</span><span class="token punctuation">(</span><span class="token string">&#39;paragraph&#39;</span><span class="token punctuation">)</span>
editor<span class="token punctuation">.</span>commands<span class="token punctuation">.</span><span class="token function">setNode</span><span class="token punctuation">(</span><span class="token string">&#39;heading&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">level</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></li><li><p>toggleMark</p><p>åœ¨å½“å‰é€‰æ‹©å¤„æ‰“å¼€å’Œå…³é—­ç‰¹å®šæ ‡è®°ï¼Œä¹Ÿå°±æ˜¯æ·»åŠ æˆ–å–æ¶ˆæ·»åŠ æ ‡è®°ï¼Œå¦‚ï¼š</p><div class="language-js"><pre><code>editor<span class="token punctuation">.</span>commands<span class="token punctuation">.</span><span class="token function">toggleMark</span><span class="token punctuation">(</span><span class="token string">&#39;bold&#39;</span><span class="token punctuation">)</span>
</code></pre></div><p>ç‚¹å‡»ä¸€æ¬¡æ—¶é€‰ä¸­å†…å®¹åŠ ç²—ï¼Œå†æ¬¡ç‚¹å‡»é€‰ä¸­å†…å®¹å°†å–æ¶ˆç²—ä½“ã€‚</p></li><li><p>toggleNode</p><p>ç±»ä¼¼äº toggleMarkï¼Œæ‰€é€‰èŠ‚ç‚¹å°†åœ¨ä¸€ä¸ªèŠ‚ç‚¹ä¸å¦ä¸€ä¸ªèŠ‚ç‚¹ä¹‹é—´åˆ‡æ¢ï¼Œå¦‚ï¼š</p><div class="language-js"><pre><code>props<span class="token punctuation">.</span>editor<span class="token punctuation">.</span><span class="token function">chain</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toggleNode</span><span class="token punctuation">(</span><span class="token string">&#39;paragraph&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;heading&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>ç‚¹å‡»ä¸€æ¬¡æ—¶å½“å‰èŠ‚ç‚¹è½¬ä¸ºæ ‡é¢˜ï¼Œå†æ¬¡ç‚¹å‡»æ ‡é¢˜åˆè½¬ä¸ºæ®µè½ã€‚</p></li><li><p>unsetAllMarks</p><p>å°†é€‰ä¸­å†…å®¹çš„æ‰€æœ‰ marks æ ‡è®°ç§»é™¤ã€‚</p></li><li><p>unsetMark</p><p>ä¸ setMark ä½œç”¨ç›¸åï¼Œç§»é™¤å½“å‰é€‰ä¸­å†…å®¹çš„æŒ‡å®šæ ‡è®°ã€‚</p></li><li><p>updateAttributes</p><p>æ›´æ–°èŠ‚ç‚¹ã€æ ‡è®°çš„å±æ€§ï¼Œåªéœ€ä¼ é€’éœ€è¦æ›´æ”¹çš„å±æ€§ï¼Œå¦‚é’ˆå¯¹å›¾ç‰‡çš„å®½åº¦è®¾ç½®ï¼š</p><div class="language-js"><pre><code>editor<span class="token punctuation">.</span>commands<span class="token punctuation">.</span><span class="token function">updateAttributes</span><span class="token punctuation">(</span><span class="token string">&#39;image&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">100</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></li></ul><h4 id="selection-é€‰åŒºå‘½ä»¤"><a class="header-anchor" href="#selection-é€‰åŒºå‘½ä»¤" aria-hidden="true">#</a> selection é€‰åŒºå‘½ä»¤</h4><ul><li><p>blur</p><p>ä½¿ç¼–è¾‘å™¨å¤±å»ç„¦ç‚¹ã€‚</p></li><li><p>focus</p><p>å°†ç„¦ç‚¹è®¾ç½®å›ç¼–è¾‘å™¨ï¼Œå¯ä»¥çœ‹åˆ°ä¸Šé¢è®²åˆ°çš„å¤§éƒ¨åˆ†é“¾å¼å‘½ä»¤ä¸­éƒ½ç”¨äº† focus å‘½ä»¤ï¼Œå¹¶ä¸”å¯ä»¥é’ˆå¯¹å…‰æ ‡ä½ç½®è¿›è¡Œè®¾ç½®ï¼š</p><div class="language-js"><pre><code><span class="token comment">// è®¾ç½®ç¼–è¾‘å™¨è·å¾—ç„¦ç‚¹</span>
editor<span class="token punctuation">.</span>commands<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// è®¾ç½®å…‰æ ‡ä½äºç¼–è¾‘å™¨å¼€å§‹ä½ç½®</span>
editor<span class="token punctuation">.</span>commands<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token string">&#39;start&#39;</span><span class="token punctuation">)</span>

<span class="token comment">// è®¾ç½®å…‰æ ‡ä½äºç¼–è¾‘å™¨ç»“å°¾ä½ç½®</span>
editor<span class="token punctuation">.</span>commands<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token string">&#39;end&#39;</span><span class="token punctuation">)</span>

<span class="token comment">// é€‰ä¸­å…¨éƒ¨æ–‡æ¡£</span>
editor<span class="token punctuation">.</span>commands<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token string">&#39;all&#39;</span><span class="token punctuation">)</span>

<span class="token comment">// è®¾ç½®å…‰æ ‡åˆ°pos=10çš„ä½ç½®</span>
editor<span class="token punctuation">.</span>commands<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>

<span class="token comment">// è®¾ç½®å…‰æ ‡ä½äºç»“å°¾ä½ç½®ï¼Œä½†æ˜¯æ»šåŠ¨æ¡ä¸æ»šåŠ¨åˆ°ç»“å°¾ï¼ˆå½“å†…å®¹é«˜åº¦å¤§äºç¼–è¾‘å™¨é«˜åº¦æœ‰æ»šåŠ¨æ¡æ—¶ï¼‰</span>
editor<span class="token punctuation">.</span>commands<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token string">&#39;end&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">scrollIntoView</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></li><li><p>deleteRange</p><p>åˆ é™¤æŒ‡å®šèŒƒå›´å†…æ‰€æœ‰å†…å®¹ï¼Œå¦‚ï¼š</p><div class="language-js"><pre><code>editor<span class="token punctuation">.</span>commands<span class="token punctuation">.</span><span class="token function">deleteRange</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">from</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token literal-property property">to</span><span class="token operator">:</span> <span class="token number">10</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></li><li><p>deleteSelection</p><p>åˆ é™¤å½“å‰é€‰ä¸­èŠ‚ç‚¹ã€‚</p></li><li><p>enter</p><p>è§¦å‘é”®ç›˜&quot;Enter&quot;ã€‚</p></li><li><p>scrollIntoView</p><p>å°†è§†å›¾æ»šåŠ¨åˆ°å½“å‰é€‰æ‹©æˆ–å…‰æ ‡ä½ç½®ã€‚</p></li><li><p>selectAll</p><p>é€‰ä¸­æ•´ä¸ªæ–‡æ¡£ã€‚</p></li><li><p>setNodeSelection</p><p>ç»™å®šä½ç½®åˆ›å»ºä¸€ä¸ªæ–°çš„èŠ‚ç‚¹é€‰åŒºï¼Œå¦‚é€‰ä¸­å›¾ç‰‡ã€åˆ—è¡¨ç­‰å—å…ƒç´ ï¼Œä¼ å…¥èŠ‚ç‚¹çš„æ‰€åœ¨ä½ç½®ã€‚</p></li><li><p>setTextSelection</p><p>åˆ›å»ºä¸€ä¸ªæ–‡æœ¬é€‰åŒºï¼Œæ¥å— number æˆ– rangeï¼Œå¦‚æœä¼ å…¥ range æ—¶ä¼šé€‰ä¸­æ–‡æœ¬ï¼Œä¼ å…¥ number æ—¶åªæ˜¯ç§»åŠ¨å…‰æ ‡ä½ç½®ã€‚</p><div class="language-js"><pre><code><span class="token comment">// ä»…ç§»åŠ¨å…‰æ ‡</span>
editor<span class="token punctuation">.</span>commands<span class="token punctuation">.</span><span class="token function">setTextSelection</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span>
<span class="token comment">// é€‰ä¸­æ–‡æœ¬åŒºåŸŸ</span>
editor<span class="token punctuation">.</span>commands<span class="token punctuation">.</span><span class="token function">setTextSelection</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">from</span><span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token literal-property property">to</span><span class="token operator">:</span> <span class="token number">8</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></li></ul><h2 id="æ€»ç»“"><a class="header-anchor" href="#æ€»ç»“" aria-hidden="true">#</a> æ€»ç»“</h2><p>æœ¬æ–‡ä¸»è¦è®²äº† Tiptap å®ä¾‹æ–¹æ³•å’Œå¸¸ç”¨å‘½ä»¤ï¼Œè®°ä½ä¸è¦<strong>æ··æ·†å®ä¾‹æ–¹æ³•å’Œå‘½ä»¤</strong>ã€‚æˆ‘ä»¬åªéœ€è¦è®°ä½è¿™äº› API çš„å¤§æ¦‚ä½œç”¨ï¼Œè„‘è¢‹é‡Œæœ‰ä¸ªâ€œå½±å­â€ã€‚ä¸€æ—¦æŸä¸ªåœ°æ–¹éœ€è¦è¿™ä¹ˆåšçš„æ—¶å€™ï¼Œè¦èƒ½å›å¿†èµ·å¥½åƒå·²ç»æœ‰æ–¹æ³•å®ç°äº†ï¼Œç„¶åå†å»è¯¦ç»†æŸ¥çœ‹å¯¹åº”çš„æ–¹æ³•ï¼Œæœ€ç»ˆä½¿ç”¨å®ƒå¹¶è§£å†³é—®é¢˜ï¼Œè¿™å¥—æ€æƒ³é€‚ç”¨äºæ‰€æœ‰ API è¾ƒå¤šçš„ç»„ä»¶ã€æ¡†æ¶ç­‰ã€‚</p><p>è¿™ç¯‡æ–‡ç« å®Œåï¼Œå…³äºè‡ªå®šä¹‰èŠ‚ç‚¹ã€æ ‡è®°æ‰©å±•ç­‰çš„æ–‡ç« æš‚æ—¶ä¸å†æ›´æ–°ã€‚leader å®‰æ’æˆ‘åš webrtc éŸ³è§†é¢‘é€šè¯çš„è°ƒç ”å·¥ä½œï¼Œç­‰å®Œæˆè¿™éƒ¨åˆ†å·¥ä½œåç»§ç»­æ›´æ–°ã€‚</p><p>ä»¥ä¸Šå°±æ˜¯æœ¬æ–‡çš„å…¨éƒ¨å†…å®¹ï¼Œå¸Œæœ›è¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼Œæ¬¢è¿ç‚¹èµå’Œæ”¶è— ğŸ™ï¼Œå¦‚æœå‘ç°æœ‰ä»€ä¹ˆé”™è¯¯æˆ–è€…æ›´å¥½çš„è§£å†³æ–¹æ¡ˆåŠå»ºè®®ï¼Œæ¬¢è¿éšæ—¶è”ç³»ã€‚</p></div><div class="links-wrapper"><div class="prev-link"><!----></div><div class="next-link"><!----></div></div><div><footer class="page-edit"><!-- <a v-for="(item,index) in data.platform" :key="index" :href="item.href">
        <img class="imgIcon" :src="item.icon" />
      </a> --></footer><!-- <p class="platform">
      ä»¥ä¸Šçš†ä¸º
      <a href="javascript:;">çºªå¹´</a> æ–‡ç« å‘å¸ƒå¹³å°
    </p> --><p class="platform"><a href="https://beian.miit.gov.cn/" target="_blank">äº¬ICPå¤‡2022027737å·</a><br> Copyright Â© 2022 - present <a href="https://github.com/wang1xiang">@wangxiang</a></p></div><!--[--><!--]--></div><!-- åªæƒ³ç‚¹å‡»èƒŒæ™¯æ‰å…³é—­ è¯·ä½¿ç”¨ .self ä¿®é¥°ç¬¦ --><div style="display:none;" class="imgBox"><img src=""></div><!--]--></main><div class="theme-select" data-v-afcf09d4><ul data-v-afcf09d4><li class="active" data-v-afcf09d4>â˜€ï¸</li><li class="" data-v-afcf09d4>ğŸŒ‘</li></ul></div></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"README.md\":\"2d699cc5\",\"index.md\":\"7f31e3dd\",\"more_docs.md\":\"bdb760b2\",\"more_index.md\":\"4f110fbf\",\"more_tags.md\":\"e8bdf98a\",\"docs_css_grid.md\":\"8a549bc1\",\"docs_css_placeholder.md\":\"a1a76d2b\",\"docs_docker_docker-start.md\":\"61ca7d49\",\"docs_electron_electron-bug.md\":\"499c9567\",\"docs_electron_electron-check-update.md\":\"9f17178b\",\"docs_electron_electron-diaoyan.md\":\"a011e7eb\",\"docs_electron_electron-object-destroyed.md\":\"c104e7b7\",\"docs_electron_electron-open-other.md\":\"040eb4e9\",\"docs_electron_electron-protocol.md\":\"786aa221\",\"docs_electron_electron-sign.md\":\"3f08d644\",\"docs_electron_electron-start.md\":\"1b41ed5b\",\"docs_electron_electron-update.md\":\"4db00266\",\"docs_electron_electron-webview-zoom.md\":\"6dcb1533\",\"docs_electron_hybrid-electron.md\":\"20d70f2d\",\"docs_electron_sentry-electron.md\":\"492336b2\",\"docs_git_git-autocrlf.md\":\"450864d2\",\"docs_git_git-ignorecase.md\":\"f68c692f\",\"docs_git_git-notes.md\":\"374d0a5f\",\"docs_git_git-rebase.md\":\"2303de8d\",\"docs_git_git-username.md\":\"cf7d6e1f\",\"docs_git_gitflow.md\":\"a93f661f\",\"docs_git_gitlab-ci-start.md\":\"bec1f7dc\",\"docs_http_http.md\":\"4da12aa6\",\"docs_javascript_async-await.md\":\"f6f6ceb5\",\"docs_javascript_createEvent.md\":\"5876e478\",\"docs_javascript_html2docs.md\":\"127bc87b\",\"docs_javascript_http-cache.md\":\"52f6bde5\",\"docs_javascript_image-load.md\":\"c7693d17\",\"docs_javascript_indexDB-dexie.md\":\"e2e98400\",\"docs_javascript_javascript-utils.md\":\"e15a0db8\",\"docs_javascript_memory-leak.md\":\"be40742e\",\"docs_javascript_office-preview-type.md\":\"e77c69b8\",\"docs_javascript_page-alive.md\":\"84d12e09\",\"docs_javascript_preload-prefetch.md\":\"14b865ef\",\"docs_javascript_scrollend.md\":\"ec884184\",\"docs_javascript_storage-change.md\":\"c01511e3\",\"docs_javascript_turborepo-start.md\":\"a4d51d00\",\"docs_javascript_webworker.md\":\"2f82c333\",\"docs_javascript_zero-width-space.md\":\"dbce78be\",\"docs_linux_centos-docker.md\":\"6e8baf6b\",\"docs_linux_linux-no-possword.md\":\"90bd4401\",\"docs_mobile_mobileDebugging.md\":\"75ef033f\",\"docs_nest_nest-start.md\":\"2f7aeac2\",\"docs_node_bff.md\":\"21f453c0\",\"docs_node_deploy-server.md\":\"61ee73a5\",\"docs_node_socketIO-start.md\":\"cce9deaa\",\"docs_photography_nd.md\":\"bce33345\",\"docs_pnpm_pnpm-monorepo.md\":\"aeeffb95\",\"docs_prosemirror_html2docs-pdf.md\":\"35c48a89\",\"docs_react_create-react-app.md\":\"b02dc240\",\"docs_react_dompurify.md\":\"1cea6fe1\",\"docs_react_eslint-react.md\":\"1cd4092d\",\"docs_react_react-classnames.md\":\"8f732c0a\",\"docs_react_react-grid-layout.md\":\"85d31bd3\",\"docs_react_react-intl.md\":\"a6eaf693\",\"docs_react_react-philosophies.md\":\"fd3eae81\",\"docs_react_react-query.md\":\"ef1d57bc\",\"docs_react_react-router-change.md\":\"17e5eb71\",\"docs_react_react-vs-vue3.md\":\"bab04271\",\"docs_react_redux-audition.md\":\"1283e370\",\"docs_react_tomcat-404.md\":\"e4cf535e\",\"docs_reactNative_react-native-errors.md\":\"75516503\",\"docs_taro_taro-get-started.md\":\"887ea68f\",\"docs_taro_taro-start.md\":\"eb580097\",\"docs_tiptap_tiptap-tutorial.md\":\"da7babcc\",\"docs_tiptap_tiptap-tutorial2.md\":\"6e8d90b8\",\"docs_tiptap_tiptap-tutorial3.md\":\"437a7693\",\"docs_tiptap_tiptap-tutorial4.md\":\"2394c182\",\"docs_tiptap_tiptap-tutorial5.md\":\"f616b4c7\",\"docs_tiptap_tiptap-tutorial6.md\":\"b6dd8d82\",\"docs_tiptap_tiptap-tutorial7.md\":\"7b87ad60\",\"docs_tiptap_tiptap-tutorial8.md\":\"5cdf5f06\",\"docs_tiptap_tiptap-tutorial9.md\":\"02914b09\",\"docs_tool_2023-summary.md\":\"49d20dae\",\"docs_tool_blog.md\":\"6e80fa98\",\"docs_tool_chatgpt.md\":\"b33e819b\",\"docs_tool_chrome-extension.md\":\"d0a8bfa4\",\"docs_tool_chrome-override.md\":\"431424dd\",\"docs_tool_debugging.md\":\"09cb3e8e\",\"docs_tool_mac.md\":\"c125c314\",\"docs_tool_mock.md\":\"775e2d35\",\"docs_tool_moment-api.md\":\"f7882f5a\",\"docs_tool_mvp.md\":\"1e63a14a\",\"docs_tool_np.md\":\"c6a2925e\",\"docs_tool_prosemirror-tables.md\":\"4ac7a6bf\",\"docs_tool_vitepress-error.md\":\"da84e5a8\",\"docs_tool_vscode-web-error.md\":\"92c26145\",\"docs_tool_whistle.md\":\"b40b8470\",\"docs_tool_yarn-certificate.md\":\"2acbc5ce\",\"docs_vite_componentLibrary.md\":\"2e2c95fa\",\"docs_vite_create-vite.md\":\"4297b429\",\"docs_vite_vite-env.md\":\"2b5cc67e\",\"docs_vite_vite-react-cli.md\":\"086c81f8\",\"docs_vite_vite-react.md\":\"20324083\",\"docs_vite_vite.md\":\"651c4570\",\"docs_vite_vite3.0.md\":\"62ac84c0\",\"docs_vscode_vscode-markdown.md\":\"fb61981b\",\"docs_vscode_vscode-todo.md\":\"080107db\",\"docs_vue_antd-form.md\":\"1a61b1c0\",\"docs_vue_antd-vue.md\":\"9f1c3b9c\",\"docs_vue_axios-token.md\":\"1e6fe98f\",\"docs_vue_history-mode.md\":\"b1dc8001\",\"docs_vue_keepAlive.md\":\"bd809697\",\"docs_vue_tjTodo.md\":\"aa58dab9\",\"docs_vue_vue3-jsx.md\":\"ccdb1a83\",\"docs_vue_vue3-lint-staged.md\":\"dd04dfb4\",\"docs_vue_vue3-unexpected-token.md\":\"015ee6b2\",\"docs_webrtc_getstarted-webrtc.md\":\"18631818\",\"docs_webrtc_livekit-start.md\":\"abd3a98e\",\"docs_webrtc_webrtc-one.md\":\"b26eb52d\",\"docs_wechat_wechat-app.md\":\"e6efda23\",\"docs_work_360-develop.md\":\"4355f4bb\",\"docs_work_click-event.md\":\"b0bf55cc\",\"docs_work_contentEdit-div-insert.md\":\"68eecef6\",\"docs_work_developer.md\":\"b6c37ba6\",\"docs_work_email-font.md\":\"e5bc0fdf\",\"docs_work_excalidraw-use.md\":\"3361ac43\",\"docs_work_excalidraw.md\":\"7bb9bbba\",\"docs_work_font-loading-speed.md\":\"1efa0702\",\"docs_work_h5-app.md\":\"8d105cc7\",\"docs_work_html2canvas-bug.md\":\"0e7e179d\",\"docs_work_i18n.md\":\"131e3b85\",\"docs_work_image-type.md\":\"06f75a42\",\"docs_work_jenkins-start.md\":\"363d79b1\",\"docs_work_malformed.md\":\"5d3a820e\",\"docs_work_mutationObserver.md\":\"1c441422\",\"docs_work_react-ref.md\":\"544f0388\",\"docs_work_richeditor.md\":\"538fdb14\",\"docs_work_sentry-cli-error.md\":\"398fe30e\",\"docs_work_sentry-error.md\":\"ed6f20d8\",\"docs_work_sentry.md\":\"04547cad\",\"docs_work_text-decoration.md\":\"67f07445\",\"docs_work_white-board.md\":\"508f5f66\",\"docs_work_zero-width-spaces.md\":\"71644dd8\"}")</script>
    <script type="module" async src="/blog/_assets/app.1eef6263.js"></script>
  </body>
</html>