---
date: 2025-3-29
title: è·Ÿç€å¡å“¥å­¦ç®—æ³•Day 46ï¼šåŠ¨æ€è§„åˆ’part13
tags:
  - leetcode
describe: åŠ¨æ€è§„åˆ’part13
---

## 647. å›žæ–‡å­ä¸² ðŸŒŸðŸŒŸ

[åŠ›æ‰£é“¾æŽ¥](https://leetcode.cn/problems/palindromic-substrings/description/) ðŸŒŸðŸŒŸ

### é¢˜ç›®æè¿°

ç»™ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä½ çš„ä»»åŠ¡æ˜¯è®¡ç®—è¿™ä¸ªå­—ç¬¦ä¸²ä¸­æœ‰å¤šå°‘ä¸ªå›žæ–‡å­ä¸²ã€‚

å…·æœ‰ä¸åŒå¼€å§‹ä½ç½®æˆ–ç»“æŸä½ç½®çš„å­ä¸²ï¼Œå³ä½¿æ˜¯ç”±ç›¸åŒçš„å­—ç¬¦ç»„æˆï¼Œä¹Ÿä¼šè¢«è§†ä½œä¸åŒçš„å­ä¸²ã€‚

ç¤ºä¾‹ 1ï¼š

- è¾“å…¥ï¼š"abc"
- è¾“å‡ºï¼š3
- è§£é‡Šï¼šä¸‰ä¸ªå›žæ–‡å­ä¸²: "a", "b", "c"

ç¤ºä¾‹ 2ï¼š

- è¾“å…¥ï¼š"aaa"
- è¾“å‡ºï¼š6
- è§£é‡Šï¼š6 ä¸ªå›žæ–‡å­ä¸²: "a", "a", "a", "aa", "aa", "aaa"

æç¤ºï¼šè¾“å…¥çš„å­—ç¬¦ä¸²é•¿åº¦ä¸ä¼šè¶…è¿‡ 1000 ã€‚

### è§£é¢˜æ€è·¯

#### æš´åŠ›è§£æ³•

ä¸¤å±‚ for å¾ªçŽ¯ï¼ŒéåŽ†åŒºé—´èµ·å§‹ä½ç½®å’Œç»ˆæ­¢ä½ç½®ï¼Œç„¶åŽè¿˜éœ€è¦ä¸€å±‚éåŽ†åˆ¤æ–­è¿™ä¸ªåŒºé—´æ˜¯ä¸æ˜¯å›žæ–‡ã€‚æ‰€ä»¥æ—¶é—´å¤æ‚åº¦ï¼šO(n^3)

```js
var countSubstrings = function (s) {
  const isPalindrome = (left, right) => {
    while (left < right) {
      if (s[left] === s[right]) {
        left++
        right--
      } else {
        return false
      }
    }
    return true
  }

  let count = 0
  const n = s.length
  for (let i = 0; i < n; i++) {
    for (let j = i; j < n; j++) {
      if (isPalindrome(i, j)) count++
    }
  }

  return count
}
```

#### åŠ¨è§„è§£æ³•

åŠ¨è§„äº”éƒ¨æ›²ï¼š

1. ç¡®å®š dp æ•°ç»„åŠä¸‹æ ‡çš„å«ä¹‰

   **å­åºåˆ— dp æ•°ç»„çš„å®šä¹‰ä¸€èˆ¬æ˜¯é¢˜ç›®æ±‚ä»€ä¹ˆï¼Œå°±å¦‚ä½•å®šä¹‰ dp æ•°ç»„**

   å¦‚æžœæœ¬é¢˜ dp æ•°ç»„å®šä¹‰ä¸ºï¼šdp[i]è¡¨ç¤ºä¸‹æ ‡ i ç»“å°¾çš„å­—ç¬¦ä¸²æœ‰ dp[i]ä¸ªå›žæ–‡ä¸²ï¼Œæ‰¾ä¸å‡º dp[i]ä¸Ž dp[i - 1]çš„å…³ç³»

   æŸ¥çœ‹å›žæ–‡ä¸²çš„æ€§è´¨

   ![dynamic-programming-code131](./images/dynamic-programming-code131.png)

   å› æ­¤åˆ¤è¯»ä¸€ä¸ªå­å­—ç¬¦ä¸² s[i, j]æ˜¯å¦ä¸ºå›žæ–‡ä¸²ï¼Œä¾èµ–äºŽå­å­—ç¬¦ä¸² s[i+1, j-1]æ˜¯å¦ä¸ºå›žæ–‡ä¸²

   ç”±æ­¤ï¼Œ**dp[i][j]è¡¨ç¤º s[i...j]æ˜¯å¦ä¸ºå›žæ–‡ä¸²**

2. ç¡®å®šé€’æŽ¨å…¬å¼

   - s[i] ä¸ç­‰äºŽ s[j]ï¼Œåˆ™ s[i, j]ä¸å¯èƒ½ä¸ºå›žæ–‡ä¸²ï¼Œdp[i][j] = false
   - s[i] ç­‰äºŽ s[j]æ—¶ï¼Œæœ‰ä»¥ä¸‹ä¸‰ç§æƒ…å†µï¼š
     - i == jï¼Œå•ä¸ªå­—ç¬¦ï¼Œdp[i][j] = true
     - i + 1 == jï¼Œä¸¤ä¸ªç›¸åŒå­—ç¬¦ï¼Œdp[i][j] = true
     - i + 1 < jï¼Œéœ€è¦åˆ¤æ–­ dp[i + 1][j - 1] æ˜¯å¦ä¸ºå›žæ–‡ä¸²

   ```js
   if (s[i] === s[j]) {
     if (i === j || i + 1 === j) {
       dp[i][j] = true
       result++
     } else {
       dp[i][j] = dp[i + 1][j - 1]
       if (dp[i][j]) result++
     }
   }
   ```

3. dp æ•°ç»„åˆå§‹åŒ–

   dp[i][j]å…¨éƒ¨åˆå§‹åŒ–ä¸º false

4. ç¡®å®šéåŽ†é¡ºåº

   dp[i][j]ç”± dp[i+1][j-1]æŽ¨å‡ºï¼Œå› æ­¤éœ€è¦ä»Žä¸‹åˆ°ä¸ŠéåŽ†

5. ä¸¾ä¾‹æŽ¨å¯¼ dp æ•°ç»„

   ä»¥ è¾“å…¥ï¼š"aaa"ï¼Œdp[i][j]æ•°ç»„å¦‚ä¸‹ï¼š

   ```js
   dp = [
     [true, true, true],
     [false, true, true],
     [false, false, true],
   ]
   ```

### ä»£ç 

```js
var countSubstrings = function (s) {
  const n = s.length
  const dp = new Array(n).fill().map(() => new Array(n).fill(false))

  let result = 0
  for (let i = n - 1; i >= 0; i--) {
    for (let j = i; j < n; j++) {
      if (i === j || i + 1 === j) {
        if (i - j <= 1) {
          dp[i][j] = true
          result++
        } else {
          dp[i][j] = dp[i + 1][j - 1]
          if (dp[i][j]) result++
        }
      }
    }
  }
  console.log(dp)
  return result
}
```

## 516.æœ€é•¿å›žæ–‡å­åºåˆ— ðŸŒŸðŸŒŸ

[åŠ›æ‰£é“¾æŽ¥](https://leetcode.cn/problems/longest-palindromic-subsequence/description/) ðŸŒŸðŸŒŸ

### é¢˜ç›®æè¿°

ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸² s ï¼Œæ‰¾åˆ°å…¶ä¸­æœ€é•¿çš„å›žæ–‡å­åºåˆ—ï¼Œå¹¶è¿”å›žè¯¥åºåˆ—çš„é•¿åº¦ã€‚å¯ä»¥å‡è®¾ s çš„æœ€å¤§é•¿åº¦ä¸º 1000 ã€‚

ç¤ºä¾‹ 1: è¾“å…¥: "bbbab" è¾“å‡º: 4 ä¸€ä¸ªå¯èƒ½çš„æœ€é•¿å›žæ–‡å­åºåˆ—ä¸º "bbbb"ã€‚

ç¤ºä¾‹ 2: è¾“å…¥:"cbbd" è¾“å‡º: 2 ä¸€ä¸ªå¯èƒ½çš„æœ€é•¿å›žæ–‡å­åºåˆ—ä¸º "bb"ã€‚

æç¤ºï¼š

- 1 <= s.length <= 1000
- s åªåŒ…å«å°å†™è‹±æ–‡å­—æ¯

### è§£é¢˜æ€è·¯

**å›žæ–‡å­åºåˆ—ä¸éœ€è¦è¿žç»­**

åŠ¨è§„äº”éƒ¨æ›²ï¼š

1. ç¡®å®š dp æ•°ç»„åŠä¸‹æ ‡çš„å«ä¹‰

   dp[i][j]è¡¨ç¤º s[i, j]å†…æœ€é•¿çš„å›žæ–‡å­åºåˆ—é•¿åº¦

2. ç¡®å®šé€’æŽ¨å…¬å¼

   ä¸¤ç§æƒ…å†µï¼š

   - s[i] ç­‰äºŽ s[j]ï¼Œå­åºåˆ—é•¿åº¦+2ï¼Œdp[i][j] = dp[i + 1][j - 1] + 2
   - s[i] ä¸ç­‰äºŽ s[j]ï¼ŒåŒæ—¶åŠ å…¥ s[i]å’Œ s[j]ä¸èƒ½æž„æˆå›žæ–‡å­åºåˆ—ï¼Œå› æ­¤åˆ†åˆ«åŠ å…¥ s[i]å’Œ s[j]çœ‹å“ªä¸ªç»„æˆçš„å›žæ–‡å­åºåˆ—æ›´é•¿ï¼Œdp[i][j] = Math.max(dp[i + 1][j], dp[i][j - 1])

   ```js
   if (s[i] === s[j]) {
     dp[i][j] = dp[i + 1][j - 1] + 2
   } else {
     dp[i][j] = Math.max(dp[i + 1][j], dp[i][j - 1])
   }
   ```

3. dp æ•°ç»„åˆå§‹åŒ–

   - å½“ i===j æ—¶ï¼Œdp[i][j] = 1ï¼šå•ä¸ªå­—ç¬¦çš„å›žæ–‡å­åºåˆ—é•¿åº¦ä¸º 1ï¼Œå¿…é¡»åˆå§‹åŒ–
   - å½“ i!=j æ—¶ï¼Œdp[i][j] = 0ï¼šåˆå§‹åŒ–ä¸º 0ï¼Œè¢«è¦†ç›–

4. ç¡®å®šéåŽ†é¡ºåº

   ä»Žä¸‹åˆ°ä¸Šï¼Œä»Žå·¦åˆ°å³

5. ä¸¾ä¾‹æŽ¨å¯¼ dp æ•°ç»„

   ä»¥ s:"cbbd" ä¸ºä¾‹ï¼Œdp æ•°ç»„å¦‚ä¸‹ï¼š

   ```js
   dp = [
     [
       [1, 1, 2, 2],
       [0, 1, 2, 2],
       [0, 0, 1, 1],
       [0, 0, 0, 1],
     ],
   ]
   ```

### ä»£ç 

```js
var longestPalindromeSubseq = function (s) {
  const n = s.length
  const dp = new Array(n).fill().map(() => new Array(n).fill(0))

  for (let i = 0; i < n; i++) {
    dp[i][i] = 1
  }

  for (let i = n - 1; i >= 0; i--) {
    for (let j = i + 1; j < n; j++) {
      if (s[i] === s[j]) {
        dp[i][j] = dp[i + 1][j - 1] + 2
      } else {
        dp[i][j] = Math.max(dp[i + 1][j], dp[i][j - 1])
      }
    }
  }
  console.log(dp)

  return dp[0][n - 1]
}
```

## æ€»ç»“
