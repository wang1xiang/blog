import{f as n,g as s,J as a}from"./common-03e46d7f.js";const t='{"title":".envæ–‡ä»¶çš„ä½œç”¨æ˜¯ä»€ä¹ˆ","frontmatter":{"date":"2023-04-10","title":".envæ–‡ä»¶çš„ä½œç”¨æ˜¯ä»€ä¹ˆ","tags":["vite"],"describe":null},"headers":[{"level":2,"title":"å‰è¨€","slug":"å‰è¨€"},{"level":2,"title":"å‡†å¤‡å·¥ä½œ","slug":"å‡†å¤‡å·¥ä½œ"},{"level":3,"title":"dotenv","slug":"dotenv"}],"relativePath":"docs/vite/vite-env.md","lastUpdated":1742205571695.041}';var e={};const p=[a('<blockquote><p>æœ¬æ–‡å‚åŠ äº†ç”±<a href="https://lxchuan12.gitee.io/" target="_blank" rel="noopener noreferrer">å…¬ä¼—å·@è‹¥å·è§†é‡</a>å‘èµ·çš„æ¯å‘¨æºç å…±è¯»æ´»åŠ¨ï¼Œ<a href="https://juejin.cn/post/7079706017579139102" target="_blank" rel="noopener noreferrer">ç‚¹å‡»äº†è§£è¯¦æƒ…ä¸€èµ·å‚ä¸</a>ã€‚ è¿™æ˜¯æºç å…±è¯»çš„ç¬¬ 40 æœŸï¼Œé“¾æ¥ï¼š<a href="https://juejin.cn/post/7174045668187570206" target="_blank" rel="noopener noreferrer">vite æ˜¯å¦‚ä½•è§£æç”¨æˆ·é…ç½®çš„ .env çš„</a>ã€‚</p></blockquote><h2 id="å‰è¨€"><a class="header-anchor" href="#å‰è¨€" aria-hidden="true">#</a> å‰è¨€</h2><p>çœ‹ä¸‹ä½ çš„é¡¹ç›®ä¸‹æ˜¯å¦</p><p><img src="/blog/_assets/create-react-app-env.863fbffd.png" alt="create-react-app-env.png"></p><p><img src="/blog/_assets/vue-cli-env.11b0f85e.png" alt="vue-cli-env.png"></p><p>ä½ ä¼šå¾ˆå¼€å¿ƒçš„å°†éœ€è¦çš„å˜é‡æ·»åŠ åˆ°è¿™é‡Œï¼Œç„¶åé€šè¿‡ <a href="http://process.env.XXX" target="_blank" rel="noopener noreferrer">process.env.XXX</a> æ¥ä½¿ç”¨å®ƒã€‚ ä½†æ˜¯ä½ çŸ¥é“å®ƒä»¬æ˜¯æ€ä¹ˆè¢«å…³è”åˆ° process.env åˆ°é¡¹ç›®ä¸­çš„å—ï¼Ÿä¸‹é¢æˆ‘ä»¬æ¥ä¸€èµ·æ­ç§˜ä¸€ä¸‹</p><h2 id="å‡†å¤‡å·¥ä½œ"><a class="header-anchor" href="#å‡†å¤‡å·¥ä½œ" aria-hidden="true">#</a> å‡†å¤‡å·¥ä½œ</h2><p>é¦–å…ˆéœ€è¦äº†è§£ä¸‹ dotenvï¼ŒåŠŸåŠ³éƒ½æ˜¯å®ƒçš„ ğŸ˜ã€‚</p><h3 id="dotenv"><a class="header-anchor" href="#dotenv" aria-hidden="true">#</a> dotenv</h3><p><a href="https://github.com/motdotla/dotenv" target="_blank" rel="noopener noreferrer">dotenv æ˜¯ä»€ä¹ˆ</a>ï¼šDotenv æ˜¯ä¸€ä¸ªé›¶ä¾èµ–æ¨¡å—ï¼Œå®ƒå°†ç¯å¢ƒå˜é‡ä» .env æ–‡ä»¶åŠ è½½åˆ° process.env ä¸­ã€‚</p><p>æˆ‘ä»¬å¯ä»¥åˆå§‹åŒ–ä¸€ä¸ª npm é¡¹ç›®ï¼ŒæŒ‰ç…§<a href="https://github.com/motdotla/dotenv#-install" target="_blank" rel="noopener noreferrer">æ­¥éª¤</a>ä½¿ç”¨ dotenv æ¥åˆ›å»ºä¸€ä¸ª demoã€‚</p><ul><li><p>åˆå§‹åŒ–</p><div class="language-bash"><pre><code><span class="token function">mkdir</span> dotenv-test\n<span class="token comment"># åˆå§‹åŒ–npmé¡¹ç›®</span>\n<span class="token function">pnpm</span> init <span class="token operator">&amp;</span> <span class="token function">pnpm</span> i dotenv\n<span class="token comment"># åˆ›å»º.envæ–‡ä»¶å’Œindex.tsæ–‡ä»¶</span>\n<span class="token function">touch</span> .evn <span class="token operator">&amp;</span> <span class="token function">touch</span> index.ts\n</code></pre></div></li><li><p>åœ¨.env ä¸­æ·»åŠ å˜é‡</p><div class="language-bash"><pre><code><span class="token comment"># æµ‹è¯•å˜é‡</span>\n<span class="token assign-left variable">APP_NAME</span><span class="token operator">=</span><span class="token string">&quot;dotenv-test&quot;</span>\n<span class="token assign-left variable">APP_PKG_MANAGER</span><span class="token operator">=</span><span class="token string">&quot;pnpm&quot;</span>\n\n<span class="token comment"># æµ‹è¯•å¤šè¡Œå˜é‡</span>\n<span class="token assign-left variable">PRIVATE_KEY</span><span class="token operator">=</span><span class="token string">&quot;-----BEGIN RSA PRIVATE KEY-----\n...\nKh9NV...\n...\n-----END RSA PRIVATE KEY-----&quot;</span>\n\n<span class="token comment"># ä¹Ÿå¯ä»¥ä½¿ç”¨\\næ¢è¡Œç¬¦ä¸€è¡Œè¾“å…¥</span>\n<span class="token assign-left variable">PRIVATE_KEY_CHARACTER</span><span class="token operator">=</span><span class="token string">&quot;-----BEGIN RSA PRIVATE KEY-----<span class="token entity" title="\\n">\\n</span>...<span class="token entity" title="\\n">\\n</span>Kh9NV...<span class="token entity" title="\\n">\\n</span>...<span class="token entity" title="\\n">\\n</span>-----END RSA PRIVATE KEY-----&quot;</span>\n</code></pre></div></li><li><p>index.ts ä¸­è¾“å‡ºæµ‹è¯•</p><div class="language-js"><pre><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> dotenv <span class="token keyword">from</span> <span class="token string">&#39;dotenv&#39;</span>\ndotenv<span class="token punctuation">.</span><span class="token function">config</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Current project name is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">APP_NAME</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">The package manager used is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">APP_PKG_MANAGER</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>\n\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;å¤šè¡Œè¾“å‡ºï¼š&#39;</span><span class="token punctuation">)</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">PRIVATE_KEY</span><span class="token punctuation">)</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;ä½¿ç”¨\\\\nå­—ç¬¦å¤šè¡Œè¾“å‡ºï¼š&#39;</span><span class="token punctuation">)</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">PRIVATE_KEY_CHARACTER</span><span class="token punctuation">)</span>\n</code></pre></div><p>æ‰§è¡Œ<code>npx esno index.ts</code>ï¼Œå¯ä»¥çœ‹åˆ°è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š <img src="/blog/_assets/dotenv-demo1.f7f62833.png" alt="dotenv-demo1.png"></p><blockquote><p>dotenv.config() ä¼šè‡ªåŠ¨è¯»å–å½“å‰è·¯å¾„ä¸‹.env æ–‡ä»¶ï¼Œè§£æå†…å®¹ï¼Œå°†å…¶åˆ†é…ç»™ process.envï¼Œå¹¶è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å¯¹è±¡å¸¦æœ‰åŒ…å«åŠ è½½å†…å®¹çš„å·²è§£æé”®ï¼Œå¦‚æœå¤±è´¥åˆ™è¿”å›é”™è¯¯é”®ã€‚åŒæ—¶åŒ…å«<a href="https://github.com/motdotla/dotenv#options" target="_blank" rel="noopener noreferrer">ä¸€äº›é…ç½®</a>å¯ä»¥è‡ªå®šä¹‰é…ç½®ã€‚</p></blockquote></li></ul><p>å¦‚æœéœ€è¦ä½¿ç”¨å˜é‡æ—¶ï¼Œå°±éœ€è¦<a href="https://github.com/motdotla/dotenv-expand" target="_blank" rel="noopener noreferrer">dotenv-expand</a>çš„å¸®åŠ©ã€‚</p><p>æˆ‘ä»¬å·²ç»äº†è§£äº† dotenv çš„ä½¿ç”¨æ–¹å¼ï¼Œæˆ‘ä»¬é€šè¿‡è¯»æºç çš„æ–¹å¼æ¥æ­ç§˜ä¸€ä¸‹å®ƒçš„å®ç°åŸç†ã€‚</p><div class="language-bash"><pre><code><span class="token comment"># ç›´æ¥å…‹éš†å·å“¥çš„é¡¹ç›®</span>\n<span class="token function">git</span> clone https://github.com/lxchuan12/dotenv-analysis.git\n<span class="token builtin class-name">cd</span> dotenv-analysis/dotenv <span class="token operator">&amp;&amp;</span> <span class="token function">yarn</span> i\n<span class="token comment"># VSCode ç›´æ¥æ‰“å¼€å½“å‰é¡¹ç›®</span>\ncode <span class="token builtin class-name">.</span>\n<span class="token comment"># æˆ‘å†™çš„ä¾‹å­éƒ½åœ¨ examples è¿™ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œå¯ä»¥å¯åŠ¨æœåŠ¡æœ¬åœ°æŸ¥çœ‹è°ƒè¯•</span>\n<span class="token comment"># åœ¨ dotenv-analysis ç›®å½•ä¸‹</span>\n<span class="token function">node</span> examples/index.js\n</code></pre></div>',15)];e.render=function(a,t,e,o,c,l){return n(),s("div",null,p)};export{t as __pageData,e as default};
