<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>
      Dartè¯­è¨€åŠFlutteré¡¹ç›® | å­¦ä¹ ç¬”è®°
    </title>
    <meta name="description" content="A VitePress site">
    <link rel="stylesheet" href="/blog/_assets/style.85766dd9.css">
    <link rel="modulepreload" href="/blog/_assets/common-03e46d7f.js">
    <link rel="modulepreload" href="/blog/_assets/docs_flutter_flutter-dart.md.ead1e433.lean.js">
    <link rel="modulepreload" href="/blog/_assets/app.92810c57.js">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
    <meta name="keywords" content="ç¿”å­Blog">
    <link rel="icon" href="/blog/favicon.ico">
    <link rel="stylesheet" href="https://lib.baomitu.com/gitalk/1.7.0/gitalk.min.css">
    <script src="https://lib.baomitu.com/gitalk/1.7.0/gitalk.min.js"></script>
    <script src="https://lib.baomitu.com/axios/0.21.1/axios.js"></script>
    
  </head>
  <body>
    <div id="app"><!--[--><div id="containerColor" class="no-sidebar theme" data-v-afcf09d4><header class="navbar" data-v-afcf09d4><!--[--><a class="title" aria-label="å­¦ä¹ ç¬”è®°, back to home" href="/blog/"><img class="logo" src="/blog/favicon.ico" alt="logo"><span>å­¦ä¹ ç¬”è®°</span></a><div class="flex-grow"></div><nav class="nav-links hide-mobile"><!--[--><!--[--><div class="nav-item"><a class="nav-link" href="/blog/index.html" target="" rel="">ğŸ  é¦–é¡µ <!----></a></div><!--]--><!--[--><div class="nav-item"><a class="nav-link" href="/blog/more/docs.html" target="" rel="">ğŸ“… å½’æ¡£ <!----></a></div><!--]--><!--[--><div class="nav-item"><a class="nav-link" href="/blog/more/tags.html" target="" rel="">ğŸ“‚ åˆ†ç±» <!----></a></div><!--]--><!--]--><div id="docsearch"></div><!----><!----></nav><!--[--><!--]--><!--]--><div class="sidebar-button" data-v-afcf09d4><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div></header><aside class="" data-v-afcf09d4><!--[--><nav class="nav-links show-mobile"><!--[--><!--[--><div class="nav-item"><a class="nav-link" href="/blog/index.html" target="" rel="">ğŸ  é¦–é¡µ <!----></a></div><!--]--><!--[--><div class="nav-item"><a class="nav-link" href="/blog/more/docs.html" target="" rel="">ğŸ“… å½’æ¡£ <!----></a></div><!--]--><!--[--><div class="nav-item"><a class="nav-link" href="/blog/more/tags.html" target="" rel="">ğŸ“‚ åˆ†ç±» <!----></a></div><!--]--><!--]--><div id="docsearch"></div><!----><!----></nav><!--[--><!--]--><ul class="sidebar"><!--[--><!--]--></ul><!--[--><!--]--><!--]--></aside><!----><!-- TODO: make this button accessible --><div class="sidebar-mask" data-v-afcf09d4></div><main data-v-afcf09d4><!--[--><div class="content"><!--[--><!--]--><div class="md-header"><div class="md-title">Dartè¯­è¨€åŠFlutteré¡¹ç›®</div><span id="jinrishici-sentence">æ­£åœ¨åŠ è½½ä»Šæ—¥è¯—è¯....</span><div class="md-date">2024-05-02</div></div><ul class="catalog"><!--[--><li class="catalog-item"><a class="level level-2" href="#dart-è¯­è¨€">Dart è¯­è¨€</a><!----></li><li class="catalog-item"><!----><a class="level level-3" href="#å˜é‡å£°æ˜">å˜é‡å£°æ˜</a></li><li class="catalog-item"><!----><a class="level level-3" href="#å‡½æ•°">å‡½æ•°</a></li><li class="catalog-item"><!----><a class="level level-3" href="#mixin">mixin</a></li><li class="catalog-item"><!----><a class="level level-3" href="#å¼‚æ­¥æ”¯æŒ">å¼‚æ­¥æ”¯æŒ</a></li><li class="catalog-item"><a class="level level-2" href="#ç¬¬ä¸€ä¸ª-flutter-åº”ç”¨">ç¬¬ä¸€ä¸ª flutter åº”ç”¨</a><!----></li><li class="catalog-item"><!----><a class="level level-3" href="#ä»£ç åˆ†æ">ä»£ç åˆ†æ</a></li><li class="catalog-item"><!----><a class="level level-3" href="#widget">Widget</a></li><li class="catalog-item"><!----><a class="level level-3" href="#state">State</a></li><li class="catalog-item"><!----><a class="level level-3" href="#åœ¨-widget-æ ‘ä¸­è·å–-state-å¯¹è±¡">åœ¨ Widget æ ‘ä¸­è·å– State å¯¹è±¡</a></li><li class="catalog-item"><!----><a class="level level-3" href="#é€šè¿‡-renderobject-è‡ªå®šä¹‰-widget">é€šè¿‡ RenderObject è‡ªå®šä¹‰ Widget</a></li><li class="catalog-item"><!----><a class="level level-3" href="#flutter-sdk-å†…ç½®ç»„ä»¶åº“ä»‹ç»">Flutter SDK å†…ç½®ç»„ä»¶åº“ä»‹ç»</a></li><!--]--></ul><div><p>Flutter å¼€å‘ä½¿ç”¨çš„ Dart è¯­è¨€ï¼Œæ‰€ä»¥å­¦ä¹  Dart æ˜¯ Flutter å¼€å‘çš„å¿…è¦å‰æã€‚</p><h2 id="dart-è¯­è¨€"><a class="header-anchor" href="#dart-è¯­è¨€" aria-hidden="true">#</a> Dart è¯­è¨€</h2><p>Dart è¯­è¨€åœ¨è®¾è®¡ä¸ŠåŒæ—¶å€Ÿé‰´ Java å’Œ JavaScript è¯­è¨€ï¼ŒåŒæ—¶å¼•å…¥ä¸€äº›ç°ä»£ç¼–ç¨‹è¯­è¨€çš„ç‰¹æ€§ï¼Œä¾‹å¦‚ç©ºå®‰å…¨ï¼Œé™¤æ­¤ä¹‹å¤–è¿˜æœ‰ä¸€äº›ç‹¬åˆ›çš„è¯­æ³•ï¼Œæ¯”å¦‚çº§è”æ“ä½œç¬¦ã€‚</p><p>ç‰¹ç‚¹ï¼š<strong>å¼ºç±»å‹è¯­è¨€</strong>ï¼Œ<strong>é™æ€è¯­æ³•æ–¹é¢ç±»ä¼¼ Java</strong>ï¼Œå¦‚ç±»æ–°å®šä¹‰ã€å‡½æ•°å®šä¹‰å’Œæ³›å‹ç­‰ï¼Œ<strong>åŠ¨æ€ç‰¹æ€§æ–¹é¢ç±»ä¼¼ JavaScript</strong>ï¼Œå¦‚å‡½æ•°å¼ç‰¹æ€§ã€å¼‚æ­¥æ”¯æŒç­‰ã€‚</p><p>Flutter çš„åŸºæœ¬æ•°æ®ç±»å‹å¦‚ä¸‹ï¼š</p><ul><li>Numbersï¼ˆæ•°å€¼ï¼‰â†’ intã€double</li><li>Booleansï¼ˆå¸ƒå°”ï¼‰â†’ boolï¼Œåªæœ‰ä¸¤ä¸ªå€¼ true æˆ– false</li><li>Stringsï¼ˆå­—ç¬¦ä¸²ï¼‰â†’ Stringã€Runes(UTF-32 ç¼–ç çš„å­—ç¬¦ä¸²ï¼Œå¯ä»¥é€šè¿‡æ–‡å­—è½¬æ¢æˆè¡¨æƒ…æˆ–ä»£è¡¨ç‰¹å®šæ–‡å­—)ï¼Œå¯ä»¥ç”¨å•å¼•å·(&#39;)æˆ–åŒå¼•å·(&quot;)æ¥åŒ…è£¹å­—ç¬¦ä¸²</li><li>Listsï¼ˆåˆ—è¡¨ï¼‰â†’ Dart ä¸­çš„æ•°ç»„ç­‰äºåˆ—è¡¨ï¼Œvar list = [] å’Œ List list = new List() å¯ä»¥ç®€å•çœ‹åšä¸€æ ·</li><li>Setsï¼ˆé›†ï¼‰â†’ æ— åºï¼Œå…ƒç´ å”¯ä¸€çš„é›†åˆ</li><li>Mapsï¼ˆå­—å…¸ï¼‰â†’ é”®å€¼å¯¹çš„å½¢å¼è¡¨ç¤ºä¸€ç»„å€¼</li></ul><h3 id="å˜é‡å£°æ˜"><a class="header-anchor" href="#å˜é‡å£°æ˜" aria-hidden="true">#</a> å˜é‡å£°æ˜</h3><ol><li><p><code>var</code> å…³é”®å­—</p><p>ç±»ä¼¼äº js ä¸­çš„ <code>var</code>ï¼Œä½†æ˜¯ä¸€æ—¦å®šä¹‰ï¼Œå°±ä¸èƒ½æ”¹å˜ç±»å‹</p></li><li><p><code>dynamic</code> å’Œ <code>Object</code></p><p>Dart ä¸­æ‰€æœ‰ç±»å‹éƒ½æ˜¯ <code>Object</code> çš„å­ç±»å‹ï¼Œå£°æ˜çš„å˜é‡å¯ä»¥ä»»æ„èµ‹å€¼ã€æ”¹å˜ç±»å‹ï¼Œæ²¡æœ‰ <code>var</code> çš„æŸç¼š</p><div class="language-dart"><pre><code><span class="token keyword">dynamic</span> t<span class="token punctuation">;</span>
<span class="token class-name">Object</span> x<span class="token punctuation">;</span>
t <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;hi world&quot;</span></span><span class="token punctuation">;</span>
x <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&#39;Hello Object&#39;</span></span><span class="token punctuation">;</span>
<span class="token comment">//ä¸‹é¢ä»£ç æ²¡æœ‰é—®é¢˜</span>
t <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">;</span>
x <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">;</span>
</code></pre></div></li><li><p><code>final</code> å’Œ <code>const</code></p><p>å®šä¹‰å¸¸é‡ï¼ŒåŒºåˆ«æ˜¯ï¼šconst å¿…é¡»åˆå§‹åŒ–ï¼Œfinal å˜é‡æ˜¯åœ¨ç¬¬ä¸€æ¬¡ä½¿ç”¨æ—¶æ‰åˆå§‹åŒ–çš„ã€‚è¿™æ„å‘³ç€åœ¨å£°æ˜æ—¶å¯ä»¥ä¸èµ‹å€¼ï¼Œåªè¦åœ¨ä½¿ç”¨å‰èµ‹å€¼å³å¯</p><div class="language-dart"><pre><code><span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">const</span> now <span class="token operator">=</span> <span class="token class-name">DateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token function">print</span><span class="token punctuation">(</span>now<span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token comment">// åœ¨å‡½æ•°ä¸­å®šä¹‰finalå˜é‡</span>
   <span class="token keyword">final</span> int x<span class="token punctuation">;</span>
   x <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token comment">// ç¬¬ä¸€æ¬¡èµ‹å€¼ï¼Œå¯ä»¥æˆåŠŸ</span>
   <span class="token comment">// x = 20; // å†æ¬¡èµ‹å€¼ä¼šæŠ¥é”™</span>
 <span class="token punctuation">}</span>
</code></pre></div></li><li><p>ç©ºå®‰å…¨ï¼ˆnull-safetyï¼‰</p><p>ä¸»è¦æ˜¯é¿å…ç”±äº null å€¼å¯¼è‡´çš„è¿è¡Œæ—¶é”™è¯¯ï¼Œåœ¨å®šä¹‰å˜é‡æ—¶é€šè¿‡ <code>?</code> å¯å®šä¹‰<strong>å¯å˜ç±»å‹</strong>ï¼ˆè¡¨ç¤ºç±»å‹æ˜¯å¯ç©ºçš„ï¼ˆnullableï¼‰ï¼Œå³å¯ä»¥ä¸º nullã€‚</p><div class="language-dart"><pre><code>int<span class="token operator">?</span> nullableInt<span class="token punctuation">;</span>
nullableInt <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// è¿™æ˜¯å…è®¸çš„</span>
</code></pre></div><p>å¯å˜ç±»å‹ä½¿ç”¨å‰éœ€è¦åˆ¤æ–­æ˜¯å¦ä¸ºç©ºï¼Œå¦‚æœä¸€ä¸ªå˜é‡æˆ‘ä»¬å®šä¹‰ä¸ºå¯ç©ºç±»å‹ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹å³ä½¿æˆ‘ä»¬ç»™å®ƒèµ‹å€¼è¿‡äº†ï¼Œä½†æ˜¯é¢„å¤„ç†å™¨ä»ç„¶æœ‰å¯èƒ½è¯†åˆ«ä¸å‡ºï¼Œè¿™æ—¶æˆ‘ä»¬å°±è¦æ˜¾å¼ï¼ˆé€šè¿‡åœ¨å˜é‡åé¢åŠ ä¸€ä¸ªâ€!â€œç¬¦å·ï¼‰å‘Šè¯‰é¢„å¤„ç†å™¨å®ƒå·²ç»ä¸æ˜¯ null äº†ï¼Œæ¯”å¦‚ï¼š</p><div class="language-dart"><pre><code><span class="token keyword">class</span> <span class="token class-name">Test</span><span class="token punctuation">{</span>
   int<span class="token operator">?</span> i<span class="token punctuation">;</span>
   <span class="token class-name">Function</span><span class="token operator">?</span> fun<span class="token punctuation">;</span>
   <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
     <span class="token keyword">if</span><span class="token punctuation">(</span>i<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token function">print</span><span class="token punctuation">(</span>i<span class="token operator">!</span> <span class="token operator">*</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//å› ä¸ºå·²ç»åˆ¤è¿‡ç©ºï¼Œæ‰€ä»¥èƒ½èµ°åˆ°è¿™ i å¿…ä¸ä¸ºnullï¼Œå¦‚æœæ²¡æœ‰æ˜¾å¼ç”³æ˜ï¼Œåˆ™ IDE ä¼šæŠ¥é”™</span>
     <span class="token punctuation">}</span>
     <span class="token keyword">if</span><span class="token punctuation">(</span>fun<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
       fun<span class="token operator">!</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// åŒä¸Š</span>
     <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
</code></pre></div></li></ol><h3 id="å‡½æ•°"><a class="header-anchor" href="#å‡½æ•°" aria-hidden="true">#</a> å‡½æ•°</h3><p>Dart æ˜¯çœŸæ­£çš„é¢å‘å¯¹è±¡ç¼–ç¨‹è¯­è¨€ï¼Œå‡½æ•°ä¹Ÿæ˜¯å¯¹è±¡</p><ol><li><p>å‡½æ•°å£°æ˜</p><p>Dart å‡½æ•°å£°æ˜å¦‚æœæ²¡æœ‰æ˜¾å¼å£°æ˜è¿”å›å€¼ç±»å‹æ—¶ä¼šé»˜è®¤å½“åš dynamic å¤„ç†</p><div class="language-dart"><pre><code><span class="token comment">// æ˜¾ç¤ºå£°æ˜è¿”å›å€¼ç±»å‹</span>
bool <span class="token function">isNoble</span><span class="token punctuation">(</span>int atomicNumber<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> _nobleGases<span class="token punctuation">[</span>atomicNumber<span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// æœªå£°æ˜è¿”å›å€¼ç±»å‹ å½“ä½œdynamicå¤„ç†</span>
<span class="token function">isNoble</span><span class="token punctuation">(</span>int atomicNumber<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> _nobleGases<span class="token punctuation">[</span>atomicNumber<span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li><li><p>å¯é€‰å‚æ•°</p><p>åŒ…è£…ä¸€ç»„å‡½æ•°å‚æ•°ï¼Œç”¨[]æ ‡è®°ä¸ºå¯é€‰çš„ä½ç½®å‚æ•°ï¼Œå¹¶æ”¾åœ¨å‚æ•°åˆ—è¡¨çš„æœ€åé¢</p><div class="language-dart"><pre><code> <span class="token class-name">String</span> <span class="token function">say</span><span class="token punctuation">(</span><span class="token class-name">String</span> from<span class="token punctuation">,</span> <span class="token class-name">String</span> msg<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token class-name">String</span><span class="token operator">?</span> device<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&#39;</span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">from</span></span><span class="token string"> says </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">msg</span></span><span class="token string">&#39;</span></span><span class="token punctuation">;</span>
   <span class="token keyword">if</span> <span class="token punctuation">(</span>device <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     result <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&#39;</span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">result</span></span><span class="token string"> with a </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">device</span></span><span class="token string">&#39;</span></span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   <span class="token keyword">return</span> result<span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
</code></pre></div></li><li><p>å‡½æ•°ä½œä¸ºå˜é‡</p><p>ç±»ä¼¼ js ä¸­çš„å£°æ˜å¼å‡½æ•°</p><div class="language-dart"><pre><code><span class="token keyword">var</span> say <span class="token operator">=</span> <span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token function">print</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">say</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;hi world&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li><li><p>å‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’</p><p>å¯ä»¥å°†å‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’ç»™å¦ä¸€ä¸ªå‡½æ•°</p><div class="language-dart"><pre><code><span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>   <span class="token keyword">void</span> <span class="token function">printMessage</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">print</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">executeFunction</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token class-name">Function</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> func<span class="token punctuation">,</span> <span class="token class-name">String</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">func</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">executeFunction</span><span class="token punctuation">(</span>printMessage<span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&#39;Hello, Dart!&#39;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è¾“å‡º: Hello, Dart!</span>
</code></pre></div></li></ol><h3 id="mixin"><a class="header-anchor" href="#mixin" aria-hidden="true">#</a> mixin</h3><p>Dart ä¸æ”¯æŒå¤šç»§æ‰¿ï¼Œä½†æ”¯æŒ mixinï¼Œæ˜¯ä¸€ç§å¤ç”¨ç±»ä»£ç çš„æ–¹å¼</p><div class="language-dart"><pre><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&#39;say&#39;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">mixin</span> <span class="token class-name">Eat</span> <span class="token punctuation">{</span>
  <span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&#39;eat&#39;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">mixin</span> <span class="token class-name">Walk</span> <span class="token punctuation">{</span>
  <span class="token function">walk</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&#39;walk&#39;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">mixin</span> <span class="token class-name">Code</span> <span class="token punctuation">{</span>
  <span class="token function">code</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&#39;key&#39;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token keyword">with</span> <span class="token class-name">Eat</span><span class="token punctuation">,</span> <span class="token class-name">Walk</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Man</span> <span class="token keyword">extends</span> <span class="token class-name">Person</span> <span class="token keyword">with</span> <span class="token class-name">Eat</span><span class="token punctuation">,</span> <span class="token class-name">Walk</span><span class="token punctuation">,</span> <span class="token class-name">Code</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre></div><p>ç‰¹ç‚¹ï¼š</p><ol><li>ä¸èƒ½æœ‰æ„é€ å‡½æ•°ï¼šMixin ä¸èƒ½åŒ…å«æ„é€ å‡½æ•°ã€‚</li><li>é€‚ç”¨åœºæ™¯ï¼šMixin é€‚ç”¨äºåœ¨å¤šä¸ªä¸ç›¸å…³çš„ç±»ä¸­å¤ç”¨ä»£ç ã€‚</li><li>å†²çªè§£å†³ï¼šå¦‚æœå¤šä¸ª Mixin ä¸­æœ‰åŒåçš„æ–¹æ³•ï¼Œæœ€åä¸€ä¸ª Mixin çš„æ–¹æ³•ä¼šè¦†ç›–å‰é¢çš„ã€‚</li></ol><h3 id="å¼‚æ­¥æ”¯æŒ"><a class="header-anchor" href="#å¼‚æ­¥æ”¯æŒ" aria-hidden="true">#</a> å¼‚æ­¥æ”¯æŒ</h3><p>Dart ç±»åº“æœ‰å¾ˆå¤šè¿”å› <code>Future</code> å’Œ <code>Stream</code> å¯¹è±¡çš„å‡½æ•°ï¼Œè¿™äº›å‡½æ•°ç§°ä¸ºå¼‚æ­¥å‡½æ•°ï¼Œåœ¨ dart ä¸­åŒæ ·ä½¿ç”¨ <code>async</code> å’Œ <code>await</code> æ¥å®ç°</p><h4 id="future"><a class="header-anchor" href="#future" aria-hidden="true">#</a> Future</h4><p>ç±»ä¼¼äº js ä¸­çš„ Promiseï¼Œç”¨äºå¤„ç†å¼‚æ­¥æ“ä½œ</p><ul><li><code>Future.delayed</code>åˆ›å»ºå¼‚æ­¥ä»»åŠ¡</li><li><code>.then</code>æ¥å—æˆåŠŸç»“æœ</li><li><code>.catchError</code>æ•è·é”™è¯¯</li><li><code>.whenComplete</code>æˆåŠŸ/å¤±è´¥éƒ½ä¼šè°ƒç”¨ï¼Œç±»ä¼¼äº Promise çš„ finally</li><li><code>Future.wait</code>ç›¸å½“äº Promise.allï¼Œæ”¯æŒå¤šä¸ªå¼‚æ­¥ä»»åŠ¡åŒæ—¶æ‰§è¡Œ</li></ul><div class="language-dart"><pre><code><span class="token comment">// å»¶è¿Ÿ2ç§’åè¿”å›ç»“æœ</span>
<span class="token class-name">Future</span><span class="token punctuation">.</span><span class="token function">delayed</span><span class="token punctuation">(</span><span class="token class-name">Duration</span><span class="token punctuation">(</span>seconds<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
   <span class="token keyword">return</span> <span class="token string-literal"><span class="token string">&quot;hi world!&quot;</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">{</span>
   <span class="token function">print</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// æŠ›å‡ºå¼‚å¸¸</span>
<span class="token class-name">Future</span><span class="token punctuation">.</span><span class="token function">delayed</span><span class="token punctuation">(</span><span class="token class-name">Duration</span><span class="token punctuation">(</span>seconds<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
   <span class="token comment">//return &quot;hi world!&quot;;</span>
   <span class="token keyword">throw</span> <span class="token class-name">AssertionError</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Error&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">{</span>
   <span class="token comment">//æ‰§è¡ŒæˆåŠŸä¼šèµ°åˆ°è¿™é‡Œ</span>
   <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;success&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catchError</span><span class="token punctuation">(</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">{</span>
   <span class="token comment">//æ‰§è¡Œå¤±è´¥ä¼šèµ°åˆ°è¿™é‡Œ</span>
   <span class="token function">print</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">whenComplete</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
   <span class="token comment">//æ— è®ºæˆåŠŸæˆ–å¤±è´¥éƒ½ä¼šèµ°åˆ°è¿™é‡Œ</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// æ‰§è¡Œå¤šä¸ªå¼‚æ­¥</span>
<span class="token class-name">Future</span><span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token comment">// 2ç§’åè¿”å›ç»“æœ</span>
  <span class="token class-name">Future</span><span class="token punctuation">.</span><span class="token function">delayed</span><span class="token punctuation">(</span><span class="token class-name">Duration</span><span class="token punctuation">(</span>seconds<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string-literal"><span class="token string">&quot;hello&quot;</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token comment">// 4ç§’åè¿”å›ç»“æœ</span>
  <span class="token class-name">Future</span><span class="token punctuation">.</span><span class="token function">delayed</span><span class="token punctuation">(</span><span class="token class-name">Duration</span><span class="token punctuation">(</span>seconds<span class="token punctuation">:</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string-literal"><span class="token string">&quot; world&quot;</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>results<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token function">print</span><span class="token punctuation">(</span>results<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">+</span>results<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catchError</span><span class="token punctuation">(</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token function">print</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="async-await"><a class="header-anchor" href="#async-await" aria-hidden="true">#</a> async/await</h4><p>Dart ä¸­çš„ async/await å’Œ JavaScript ä¸­çš„ async/await åŠŸèƒ½æ˜¯ä¸€æ ·çš„ï¼Œç”¨æ¥å¤„ç† Future çš„å›è°ƒåœ°ç‹±é—®é¢˜</p><h4 id="stream"><a class="header-anchor" href="#stream" aria-hidden="true">#</a> Stream</h4><p>Stream ä¹Ÿæ˜¯ç”¨äºæ¥å—å¼‚æ­¥äº‹ä»¶æ•°æ®ï¼Œä¸ Future ä¸åŒçš„æ˜¯ï¼Œå®ƒå¯ä»¥åŒæ—¶æ¥å—å¤šä¸ªå¼‚æ­¥ç»“æœã€‚Stream å¸¸ç”¨äºä¼šå¤šæ¬¡è¯»å–æ•°æ®çš„å¼‚æ­¥ä»»åŠ¡åœºæ™¯ï¼Œå¦‚ç½‘ç»œå†…å®¹ä¸‹è½½ã€æ–‡ä»¶è¯»å†™ç­‰</p><div class="language-js"><pre><code>Stream<span class="token punctuation">.</span><span class="token function">fromFutures</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token comment">// 1ç§’åè¿”å›ç»“æœ</span>
  Future<span class="token punctuation">.</span><span class="token function">delayed</span><span class="token punctuation">(</span><span class="token function">Duration</span><span class="token punctuation">(</span>seconds<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&quot;hello 1&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token comment">// æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸</span>
  Future<span class="token punctuation">.</span><span class="token function">delayed</span><span class="token punctuation">(</span><span class="token function">Duration</span><span class="token punctuation">(</span>seconds<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token function">AssertionError</span><span class="token punctuation">(</span><span class="token string">&quot;Error&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token comment">// 3ç§’åè¿”å›ç»“æœ</span>
  Future<span class="token punctuation">.</span><span class="token function">delayed</span><span class="token punctuation">(</span><span class="token function">Duration</span><span class="token punctuation">(</span>seconds<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&quot;hello 3&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">{</span>
   <span class="token function">print</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token literal-property property">onError</span><span class="token operator">:</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">{</span>
   <span class="token function">print</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token literal-property property">onDone</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="ç¬¬ä¸€ä¸ª-flutter-åº”ç”¨"><a class="header-anchor" href="#ç¬¬ä¸€ä¸ª-flutter-åº”ç”¨" aria-hidden="true">#</a> ç¬¬ä¸€ä¸ª flutter åº”ç”¨</h2><p>é€šè¿‡ flutter ç›®å½•ç»“æ„çŸ¥é“ lib/main.dart æ˜¯ flutter åº”ç”¨çš„å…¥å£æ–‡ä»¶ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹ä¹‹å‰è®¡æ•°å™¨åº”ç”¨çš„ä»£ç ï¼š</p><div class="language-dart"><pre><code><span class="token keyword">import</span> <span class="token string-literal"><span class="token string">&#39;package:flutter/material.dart&#39;</span></span><span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">runApp</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token class-name">MyApp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">MyApp</span> <span class="token keyword">extends</span> <span class="token class-name">StatelessWidget</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token class-name">MyApp</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token keyword">super</span><span class="token punctuation">.</span>key<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// è¿™ä¸ªéƒ¨ä»¶æ˜¯åº”ç”¨ç¨‹åºçš„æ ¹</span>
  <span class="token metadata function">@override</span>
  <span class="token class-name">Widget</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token class-name">BuildContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">MaterialApp</span><span class="token punctuation">(</span>
      title<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&#39;Flutter Demo&#39;</span></span><span class="token punctuation">,</span>
      theme<span class="token punctuation">:</span> <span class="token class-name">ThemeData</span><span class="token punctuation">(</span>
        colorScheme<span class="token punctuation">:</span> <span class="token class-name">ColorScheme</span><span class="token punctuation">.</span><span class="token function">fromSeed</span><span class="token punctuation">(</span>seedColor<span class="token punctuation">:</span> <span class="token class-name">Colors</span><span class="token punctuation">.</span>deepPurple<span class="token punctuation">)</span><span class="token punctuation">,</span>
        useMaterial3<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">,</span>
      home<span class="token punctuation">:</span> <span class="token keyword">const</span> <span class="token class-name">MyHomePage</span><span class="token punctuation">(</span>title<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&#39;Flutter Demo Home Page&#39;</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">MyHomePage</span> <span class="token keyword">extends</span> <span class="token class-name">StatefulWidget</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token class-name">MyHomePage</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token keyword">super</span><span class="token punctuation">.</span>key<span class="token punctuation">,</span> required <span class="token keyword">this</span><span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">final</span> <span class="token class-name">String</span> title<span class="token punctuation">;</span>

  <span class="token metadata function">@override</span>
  <span class="token class-name">State</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">MyHomePage</span><span class="token punctuation">&gt;</span></span> <span class="token function">createState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">_MyHomePageState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> _MyHomePageState <span class="token keyword">extends</span> <span class="token class-name">State</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">MyHomePage</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
  int _counter <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

  <span class="token keyword">void</span> <span class="token function">_incrementCounter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      _counter<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token metadata function">@override</span>
  <span class="token class-name">Widget</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token class-name">BuildContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">Scaffold</span><span class="token punctuation">(</span>
      appBar<span class="token punctuation">:</span> <span class="token class-name">AppBar</span><span class="token punctuation">(</span>
        backgroundColor<span class="token punctuation">:</span> <span class="token class-name">Theme</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">.</span>colorScheme<span class="token punctuation">.</span>inversePrimary<span class="token punctuation">,</span>
        title<span class="token punctuation">:</span> <span class="token class-name">Text</span><span class="token punctuation">(</span>widget<span class="token punctuation">.</span>title<span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">,</span>
      body<span class="token punctuation">:</span> <span class="token class-name">Center</span><span class="token punctuation">(</span>
        child<span class="token punctuation">:</span> <span class="token class-name">Column</span><span class="token punctuation">(</span>
          mainAxisAlignment<span class="token punctuation">:</span> <span class="token class-name">MainAxisAlignment</span><span class="token punctuation">.</span>center<span class="token punctuation">,</span>
          children<span class="token punctuation">:</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Widget</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span>
            <span class="token keyword">const</span> <span class="token class-name">Text</span><span class="token punctuation">(</span>
              <span class="token string-literal"><span class="token string">&#39;You have pushed the button this many times:&#39;</span></span><span class="token punctuation">,</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token class-name">Text</span><span class="token punctuation">(</span>
              <span class="token string-literal"><span class="token string">&#39;</span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">_counter</span></span><span class="token string">&#39;</span></span><span class="token punctuation">,</span>
              style<span class="token punctuation">:</span> <span class="token class-name">Theme</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">.</span>textTheme<span class="token punctuation">.</span>headlineMedium<span class="token punctuation">,</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">,</span>
      floatingActionButton<span class="token punctuation">:</span> <span class="token class-name">FloatingActionButton</span><span class="token punctuation">(</span>
        onPressed<span class="token punctuation">:</span> _incrementCounter<span class="token punctuation">,</span>
        tooltip<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&#39;Increment&#39;</span></span><span class="token punctuation">,</span>
        child<span class="token punctuation">:</span> <span class="token keyword">const</span> <span class="token class-name">Icon</span><span class="token punctuation">(</span><span class="token class-name">Icons</span><span class="token punctuation">.</span>add<span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// This trailing comma makes auto-formatting nicer for build methods.</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="ä»£ç åˆ†æ"><a class="header-anchor" href="#ä»£ç åˆ†æ" aria-hidden="true">#</a> ä»£ç åˆ†æ</h3><ol><li><p>å¯¼å…¥åŒ…</p><div class="language-js"><pre><code><span class="token keyword">import</span> <span class="token string">&#39;package:flutter/material.dart&#39;</span>
</code></pre></div><p>é€šè¿‡æ­¤è¡Œä»£ç å¯¼å…¥ <a href="https://m2.material.io/design" target="_blank" rel="noopener noreferrer">material</a> ç»„ä»¶åº“</p></li><li><p>åº”ç”¨å…¥å£</p><div class="language-dart"><pre><code><span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token function">runApp</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token class-name">MyApp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä¸ Java ç±»ä¼¼ï¼ŒFlutter ä¸­åŒæ ·ä½¿ç”¨ <code>main</code> å‡½æ•°ä½œä¸ºåº”ç”¨ç¨‹åºçš„å…¥å£ï¼Œè°ƒç”¨ <code>runApp</code> æ–¹æ³•å¯åŠ¨ Flutter åº”ç”¨ã€‚</p><p><code>runApp</code> æ¥å—ä¸€ä¸ª <code>Widget</code> å‚æ•°ï¼Œå¦‚ <code>MyApp()</code>ï¼Œå®ƒæ˜¯ Flutter åº”ç”¨çš„æ ¹ç»„ä»¶</p></li><li><p>åº”ç”¨ç»“æ„</p><div class="language-dart"><pre><code><span class="token keyword">class</span> <span class="token class-name">MyApp</span> <span class="token keyword">extends</span> <span class="token class-name">StatelessWidget</span> <span class="token punctuation">{</span>
 <span class="token keyword">const</span> <span class="token class-name">MyApp</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token keyword">super</span><span class="token punctuation">.</span>key<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token comment">// è¿™ä¸ªéƒ¨ä»¶æ˜¯åº”ç”¨ç¨‹åºçš„æ ¹</span>
   <span class="token metadata function">@override</span>
   <span class="token class-name">Widget</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token class-name">BuildContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token keyword">return</span> <span class="token class-name">MaterialApp</span><span class="token punctuation">(</span>
         title<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&#39;Flutter Demo&#39;</span></span><span class="token punctuation">,</span>
         theme<span class="token punctuation">:</span> <span class="token class-name">ThemeData</span><span class="token punctuation">(</span>
           colorScheme<span class="token punctuation">:</span> <span class="token class-name">ColorScheme</span><span class="token punctuation">.</span><span class="token function">fromSeed</span><span class="token punctuation">(</span>seedColor<span class="token punctuation">:</span> <span class="token class-name">Colors</span><span class="token punctuation">.</span>deepPurple<span class="token punctuation">)</span><span class="token punctuation">,</span>
           useMaterial3<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
         <span class="token punctuation">)</span><span class="token punctuation">,</span>
         home<span class="token punctuation">:</span> <span class="token keyword">const</span> <span class="token class-name">MyHomePage</span><span class="token punctuation">(</span>title<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&#39;Flutter Demo Home Page&#39;</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>
</code></pre></div></li></ol><ul><li>MyApp æ˜¯ Flutter åº”ç”¨æ ¹ç»„ä»¶ï¼Œç»§æ‰¿è‡ª StatelessWidgetï¼Œæ‰€æœ‰æœ¬èº«ä¹Ÿæ˜¯ widgetï¼ˆâ€œç»„ä»¶â€æˆ–â€œéƒ¨ä»¶â€ï¼‰</li><li>Flutter ä¸­ï¼Œå¤§å¤šæ•°éƒ½æ˜¯ widgetï¼ŒåŒ…æ‹¬å¯¹é½ï¼ˆAlignï¼‰ã€å¡«å……ï¼ˆPaddingï¼‰ã€æ‰‹åŠ¿å¤„ç†ï¼ˆGestureDetectorï¼‰ç­‰ï¼Œå®ƒä»¬éƒ½æ˜¯ä»¥ widget çš„å½¢å¼æä¾›</li><li>Flutter æ„å»ºé¡µé¢æ—¶ï¼Œè°ƒç”¨ <code>build</code> æ–¹æ³•ï¼Œæè¿°å¦‚ä½•æ„å»º UI ç•Œé¢</li><li><code>MaterialApp</code> æ˜¯ Material åº“ä¸­æä¾›çš„ Flutter App æ¡†æ¶ï¼Œé€šè¿‡å®ƒè®¾ç½®åº”ç”¨çš„åç§°ã€ä¸»é¢˜è‰²ã€è¯­è¨€å’Œé¦–é¡µç­‰ï¼Œç»§æ‰¿è‡ª StatefulWidgetï¼Œä¹Ÿæ˜¯ widget</li></ul><div class="language-dart"><pre><code><span class="token keyword">class</span> <span class="token class-name">MyHomePage</span> <span class="token keyword">extends</span> <span class="token class-name">StatefulWidget</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token class-name">MyHomePage</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token keyword">super</span><span class="token punctuation">.</span>key<span class="token punctuation">,</span> required <span class="token keyword">this</span><span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">final</span> <span class="token class-name">String</span> title<span class="token punctuation">;</span>

  <span class="token metadata function">@override</span>
  <span class="token class-name">State</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">MyHomePage</span><span class="token punctuation">&gt;</span></span> <span class="token function">createState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">_MyHomePageState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>home åŠåº”ç”¨é¦–é¡µï¼ŒMyHomePage ç»§æ‰¿è‡ª StatefulWidgetï¼Œè¡¨ç¤ºä¸€ä¸ªæœ‰çŠ¶æ€çš„ç»„ä»¶ã€‚</p><p>ä¹‹å‰çš„ MyApp å…¥å£ç»§æ‰¿ StatelessWidgetï¼Œè¡¨ç¤ºæ— çŠ¶æ€çš„ç»„ä»¶ï¼Œä¸¤è€…å¯¹æ¯”å¦‚ä¸‹ï¼š</p><ol><li>StatefulWidget æ‹¥æœ‰çŠ¶æ€ï¼Œå¹¶ä¸”çŠ¶æ€åœ¨ widget ç”Ÿå‘½å‘¨æœŸä¸­å¯å˜ï¼ŒStatelessWidget æ²¡æœ‰çŠ¶æ€</li><li>StatefulWidget è‡³å°‘ç”±ä¸¤ä¸ªç±»æ„æˆ <ol><li>ä¸€ä¸ª StatefulWidget ç±»</li><li>ä¸€ä¸ª State ç±»ï¼Œè¯¥ç±»ç»§æ‰¿è‡ª Stateï¼Œè¯¥ç±»ä¸­åŒ…å« widget çš„çŠ¶æ€</li></ol></li></ol><h4 id="state-ç±»"><a class="header-anchor" href="#state-ç±»" aria-hidden="true">#</a> State ç±»</h4><p><code>_MyHomePageState</code>ç±»æ˜¯ MyHomePage ç±»å¯¹åº”çš„çŠ¶æ€ç±»ï¼ŒMyHomePage ç±»ä¸­å¹¶æ²¡æœ‰ build æ–¹æ³•ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯ï¼Œbuild æ–¹æ³•è¢«æŒªåˆ°äº†<code>_MyHomePageState</code>æ–¹æ³•ä¸­</p><div class="language-dart"><pre><code><span class="token keyword">class</span> _MyHomePageState <span class="token keyword">extends</span> <span class="token class-name">State</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">MyHomePage</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
  int _counter <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

  <span class="token keyword">void</span> <span class="token function">_incrementCounter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      _counter<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token metadata function">@override</span>
  <span class="token class-name">Widget</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token class-name">BuildContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">Scaffold</span><span class="token punctuation">(</span>
      appBar<span class="token punctuation">:</span> <span class="token class-name">AppBar</span><span class="token punctuation">(</span>
        backgroundColor<span class="token punctuation">:</span> <span class="token class-name">Theme</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">.</span>colorScheme<span class="token punctuation">.</span>inversePrimary<span class="token punctuation">,</span>
        title<span class="token punctuation">:</span> <span class="token class-name">Text</span><span class="token punctuation">(</span>widget<span class="token punctuation">.</span>title<span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">,</span>
      body<span class="token punctuation">:</span> <span class="token class-name">Center</span><span class="token punctuation">(</span>
        child<span class="token punctuation">:</span> <span class="token class-name">Column</span><span class="token punctuation">(</span>
          mainAxisAlignment<span class="token punctuation">:</span> <span class="token class-name">MainAxisAlignment</span><span class="token punctuation">.</span>center<span class="token punctuation">,</span>
          children<span class="token punctuation">:</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Widget</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span>
            <span class="token keyword">const</span> <span class="token class-name">Text</span><span class="token punctuation">(</span>
              <span class="token string-literal"><span class="token string">&#39;You have pushed the button this many times:&#39;</span></span><span class="token punctuation">,</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token class-name">Text</span><span class="token punctuation">(</span>
              <span class="token string-literal"><span class="token string">&#39;</span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">_counter</span></span><span class="token string">&#39;</span></span><span class="token punctuation">,</span>
              style<span class="token punctuation">:</span> <span class="token class-name">Theme</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">.</span>textTheme<span class="token punctuation">.</span>headlineMedium<span class="token punctuation">,</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">,</span>
      floatingActionButton<span class="token punctuation">:</span> <span class="token class-name">FloatingActionButton</span><span class="token punctuation">(</span>
        onPressed<span class="token punctuation">:</span> _incrementCounter<span class="token punctuation">,</span>
        tooltip<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&#39;Increment&#39;</span></span><span class="token punctuation">,</span>
        child<span class="token punctuation">:</span> <span class="token keyword">const</span> <span class="token class-name">Icon</span><span class="token punctuation">(</span><span class="token class-name">Icons</span><span class="token punctuation">.</span>add<span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// This trailing comma makes auto-formatting nicer for build methods.</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>_MyHomePageState</code> ç±»åŒ…æ‹¬ï¼š</p><ul><li><p>ç»„ä»¶çŠ¶æ€</p><div class="language-dart"><pre><code>int _counter <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre></div></li><li><p>çŠ¶æ€å˜åŒ–å‡½æ•°</p><div class="language-dart"><pre><code><span class="token keyword">void</span> <span class="token function">_incrementCounter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    _counter<span class="token operator">++</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è°ƒç”¨ setState æ–¹æ³•å‘ŠçŸ¥ Flutter æ¡†æ¶æœ‰çŠ¶æ€æ”¹å˜ï¼ŒFlutter æ¥æ”¶åè°ƒç”¨ build æ–¹æ³•é‡æ–°æ„å»ºé¡µé¢</p></li><li><p>æ„å»º UI ç•Œé¢çš„ build æ–¹æ³•</p><p>å½“ MyHomePage ç¬¬ä¸€æ¬¡è¢«åˆ›å»ºæ—¶ï¼Œ<code>_MyHomePageState</code> ç±»åŒæ—¶è¢«åˆ›å»ºï¼Œä¼šè°ƒç”¨ build æ–¹æ³•æ„å»º widget æ ‘ï¼Œæœ€ç»ˆå°† widget æ ‘æ¸²æŸ“åˆ°ç•Œé¢ä¸Š</p><ul><li>Scaffoldï¼šMaterial æä¾›çš„é¡µé¢è„šæ‰‹æ¶ï¼Œæä¾›é»˜è®¤çš„å¯¼èˆªæ ã€æ ‡é¢˜å’Œå«ä¸»å±å¹• widget æ ‘ï¼ˆååŒâ€œç»„ä»¶æ ‘â€æˆ–â€œéƒ¨ä»¶æ ‘â€ï¼‰çš„ body å±æ€§</li><li>bodyï¼š<code>Center</code> å¯ä»¥å°†å­ç»„ä»¶æ ‘å¯¹é½åˆ°å±å¹•ä¸­å¿ƒï¼Œé€šè¿‡ <code>child</code> å®šä¹‰å­ç»„ä»¶ï¼Œé€šè¿‡ <code>children</code> å®šä¹‰å¤šä¸ªå¹³è¡Œçš„å­ç»„ä»¶</li><li>floatingActionButtonï¼šæ˜¯å³ä¸‹è§’æ‚¬æµ® buttonï¼Œé€šè¿‡ onPressed æ¥æ”¶å›è°ƒå‡½æ•°</li></ul></li></ul><h3 id="widget"><a class="header-anchor" href="#widget" aria-hidden="true">#</a> Widget</h3><h4 id="åŸºæœ¬æ¦‚å¿µ"><a class="header-anchor" href="#åŸºæœ¬æ¦‚å¿µ" aria-hidden="true">#</a> åŸºæœ¬æ¦‚å¿µ</h4><p>Widget æ˜¯ Flutter ç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢çš„åŸºæœ¬å•å…ƒã€‚æ¯ä¸ª Widget éƒ½æè¿°äº†ç”¨æˆ·ç•Œé¢çš„ä¸€éƒ¨åˆ†ã€‚æ— è®ºæ˜¯ä¸€ä¸ªæŒ‰é’®ã€æ–‡æœ¬ã€å›¾åƒï¼Œè¿˜æ˜¯æ•´ä¸ªå¸ƒå±€ç»“æ„ï¼Œéƒ½æ˜¯é€šè¿‡ Widget æ¥å®ç°çš„ã€‚åœ¨ Flutter ä¸­ï¼Œå‡ ä¹æ‰€æœ‰çš„ä¸œè¥¿éƒ½æ˜¯ Widgetï¼ŒåŒ…æ‹¬å¯¹é½æ–¹å¼ã€å¡«å……ã€å¸ƒå±€æ¨¡å‹ç­‰ã€‚</p><h4 id="ç‰¹ç‚¹"><a class="header-anchor" href="#ç‰¹ç‚¹" aria-hidden="true">#</a> ç‰¹ç‚¹</h4><ul><li><p>ä¸å¯å˜æ€§ï¼šWidget æœ¬èº«æ˜¯ä¸å¯å˜çš„ï¼ˆimmutableï¼‰ã€‚è¿™æ„å‘³ç€ä¸€æ—¦åˆ›å»ºäº† Widgetï¼Œå®ƒçš„å±æ€§ä¸èƒ½æ”¹å˜ï¼ˆfinalï¼‰ã€‚å¦‚æœå±æ€§å‘ç”Ÿå˜åŒ–åˆ™ä¼šé‡æ–°æ„å»º Widget æ ‘</p></li><li><p>æè¿° UIï¼šWidget åªæ˜¯å¯¹ UI çš„ä¸€ç§æè¿°ï¼ŒçœŸæ­£çš„ç»˜åˆ¶å’Œå¸ƒå±€å·¥ä½œæ˜¯ç”±åº•å±‚çš„æ¸²æŸ“å¼•æ“ï¼ˆrendering engineï¼‰æ¥å®Œæˆçš„ã€‚</p></li></ul><h4 id="widget-çš„ç±»å‹"><a class="header-anchor" href="#widget-çš„ç±»å‹" aria-hidden="true">#</a> Widget çš„ç±»å‹</h4><p>Flutter ä¸­çš„ Widget ä¸»è¦åˆ†ä¸ºä¸¤ç±»ï¼šStatefulWidget å’Œ StatelessWidget</p><h5 id="statelesswidget"><a class="header-anchor" href="#statelesswidget" aria-hidden="true">#</a> StatelessWidget</h5><p>StatelessWidget ç”¨äºä¸éœ€è¦ç»´æŠ¤çŠ¶æ€çš„åœºæ™¯ï¼Œé€šå¸¸åœ¨ build æ–¹æ³•ä¸­é€šè¿‡åµŒå¥—å…¶ä»– widget æ¥æ„å»º UIï¼Œåœ¨æ„å»ºè¿‡ç¨‹ä¸­ä¼šé€’å½’çš„æ„å»ºå…¶åµŒå¥—çš„ widget ã€‚å¦‚ä¸Šé¢çš„ MyApp</p><p>build æ–¹æ³•æœ‰ä¸€ä¸ª context å‚æ•°ï¼Œå®ƒæ˜¯ BuildContext ç±»çš„ä¸€ä¸ªå®ä¾‹ï¼Œè¡¨ç¤ºå½“å‰ widget åœ¨ widget æ ‘ä¸­çš„ä¸Šä¸‹æ–‡ï¼Œæ¯ä¸€ä¸ª widget éƒ½ä¼šå¯¹åº”ä¸€ä¸ª context å¯¹è±¡</p><h5 id="statefulwidget"><a class="header-anchor" href="#statefulwidget" aria-hidden="true">#</a> StatefulWidget</h5><p>createState() ç”¨äºåˆ›å»ºå’Œ StatefulWidget ç›¸å…³çš„çŠ¶æ€ï¼Œå®ƒåœ¨ StatefulWidget çš„ç”Ÿå‘½å‘¨æœŸä¸­å¯èƒ½ä¼šè¢«å¤šæ¬¡è°ƒç”¨ã€‚ä¾‹å¦‚ï¼Œå½“ä¸€ä¸ª StatefulWidget åŒæ—¶æ’å…¥åˆ° widget æ ‘çš„å¤šä¸ªä½ç½®æ—¶ï¼ŒFlutter æ¡†æ¶å°±ä¼šè°ƒç”¨è¯¥æ–¹æ³•ä¸ºæ¯ä¸€ä¸ªä½ç½®ç”Ÿæˆä¸€ä¸ªç‹¬ç«‹çš„ State å®ä¾‹</p><h3 id="state"><a class="header-anchor" href="#state" aria-hidden="true">#</a> State</h3><p>ä¸€ä¸ª StatefulWidget å¯¹åº”ä¸€ä¸ª State ç±»ï¼Œè¡¨ç¤ºä¸å…¶å¯¹åº”çš„ StatefulWidget è¦ç»´æŠ¤çš„çŠ¶æ€ã€‚</p><p>ç‰¹ç‚¹ï¼š</p><ol><li>State ä¸­çš„çŠ¶æ€åœ¨ widget æ„å»ºæ—¶ä¼šåŒæ­¥è¯»å–</li><li>åœ¨ widget çš„ç”Ÿå‘½å‘¨æœŸä¸­å¯ä»¥è¢«æ”¹å˜ï¼Œå½“ State è¢«æ”¹å˜æ—¶ï¼Œéœ€è¦è°ƒç”¨ setState æ–¹æ³•é€šçŸ¥ Flutter è°ƒç”¨ build é‡æ–°æ„å»º widget æ ‘</li></ol><h4 id="state-ç”Ÿå‘½å‘¨æœŸ"><a class="header-anchor" href="#state-ç”Ÿå‘½å‘¨æœŸ" aria-hidden="true">#</a> State ç”Ÿå‘½å‘¨æœŸ</h4><p>State çš„ç”Ÿå‘½å‘¨æœŸåœ¨ Flutter å¼€å‘ä¸­å°¤ä¸ºé‡è¦ï¼Œä¿®æ”¹ä»£ç å¦‚ä¸‹ï¼š</p><div class="language-dart"><pre><code><span class="token keyword">import</span> <span class="token string-literal"><span class="token string">&#39;package:flutter/material.dart&#39;</span></span><span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">runApp</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token class-name">MyApp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">MyApp</span> <span class="token keyword">extends</span> <span class="token class-name">StatelessWidget</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token class-name">MyApp</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token keyword">super</span><span class="token punctuation">.</span>key<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// è¿™ä¸ªéƒ¨ä»¶æ˜¯åº”ç”¨ç¨‹åºçš„æ ¹</span>
  <span class="token metadata function">@override</span>
  <span class="token class-name">Widget</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token class-name">BuildContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">MaterialApp</span><span class="token punctuation">(</span>
      title<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&#39;Flutter Demo&#39;</span></span><span class="token punctuation">,</span>
      theme<span class="token punctuation">:</span> <span class="token class-name">ThemeData</span><span class="token punctuation">(</span>
        colorScheme<span class="token punctuation">:</span> <span class="token class-name">ColorScheme</span><span class="token punctuation">.</span><span class="token function">fromSeed</span><span class="token punctuation">(</span>seedColor<span class="token punctuation">:</span> <span class="token class-name">Colors</span><span class="token punctuation">.</span>deepPurple<span class="token punctuation">)</span><span class="token punctuation">,</span>
        useMaterial3<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">,</span>
      home<span class="token punctuation">:</span> <span class="token keyword">const</span> <span class="token class-name">StateLifeCycleTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">StateLifeCycleTest</span> <span class="token keyword">extends</span> <span class="token class-name">StatelessWidget</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token class-name">StateLifeCycleTest</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">Key</span><span class="token operator">?</span> key<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">super</span><span class="token punctuation">(</span>key<span class="token punctuation">:</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token metadata function">@override</span>
  <span class="token class-name">Widget</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token class-name">BuildContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">CounterWidget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">CounterWidget</span> <span class="token keyword">extends</span> <span class="token class-name">StatefulWidget</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token class-name">CounterWidget</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token keyword">super</span><span class="token punctuation">.</span>key<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>initValue <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">final</span> int initValue<span class="token punctuation">;</span>

  <span class="token metadata function">@override</span>
  _CounterWidgetState <span class="token function">createState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">_CounterWidgetState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> _CounterWidgetState <span class="token keyword">extends</span> <span class="token class-name">State</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">CounterWidget</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
  int _counter <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

  <span class="token metadata function">@override</span>
  <span class="token keyword">void</span> <span class="token function">initState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">initState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// åˆå§‹åŒ–çŠ¶æ€</span>
    _counter <span class="token operator">=</span> widget<span class="token punctuation">.</span>initValue<span class="token punctuation">;</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&#39;initState&#39;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token metadata function">@override</span>
  <span class="token class-name">Widget</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token class-name">BuildContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&#39;build&#39;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token class-name">Scaffold</span><span class="token punctuation">(</span>
        body<span class="token punctuation">:</span> <span class="token class-name">Center</span><span class="token punctuation">(</span>
            child<span class="token punctuation">:</span> <span class="token class-name">TextButton</span><span class="token punctuation">(</span>
                child<span class="token punctuation">:</span> <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&#39;</span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">_counter</span></span><span class="token string">&#39;</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                onPressed<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">setState</span><span class="token punctuation">(</span>
                      <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token operator">++</span>_counter<span class="token punctuation">,</span>
                    <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token metadata function">@override</span>
  <span class="token keyword">void</span> <span class="token function">didUpdateWidget</span><span class="token punctuation">(</span><span class="token class-name">CounterWidget</span> oldWidget<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">didUpdateWidget</span><span class="token punctuation">(</span>oldWidget<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&#39;didUpdateWidget&#39;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token metadata function">@override</span>
  <span class="token keyword">void</span> <span class="token function">deactivate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">deactivate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&#39;deactivate&#39;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token metadata function">@override</span>
  <span class="token keyword">void</span> <span class="token function">dispose</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">dispose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;dispose&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token metadata function">@override</span>
  <span class="token keyword">void</span> <span class="token function">reassemble</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">reassemble</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;reassemble&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token metadata function">@override</span>
  <span class="token keyword">void</span> <span class="token function">didChangeDependencies</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">didChangeDependencies</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;didChangeDependencies&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>é€šè¿‡ debug å¯åŠ¨é¡¹ç›®ï¼Œçœ‹åˆ°æ§åˆ¶å°è¾“å‡ºå¦‚ä¸‹ï¼Œä¹Ÿå°±æ˜¯åœ¨ StatefulWidget æ’å…¥åˆ° Widget æ ‘ä¸­æ—¶ï¼Œé¦–å…ˆ initState æ–¹æ³•ä¼šè¢«è°ƒç”¨</p><p><img src="/blog/_assets/flutter-init-lifecycle.a1d56f56.png" alt="flutter-init-lifecycle"></p><p>æ¥ç€é€šè¿‡ç‚¹å‡» âš¡ï¸ æŒ‰æ‰­è§¦å‘çƒ­é‡è½½ï¼š</p><p><img src="/blog/_assets/flutter-hot-reload-lifecycle.5313c0af.png" alt="flutter-hot-reload-lifecycle"></p><p>æ¥ä¸‹æ¥æˆ‘ä»¬åœ¨ widget æ ‘ä¸­åˆ é™¤ CounterWidget</p><p><img src="/blog/_assets/flutter-remove-widget-lifecycle.82e24cd1.png" alt="flutter-remove-widget-lifecycle"></p><p>ç»“åˆä»¥ä¸Šæ¡ˆä¾‹ï¼Œæ¥çœ‹ä¸‹ State çš„ç”Ÿå‘½å‘¨æœŸ</p><ol><li>createStateï¼šå½“ StatefulWidget é¦–æ¬¡æ’å…¥åˆ° widget æ ‘ä¸­æ—¶è°ƒç”¨ï¼Œåˆ›å»ºå¹¶è¿”å›ä¸ StatefulWidget å…³è”çš„ State å¯¹è±¡</li><li>initState: State å¯¹è±¡è¢«åˆ›å»ºæ—¶ï¼Œå³ widget ç¬¬ä¸€æ¬¡æ’å…¥åˆ° widget æ ‘ä¸­æ—¶è°ƒç”¨ï¼Œ<strong>åªè°ƒç”¨ä¸€æ¬¡</strong>ï¼Œå¿…é¡»è°ƒç”¨<code>super.initState();</code>ï¼Œå¯ä»¥åšä¸€äº›ä¸€æ¬¡æ€§æ“ä½œï¼Œå¦‚çŠ¶æ€åˆå§‹åŒ–ã€è®¢é˜…å­æ ‘çš„äº‹ä»¶é€šçŸ¥ç­‰</li><li>didChangeDependenciesï¼šå½“ State å¯¹è±¡çš„ä¾èµ–å‘ç”Ÿå˜åŒ–æ—¶ä¼šè¢«è°ƒç”¨</li><li>buildï¼šåœ¨ initState å’Œ didChangeDependencies ä¹‹åè°ƒç”¨ï¼Œä¹‹åæ¯æ¬¡è°ƒç”¨ setState æ—¶ä¹Ÿä¼šè°ƒç”¨</li><li>reassembleï¼šåœ¨çƒ­é‡è½½ï¼ˆhot reloadï¼‰æ—¶è°ƒç”¨</li><li>didUpdateWidgetï¼šåœ¨ widget çš„é…ç½®å‘ç”Ÿå˜åŒ–æ—¶è°ƒç”¨ï¼Œåœ¨ widget é‡æ–°æ„å»ºæ—¶ï¼ŒFlutter æ¡†æ¶ä¼šè°ƒç”¨ widget.canUpdate æ¥æ£€æµ‹ widget æ ‘ä¸­åŒä¸€ä½ç½®çš„æ–°æ—§èŠ‚ç‚¹ï¼Œç„¶åå†³å®šæ˜¯å¦éœ€è¦æ›´æ–°ï¼Œå¦‚æœ widget.canUpdate è¿”å› true åˆ™ä¼šè°ƒç”¨æ­¤å›è°ƒã€‚</li><li>deactivateï¼šå½“ State å¯¹è±¡ä»æ ‘ä¸­è¢«ç§»é™¤æ—¶ï¼Œä¼šè°ƒç”¨æ­¤å›è°ƒ</li><li>disposeï¼šå½“ State å¯¹è±¡ä»æ ‘ä¸­è¢«æ°¸ä¹…ç§»é™¤æ—¶è°ƒç”¨ï¼›é€šå¸¸åœ¨æ­¤å›è°ƒä¸­é‡Šæ”¾èµ„æºã€‚</li></ol><p><img src="/blog/_assets/flutter-state-lifecycle.f26911f7.png" alt="flutter-state-lifecycle"></p><h3 id="åœ¨-widget-æ ‘ä¸­è·å–-state-å¯¹è±¡"><a class="header-anchor" href="#åœ¨-widget-æ ‘ä¸­è·å–-state-å¯¹è±¡" aria-hidden="true">#</a> åœ¨ Widget æ ‘ä¸­è·å– State å¯¹è±¡</h3><p>å¦‚æœéœ€è¦ä» Widget æ ‘ä¸­è·å–æŸä¸ª State å¯¹è±¡ï¼Œä»¥ä¾¿ä¸å…¶è¿›è¡Œäº¤äº’ï¼Œä¹Ÿå°±æ˜¯ vue ä¸­çš„çˆ¶å­ç»„ä»¶é€šä¿¡ã€‚Flutter æä¾›äº†å‡ ç§æ–¹æ³•æ¥å®ç°è¿™ä¸€ç‚¹ï¼Œå…·ä½“æ–¹æ³•å–å†³äºä½ è¦è·å– State å¯¹è±¡çš„ä¸Šä¸‹æ–‡å’Œå…·ä½“éœ€æ±‚ã€‚</p><h4 id="é€šè¿‡-context-è·å–"><a class="header-anchor" href="#é€šè¿‡-context-è·å–" aria-hidden="true">#</a> é€šè¿‡ Context è·å–</h4><p>context å¯¹è±¡æä¾›æ–¹æ³• <code>findAncestorStateOfType()</code>ï¼Œè¯¥æ–¹æ³•å¯ä»¥ä»å½“å‰èŠ‚ç‚¹æ²¿ç€ widget æ ‘å‘ä¸ŠæŸ¥æ‰¾æŒ‡å®šç±»å‹çš„ statefulWidget çš„ state å¯¹è±¡ï¼ŒåŒæ—¶è¿˜æœ‰ <code>findRootAncestorStateOfType()</code> è·å–æ ¹èŠ‚ç‚¹çš„ state å¯¹è±¡</p><div class="language-dart"><pre><code><span class="token keyword">import</span> <span class="token string-literal"><span class="token string">&#39;package:flutter/material.dart&#39;</span></span><span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">runApp</span><span class="token punctuation">(</span><span class="token class-name">MyApp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">MyApp</span> <span class="token keyword">extends</span> <span class="token class-name">StatelessWidget</span> <span class="token punctuation">{</span>
  <span class="token metadata function">@override</span>
  <span class="token class-name">Widget</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token class-name">BuildContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">MaterialApp</span><span class="token punctuation">(</span>
      home<span class="token punctuation">:</span> <span class="token class-name">Scaffold</span><span class="token punctuation">(</span>
        appBar<span class="token punctuation">:</span> <span class="token class-name">AppBar</span><span class="token punctuation">(</span>
          title<span class="token punctuation">:</span> <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&#39;çˆ¶å­é€šä¿¡&#39;</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
        body<span class="token punctuation">:</span> <span class="token class-name">MyWidget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">MyWidget</span> <span class="token keyword">extends</span> <span class="token class-name">StatefulWidget</span> <span class="token punctuation">{</span>
  <span class="token metadata function">@override</span>
  _MyWidgetState <span class="token function">createState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">_MyWidgetState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> _MyWidgetState <span class="token keyword">extends</span> <span class="token class-name">State</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">MyWidget</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
  int _counter <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

  <span class="token keyword">void</span> <span class="token function">incrementCounter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      _counter<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token metadata function">@override</span>
  <span class="token class-name">Widget</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token class-name">BuildContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">Column</span><span class="token punctuation">(</span>
      children<span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token class-name">Center</span><span class="token punctuation">(</span>
          child<span class="token punctuation">:</span> <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&#39;Counter: </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">_counter</span></span><span class="token string">&#39;</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token class-name">ChildWidget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">ChildWidget</span> <span class="token keyword">extends</span> <span class="token class-name">StatelessWidget</span> <span class="token punctuation">{</span>
  <span class="token metadata function">@override</span>
  <span class="token class-name">Widget</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token class-name">BuildContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// é€šè¿‡BuildContextæŸ¥æ‰¾çˆ¶çº§Stateå¯¹è±¡</span>
    _MyWidgetState<span class="token operator">?</span> parentState <span class="token operator">=</span>
        context<span class="token punctuation">.</span>findAncestorStateOfType<span class="token generics"><span class="token punctuation">&lt;</span>_MyWidgetState<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token class-name">ElevatedButton</span><span class="token punctuation">(</span>
      onPressed<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        parentState<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">incrementCounter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      child<span class="token punctuation">:</span> <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&#39;çˆ¶èŠ‚ç‚¹æ•°æ®ï¼š</span><span class="token interpolation"><span class="token punctuation">${</span><span class="token expression">parentState<span class="token operator">?</span><span class="token punctuation">.</span>_counter <span class="token operator">?</span><span class="token operator">?</span> <span class="token number">0</span></span><span class="token punctuation">}</span></span><span class="token string">&#39;</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼ŒChildWidget é€šè¿‡ BuildContext æŸ¥æ‰¾çˆ¶çº§ MyWidget çš„ State å¯¹è±¡ï¼Œå¯ä»¥è®¿é—®å˜é‡æˆ–è€…è°ƒç”¨å…¶æ–¹æ³•ã€‚</p><p><img src="/blog/_assets/flutter-context-state.b00c405d.png" alt="flutter-context-state"></p><h4 id="é€šè¿‡-globalkey"><a class="header-anchor" href="#é€šè¿‡-globalkey" aria-hidden="true">#</a> é€šè¿‡ GlobalKey</h4><p>GlobalKey æ˜¯è·å– State å¯¹è±¡çš„æœ€å¸¸ç”¨æ–¹æ³•ä¹‹ä¸€ã€‚ä½ å¯ä»¥å°† GlobalKey ä¼ é€’ç»™ StatefulWidgetï¼Œç„¶åä½¿ç”¨å®ƒæ¥è®¿é—® State å¯¹è±¡ã€‚</p><p><strong>æ³¨æ„ï¼šä½¿ç”¨ GlobalKey å¼€é”€è¾ƒå¤§ï¼Œå¦‚æœæœ‰å…¶ä»–å¯é€‰æ–¹æ¡ˆï¼Œåº”å°½é‡é¿å…ä½¿ç”¨å®ƒã€‚å¦å¤–ï¼ŒåŒä¸€ä¸ª GlobalKey åœ¨æ•´ä¸ª widget æ ‘ä¸­å¿…é¡»æ˜¯å”¯ä¸€çš„ï¼Œä¸èƒ½é‡å¤ã€‚</strong></p><h3 id="é€šè¿‡-renderobject-è‡ªå®šä¹‰-widget"><a class="header-anchor" href="#é€šè¿‡-renderobject-è‡ªå®šä¹‰-widget" aria-hidden="true">#</a> é€šè¿‡ RenderObject è‡ªå®šä¹‰ Widget</h3><p>åœ¨ Flutter ä¸­ï¼Œç›´æ¥ä½¿ç”¨ RenderObject æ¥æ„å»ºè‡ªå®šä¹‰ Widget å¹¶ä¸å¸¸è§ï¼Œå°¤å…¶æ˜¯åœ¨æ—¥å¸¸åº”ç”¨å¼€å‘ä¸­ã€‚å¤§å¤šæ•°å¼€å‘è€…å¯ä»¥é€šè¿‡ Flutter æä¾›çš„ç°æˆ Widgetã€å¸ƒå±€å’Œç»˜åˆ¶ç³»ç»Ÿå®ç°æ‰€éœ€çš„åŠŸèƒ½ã€‚ç„¶è€Œï¼ŒRenderObject éå¸¸å¼ºå¤§ä¸”çµæ´»ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå®ƒéå¸¸æœ‰ç”¨ï¼Œæ¯”å¦‚éœ€è¦ç²¾ç»†æ§åˆ¶å¸ƒå±€å’Œç»˜åˆ¶é€»è¾‘ï¼Œæˆ–è€…éœ€è¦å®ç°é«˜æ€§èƒ½çš„è‡ªå®šä¹‰ç»„ä»¶æ—¶ã€‚</p><h3 id="flutter-sdk-å†…ç½®ç»„ä»¶åº“ä»‹ç»"><a class="header-anchor" href="#flutter-sdk-å†…ç½®ç»„ä»¶åº“ä»‹ç»" aria-hidden="true">#</a> Flutter SDK å†…ç½®ç»„ä»¶åº“ä»‹ç»</h3><p>Flutter SDK å†…ç½®äº†ä¸°å¯Œçš„åŸºç¡€ç»„ä»¶ï¼Œåœ¨åŸºç¡€ç»„ä»¶ä¹‹ä¸Šè¿˜æä¾›äº†ä¸€å¥— Material é£æ ¼ï¼ˆAndroid é»˜è®¤çš„è§†è§‰é£æ ¼ï¼‰å’Œä¸€å¥— Cupertino é£æ ¼ï¼ˆiOS é»˜è®¤çš„è§†è§‰é£æ ¼ï¼‰çš„ç»„ä»¶ã€‚</p><h4 id="åŸºç¡€ç»„ä»¶"><a class="header-anchor" href="#åŸºç¡€ç»„ä»¶" aria-hidden="true">#</a> åŸºç¡€ç»„ä»¶</h4><p>ä½¿ç”¨åŸºç¡€ç»„ä»¶å‰ï¼Œéœ€è¦å¯¼å…¥</p><div class="language-dart"><pre><code><span class="token keyword">import</span> <span class="token string-literal"><span class="token string">&#39;package:flutter/widgets.dart&#39;</span></span><span class="token punctuation">;</span>
</code></pre></div><ul><li><a href="https://api.flutter.dev/flutter/widgets/Text-class.html" target="_blank" rel="noopener noreferrer">Text</a>ï¼šåˆ›å»ºå¸¦æ ¼å¼çš„æ–‡æœ¬</li><li><a href="https://api.flutter.dev/flutter/widgets/Row-class.html" target="_blank" rel="noopener noreferrer">Row</a>ã€<a href="https://api.flutter.dev/flutter/widgets/Column-class.html" target="_blank" rel="noopener noreferrer">Column</a>ï¼šå¯ä»¥åœ¨æ°´å¹³ã€å‚ç›´æ–¹å‘ä¸Šåˆ›å»ºçµæ´»çš„å¸ƒå±€ï¼Œç±»ä¼¼äº web ä¸­çš„ flexbox</li><li><a href="https://api.flutter.dev/flutter/widgets/Stack-class.html" target="_blank" rel="noopener noreferrer">Stack</a>ï¼šå…è®¸å­ widget å †å ï¼Œç±»ä¼¼äº Web ä¸­çš„ absolute</li><li><a href="https://api.flutter.dev/flutter/widgets/Container-class.html" target="_blank" rel="noopener noreferrer">Container</a>ï¼šåˆ›å»ºçŸ©å½¢å…ƒç´ ï¼Œé€šè¿‡ <a href="https://api.flutter.dev/flutter/painting/BoxDecoration-class.html" target="_blank" rel="noopener noreferrer">BoxDecoration</a>å®šä¹‰èƒŒæ™¯ã€è¾¹æ¡†å’Œé˜´å½±ç­‰</li></ul><h4 id="material-é£æ ¼ç»„ä»¶"><a class="header-anchor" href="#material-é£æ ¼ç»„ä»¶" aria-hidden="true">#</a> Material é£æ ¼ç»„ä»¶</h4><p>Material é£æ ¼ç»„ä»¶éœ€è¦å¯¼å…¥</p><div class="language-dart"><pre><code><span class="token keyword">import</span> <span class="token string-literal"><span class="token string">&#39;package:flutter/material.dart&#39;</span></span><span class="token punctuation">;</span>
</code></pre></div><p>Material åº”ç”¨ç¨‹åºä»¥ MaterialApp ç»„ä»¶å¼€å§‹ï¼Œè¯¥ç»„ä»¶åœ¨åº”ç”¨ç¨‹åºçš„æ ¹éƒ¨åˆ›å»ºäº†ä¸€äº›å¿…è¦çš„ç»„ä»¶ï¼Œæ¯”å¦‚ Theme ç»„ä»¶ï¼Œå®ƒç”¨äºé…ç½®åº”ç”¨çš„ä¸»é¢˜ã€‚</p><p>å¦‚ Scaffold éª¨æ¶ç»„ä»¶ï¼Œå‚æ•° appBarã€body</p></div><div class="links-wrapper"><div class="prev-link"><!----></div><div class="next-link"><!----></div></div><div><footer class="page-edit"><!-- <a v-for="(item,index) in data.platform" :key="index" :href="item.href">
        <img class="imgIcon" :src="item.icon" />
      </a> --></footer><!-- <p class="platform">
      ä»¥ä¸Šçš†ä¸º
      <a href="javascript:;">çºªå¹´</a> æ–‡ç« å‘å¸ƒå¹³å°
    </p> --><p class="platform"><a href="https://beian.miit.gov.cn/" target="_blank">äº¬ICPå¤‡2022027737å·</a><br> Copyright Â© 2022 - present <a href="https://github.com/wang1xiang">@wangxiang</a></p></div><!--[--><!--]--></div><!-- åªæƒ³ç‚¹å‡»èƒŒæ™¯æ‰å…³é—­ è¯·ä½¿ç”¨ .self ä¿®é¥°ç¬¦ --><div style="display:none;" class="imgBox"><img src=""></div><!--]--></main><div class="theme-select" data-v-afcf09d4><ul data-v-afcf09d4><li class="active" data-v-afcf09d4>â˜€ï¸</li><li class="" data-v-afcf09d4>ğŸŒ‘</li></ul></div></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"README.md\":\"ede63988\",\"index.md\":\"69ff5032\",\"more_docs.md\":\"e4d97eda\",\"more_index.md\":\"eca9eae7\",\"more_tags.md\":\"6f0a9fbc\",\"docs_css_grid.md\":\"895366f2\",\"docs_css_placeholder.md\":\"ba788b45\",\"docs_css_tailWindcss-start.md\":\"f4482bc1\",\"docs_docker_docker-start.md\":\"6df1127d\",\"docs_electron_electron-bug.md\":\"99ad2ab9\",\"docs_electron_electron-check-update.md\":\"1ec737f5\",\"docs_electron_electron-diaoyan.md\":\"7ea84649\",\"docs_electron_electron-object-destroyed.md\":\"880eabe7\",\"docs_electron_electron-og.md\":\"09c6d300\",\"docs_electron_electron-open-other.md\":\"ea2e6b66\",\"docs_electron_electron-protocol.md\":\"6064e7aa\",\"docs_electron_electron-sentry.md\":\"bf2c45cd\",\"docs_electron_electron-sign-windows.md\":\"b480aeb9\",\"docs_electron_electron-sign.md\":\"1db29895\",\"docs_electron_electron-sqlite3-bug.md\":\"d6aa57ef\",\"docs_electron_electron-sqlite3-start.md\":\"9432dff1\",\"docs_electron_electron-sqlite3.md\":\"8610fd3c\",\"docs_electron_electron-start.md\":\"ae04a464\",\"docs_electron_electron-update.md\":\"659c811a\",\"docs_electron_electron-webview-zoom.md\":\"c682a0cf\",\"docs_electron_hybrid-electron.md\":\"11d17148\",\"docs_electron_sentry-electron.md\":\"20fdf4d7\",\"docs_flutter_flutter-dart.md\":\"ead1e433\",\"docs_flutter_flutter-other.md\":\"691917ec\",\"docs_flutter_flutter-route-manage.md\":\"628075ef\",\"docs_flutter_flutter-start.md\":\"28e08cd8\",\"docs_flutter_flutter-state-manage.md\":\"c79a211f\",\"docs_flutter_flutter-wechat-pay.md\":\"8dd4b6b9\",\"docs_git_git-autocrlf.md\":\"428339f7\",\"docs_git_git-ignorecase.md\":\"d2e8c88f\",\"docs_git_git-notes.md\":\"b643d676\",\"docs_git_git-rebase.md\":\"177f9e58\",\"docs_git_git-username.md\":\"5dc2bb06\",\"docs_git_gitflow.md\":\"47ca469f\",\"docs_git_gitlab-ci-start.md\":\"113d016d\",\"docs_http_http.md\":\"6be316c9\",\"docs_javascript_async-await.md\":\"7af8498d\",\"docs_javascript_createEvent.md\":\"8a57c5cd\",\"docs_javascript_html2docs.md\":\"67310078\",\"docs_javascript_http-cache.md\":\"3e0d0b8e\",\"docs_javascript_image-load.md\":\"ca339e93\",\"docs_javascript_indexDB-dexie.md\":\"97a3c1ec\",\"docs_javascript_javascript-utils.md\":\"01226ee3\",\"docs_javascript_memory-leak.md\":\"33734f58\",\"docs_javascript_office-preview-type.md\":\"263915d9\",\"docs_javascript_page-alive.md\":\"3dc62a42\",\"docs_javascript_performance-optimization.md\":\"3852293b\",\"docs_javascript_preload-prefetch.md\":\"b300f6cd\",\"docs_javascript_scrollend.md\":\"66327978\",\"docs_javascript_storage-change.md\":\"422775bc\",\"docs_javascript_turborepo-start.md\":\"95872d05\",\"docs_javascript_webworker.md\":\"c66732bd\",\"docs_javascript_zero-width-space.md\":\"49513edd\",\"docs_leetcode_array-code.md\":\"fe24ebdb\",\"docs_leetcode_array-code1.md\":\"e0d1d4d0\",\"docs_leetcode_back-tracking-code.md\":\"dd6e1909\",\"docs_leetcode_back-tracking-code1.md\":\"275e0c56\",\"docs_leetcode_back-tracking-code2.md\":\"88c1a2b9\",\"docs_leetcode_back-tracking-code3.md\":\"ec5d8086\",\"docs_leetcode_binary-tree-code.md\":\"05077f63\",\"docs_leetcode_binary-tree-code1.md\":\"a6854a25\",\"docs_leetcode_binary-tree-code2.md\":\"64a218f4\",\"docs_leetcode_binary-tree-code3.md\":\"e461d874\",\"docs_leetcode_binary-tree-code4.md\":\"920a2b5f\",\"docs_leetcode_binary-tree-code5.md\":\"1e077318\",\"docs_leetcode_binary-tree-code6.md\":\"de9547a7\",\"docs_leetcode_binary-tree-code7.md\":\"cb290098\",\"docs_leetcode_dynamic-programming-code.md\":\"2c0c0a72\",\"docs_leetcode_dynamic-programming-code2.md\":\"d32ec623\",\"docs_leetcode_greedy-algorithmc-code.md\":\"96ab28f7\",\"docs_leetcode_greedy-algorithmc-code2.md\":\"148d274c\",\"docs_leetcode_greedy-algorithmc-code3.md\":\"80737b06\",\"docs_leetcode_greedy-algorithmc-code4.md\":\"df70b8dc\",\"docs_leetcode_greedy-algorithmc-code5.md\":\"73944cdb\",\"docs_leetcode_hash-code.md\":\"5a942975\",\"docs_leetcode_hash-code1.md\":\"57816f0d\",\"docs_leetcode_linked-list-code.md\":\"857cfadc\",\"docs_leetcode_linked-list-code1.md\":\"a3fc6355\",\"docs_leetcode_stack-code.md\":\"5c447721\",\"docs_leetcode_stack-code1.md\":\"976a4249\",\"docs_leetcode_string-code.md\":\"9f986c67\",\"docs_leetcode_string-code1.md\":\"07f5e09a\",\"docs_linux_centos-docker.md\":\"d2a43647\",\"docs_linux_linux-no-possword.md\":\"5f2ecc4f\",\"docs_mobile_mobileDebugging.md\":\"57cd9c6e\",\"docs_nest_mysql-satart.md\":\"a90d57c0\",\"docs_nest_nest-bff.md\":\"35c35f56\",\"docs_nest_nest-start.md\":\"8d32f4ed\",\"docs_node_bff-express-esm.md\":\"444cff5e\",\"docs_node_bff-express.md\":\"fc1dee78\",\"docs_node_bff.md\":\"a4195486\",\"docs_node_deploy-server.md\":\"cfbaca91\",\"docs_node_express-mysql2.md\":\"9d1075ef\",\"docs_node_express-swigger.md\":\"b48ced2e\",\"docs_node_socketIO-start.md\":\"f6e9f3db\",\"docs_photography_nd.md\":\"1ca5820a\",\"docs_pnpm_pnpm-monorepo.md\":\"2fbfd559\",\"docs_prosemirror_html2docs-pdf.md\":\"25fb4f9a\",\"docs_react_create-react-app.md\":\"be54e291\",\"docs_react_dompurify.md\":\"a83a4766\",\"docs_react_eslint-react.md\":\"e2877957\",\"docs_react_react-classnames.md\":\"31978cf4\",\"docs_react_react-grid-layout.md\":\"7b54a619\",\"docs_react_react-intl.md\":\"3c64cf8d\",\"docs_react_react-philosophies.md\":\"9fd1fab3\",\"docs_react_react-query.md\":\"bfcc303d\",\"docs_react_react-router-change.md\":\"0e15554e\",\"docs_react_react-vs-vue3.md\":\"a36a35e4\",\"docs_react_redux-audition.md\":\"7c279791\",\"docs_react_tomcat-404.md\":\"e96ebabc\",\"docs_reactNative_react-native-errors.md\":\"93969a7d\",\"docs_taro_taro-get-started.md\":\"806b452c\",\"docs_taro_taro-start.md\":\"bac58e64\",\"docs_tiptap_tiptap-tutorial.md\":\"3b9458c9\",\"docs_tiptap_tiptap-tutorial10.md\":\"8052be2b\",\"docs_tiptap_tiptap-tutorial2.md\":\"d39033b4\",\"docs_tiptap_tiptap-tutorial3.md\":\"89f81f90\",\"docs_tiptap_tiptap-tutorial4.md\":\"b08c04a7\",\"docs_tiptap_tiptap-tutorial5.md\":\"83737ebf\",\"docs_tiptap_tiptap-tutorial6.md\":\"3a2e7a29\",\"docs_tiptap_tiptap-tutorial7.md\":\"bb24088a\",\"docs_tiptap_tiptap-tutorial8.md\":\"c43dde05\",\"docs_tiptap_tiptap-tutorial9.md\":\"87756e7f\",\"docs_tool_2023-summary.md\":\"755d6100\",\"docs_tool_2024-summary.md\":\"2a1cce81\",\"docs_tool_blog.md\":\"64ec1ccf\",\"docs_tool_chatgpt.md\":\"8e2df0c9\",\"docs_tool_chrome-extension.md\":\"57d32a7d\",\"docs_tool_chrome-override.md\":\"d65e0f9e\",\"docs_tool_debugging.md\":\"8fb11f47\",\"docs_tool_mac.md\":\"c6ee2bf9\",\"docs_tool_mock.md\":\"74f9a7c7\",\"docs_tool_moment-api.md\":\"38adcc55\",\"docs_tool_mvp.md\":\"fdea60fd\",\"docs_tool_np.md\":\"b543c308\",\"docs_tool_prosemirror-tables.md\":\"f6e08dd0\",\"docs_tool_vitepress-error.md\":\"2ee2a282\",\"docs_tool_vscode-web-error.md\":\"337bf4ca\",\"docs_tool_whistle.md\":\"b109331b\",\"docs_tool_yarn-certificate.md\":\"d0eb6817\",\"docs_vite_componentLibrary.md\":\"02ad8586\",\"docs_vite_create-vite.md\":\"cdc745d1\",\"docs_vite_vite-env.md\":\"ad5dc5b8\",\"docs_vite_vite-mulit-import.md\":\"2572ab8b\",\"docs_vite_vite-react-cli.md\":\"19060ef6\",\"docs_vite_vite-react.md\":\"0580ad39\",\"docs_vite_vite.md\":\"338a44f8\",\"docs_vite_vite3.0.md\":\"d8a753a4\",\"docs_vscode_vscode-markdown.md\":\"c7868144\",\"docs_vscode_vscode-todo.md\":\"efcf143d\",\"docs_vue_antd-form.md\":\"28b975e5\",\"docs_vue_antd-vue.md\":\"2ee30db8\",\"docs_vue_axios-token.md\":\"7bd2471e\",\"docs_vue_history-mode.md\":\"08f04107\",\"docs_vue_keepAlive.md\":\"b1e0a89f\",\"docs_vue_tjTodo.md\":\"be1cb209\",\"docs_vue_unplugin-auto-import.md\":\"7d3b3dbf\",\"docs_vue_vue-scoped-issue.md\":\"f623cc61\",\"docs_vue_vue3-jsx.md\":\"ebecc400\",\"docs_vue_vue3-lint-staged.md\":\"a3899a68\",\"docs_vue_vue3-unexpected-token.md\":\"3b42b0f5\",\"docs_webrtc_getstarted-webrtc.md\":\"8f0319e6\",\"docs_webrtc_livekit-start.md\":\"84706171\",\"docs_webrtc_webrtc-one.md\":\"d997d309\",\"docs_wechat_uniapp-start.md\":\"2d11d17e\",\"docs_wechat_wechat-app.md\":\"f78e8db6\",\"docs_work_360-develop.md\":\"65cc05d9\",\"docs_work_babel.md\":\"0142609a\",\"docs_work_click-event.md\":\"e4e5db17\",\"docs_work_contentEdit-div-insert.md\":\"918d3d6d\",\"docs_work_developer.md\":\"50a20831\",\"docs_work_echarts.md\":\"bcac5646\",\"docs_work_email-font.md\":\"fb57719e\",\"docs_work_excalidraw-use.md\":\"ce1cf4ff\",\"docs_work_excalidraw.md\":\"00486a76\",\"docs_work_font-loading-speed.md\":\"191e345c\",\"docs_work_g2-vs-echarts.md\":\"617ed50d\",\"docs_work_h5-app.md\":\"e30b5e12\",\"docs_work_html2canvas-bug.md\":\"fb617936\",\"docs_work_i18n.md\":\"c12013f7\",\"docs_work_image-type.md\":\"33b68d71\",\"docs_work_jenkins-start.md\":\"0cd2c738\",\"docs_work_js-long.md\":\"0a277f92\",\"docs_work_malformed.md\":\"cd0b34ff\",\"docs_work_mutationObserver.md\":\"3e384064\",\"docs_work_node16-docker.md\":\"bb539365\",\"docs_work_one-react-screenshots.md\":\"6793f4eb\",\"docs_work_plop-express.md\":\"9e44f7a1\",\"docs_work_puppeteer.md\":\"8708d72b\",\"docs_work_react-ref.md\":\"edfce596\",\"docs_work_report-2023.md\":\"6d7b4970\",\"docs_work_report-regular.md\":\"0fd5cdef\",\"docs_work_richeditor.md\":\"5e938191\",\"docs_work_sentry-cli-error.md\":\"86ea38f8\",\"docs_work_sentry-error.md\":\"248cb904\",\"docs_work_sentry.md\":\"dd0359c1\",\"docs_work_server-deploy.md\":\"a995d0d7\",\"docs_work_sse.md\":\"c6eab707\",\"docs_work_text-decoration.md\":\"d95a7284\",\"docs_work_unocss.md\":\"d0e122ea\",\"docs_work_white-board.md\":\"07f5734d\",\"docs_work_word-cpu.md\":\"5941c085\",\"docs_work_zero-width-spaces.md\":\"05b75917\"}")</script>
    <script type="module" async src="/blog/_assets/app.92810c57.js"></script>
  </body>
</html>