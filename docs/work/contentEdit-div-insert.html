<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>
      ç©éWebä¸­çš„â€œé€‰åŒºâ€å’Œâ€œèŒƒå›´â€ï¼Œä¸‹æ¬¡ä¸è¦å†ç™¾åº¦äº† | å­¦ä¹ ç¬”è®°
    </title>
    <meta name="description" content="A VitePress site">
    <link rel="stylesheet" href="/blog/_assets/style.85766dd9.css">
    <link rel="modulepreload" href="/blog/_assets/common-03e46d7f.js">
    <link rel="modulepreload" href="/blog/_assets/docs_work_contentEdit-div-insert.md.67d6dffb.lean.js">
    <link rel="modulepreload" href="/blog/_assets/app.bf0ae72d.js">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
    <meta name="keywords" content="ç¿”å­Blog">
    <link rel="icon" href="/blog/favicon.ico">
    <link rel="stylesheet" href="https://lib.baomitu.com/gitalk/1.7.0/gitalk.min.css">
    <script src="https://lib.baomitu.com/gitalk/1.7.0/gitalk.min.js"></script>
    <script src="https://lib.baomitu.com/axios/0.21.1/axios.js"></script>
    
  </head>
  <body>
    <div id="app"><!--[--><div id="containerColor" class="no-sidebar theme" data-v-afcf09d4><header class="navbar" data-v-afcf09d4><!--[--><a class="title" aria-label="å­¦ä¹ ç¬”è®°, back to home" href="/blog/"><img class="logo" src="/blog/favicon.ico" alt="logo"><span>å­¦ä¹ ç¬”è®°</span></a><div class="flex-grow"></div><nav class="nav-links hide-mobile"><!--[--><!--[--><div class="nav-item"><a class="nav-link" href="/blog/index.html" target="" rel="">ğŸ  é¦–é¡µ <!----></a></div><!--]--><!--[--><div class="nav-item"><a class="nav-link" href="/blog/more/docs.html" target="" rel="">ğŸ“… å½’æ¡£ <!----></a></div><!--]--><!--[--><div class="nav-item"><a class="nav-link" href="/blog/more/tags.html" target="" rel="">ğŸ“‚ åˆ†ç±» <!----></a></div><!--]--><!--]--><div id="docsearch"></div><!----><!----></nav><!--[--><!--]--><!--]--><div class="sidebar-button" data-v-afcf09d4><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div></header><aside class="" data-v-afcf09d4><!--[--><nav class="nav-links show-mobile"><!--[--><!--[--><div class="nav-item"><a class="nav-link" href="/blog/index.html" target="" rel="">ğŸ  é¦–é¡µ <!----></a></div><!--]--><!--[--><div class="nav-item"><a class="nav-link" href="/blog/more/docs.html" target="" rel="">ğŸ“… å½’æ¡£ <!----></a></div><!--]--><!--[--><div class="nav-item"><a class="nav-link" href="/blog/more/tags.html" target="" rel="">ğŸ“‚ åˆ†ç±» <!----></a></div><!--]--><!--]--><div id="docsearch"></div><!----><!----></nav><!--[--><!--]--><ul class="sidebar"><!--[--><!--]--></ul><!--[--><!--]--><!--]--></aside><!----><!-- TODO: make this button accessible --><div class="sidebar-mask" data-v-afcf09d4></div><main data-v-afcf09d4><!--[--><div class="content"><!--[--><!--]--><div class="md-header"><div class="md-title">ç©éWebä¸­çš„â€œé€‰åŒºâ€å’Œâ€œèŒƒå›´â€ï¼Œä¸‹æ¬¡ä¸è¦å†ç™¾åº¦äº†</div><span id="jinrishici-sentence">æ­£åœ¨åŠ è½½ä»Šæ—¥è¯—è¯....</span><div class="md-date">2023-09-05</div></div><ul class="catalog"><!--[--><li class="catalog-item"><a class="level level-2" href="#å‰è¨€">å‰è¨€</a><!----></li><li class="catalog-item"><a class="level level-2" href="#document-execcommand">document.execCommand</a><!----></li><li class="catalog-item"><a class="level level-2" href="#é€‰åŒº-èŒƒå›´">é€‰åŒº &amp; èŒƒå›´</a><!----></li><li class="catalog-item"><!----><a class="level level-3" href="#æ˜¯ä»€ä¹ˆ">æ˜¯ä»€ä¹ˆ</a></li><li class="catalog-item"><!----><a class="level level-3" href="#å¦‚ä½•è·å–">å¦‚ä½•è·å–</a></li><li class="catalog-item"><!----><a class="level level-3" href="#å¸¸ç”¨æ“ä½œ">å¸¸ç”¨æ“ä½œ</a></li><li class="catalog-item"><!----><a class="level level-3" href="#å®ç°æœ€åˆçš„éœ€æ±‚ï¼šè®°å½•é€‰åŒºå¹¶æ¢å¤">å®ç°æœ€åˆçš„éœ€æ±‚ï¼šè®°å½•é€‰åŒºå¹¶æ¢å¤</a></li><li class="catalog-item"><a class="level level-2" href="#æ€»ç»“">æ€»ç»“</a><!----></li><!--]--></ul><div><h2 id="å‰è¨€"><a class="header-anchor" href="#å‰è¨€" aria-hidden="true">#</a> å‰è¨€</h2><p>æœ€è¿‘æœ‰ä¸ªéœ€æ±‚ï¼Œä¸€ä¸ªçº¯æ–‡æœ¬çš„è¯„è®ºåŠŸèƒ½ï¼Œä½†æ˜¯è¯„è®ºä¸­éœ€è¦å®ç° <code>@ åŠŸèƒ½</code>ï¼Œç±»ä¼¼äº antd çš„ <a href="https://www.antdv.com/components/mentions-cn" target="_blank" rel="noopener noreferrer">Mentions</a>ç»„ä»¶ï¼Œä¸è¿‡åœ¨æ ·å¼ä¸Šæœ‰ç‰¹å®šçš„è¦æ±‚ã€‚å®è´¨å°±æ˜¯åœ¨ä¸€æ®µçº¯æ–‡æœ¬ä¸­ï¼Œæ·»åŠ ä¸€äº› html ç‰‡æ®µã€‚</p><p>é¦–å…ˆæƒ³åˆ°çš„æ˜¯å¼•å…¥ä¸€ä¸ªå¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œç±»ä¼¼ wangEditorã€quill ç­‰ï¼Œä½†æ˜¯ä¸€ä¸ªè¿™ä¹ˆå°çš„åŠŸèƒ½å¥½åƒå¹¶æ²¡æœ‰å¿…è¦ï¼Œä¸€æ˜¯éº»çƒ¦äºŒæ˜¯å¢åŠ åŒ…çš„ä½“ç§¯ã€‚äºæ˜¯å°±ç”¨ <code>contenteditable=&#39;true&#39;</code> ç”Ÿæˆä¸€ä¸ªå¯ç¼–è¾‘ div æ¥å®Œæˆã€‚</p><p>ä¸ºæ­¤å­¦ä¹ äº† <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Document/execCommand" target="_blank" rel="noopener noreferrer">document.execCommand</a> ä»¥åŠç”¨äºæ“ä½œé€‰åŒºçš„ <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Selection" target="_blank" rel="noopener noreferrer">Selection</a> å’Œ <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Range" target="_blank" rel="noopener noreferrer">Range</a> APIã€‚</p><h2 id="document-execcommand"><a class="header-anchor" href="#document-execcommand" aria-hidden="true">#</a> document.execCommand</h2><p>document.execCommand å¯ä»¥è¯´æ˜¯å¯Œæ–‡æœ¬ç¼–è¾‘å™¨çš„æ ¸å¿ƒ APIï¼Œå°½ç®¡ document.execCommand å·²ç»è¢« MDN ç»™åºŸå¼ƒäº†ã€‚</p><p>é€šè¿‡ document.execCommand å¯ä»¥å®ç°å¯¹å¯ç¼–è¾‘æ–‡æ¡£æ‰§è¡Œé¢„å®šä¹‰çš„å‘½ä»¤ï¼Œä¾‹å¦‚ï¼š</p><div class="language-javascript"><pre><code><span class="token comment">// åŠ ç²—</span>
document<span class="token punctuation">.</span><span class="token function">execCommand</span><span class="token punctuation">(</span><span class="token string">&#39;bold&#39;</span><span class="token punctuation">)</span>
<span class="token comment">// æ–œä½“</span>
document<span class="token punctuation">.</span><span class="token function">execCommand</span><span class="token punctuation">(</span><span class="token string">&#39;italic&#39;</span><span class="token punctuation">)</span>
<span class="token comment">// å­—ä½“</span>
document<span class="token punctuation">.</span><span class="token function">execCommand</span><span class="token punctuation">(</span><span class="token string">&#39;fontSize&#39;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>
</code></pre></div><p>å…³äº document.execCommand çš„æ›´å¤šåŠŸèƒ½å¯æŸ¥çœ‹<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Document/execCommand" target="_blank" rel="noopener noreferrer">MDN</a>ã€‚</p><p>ä¸‹é¢æˆ‘ä»¬å¯ä»¥æ¥ä¸€ä¸ªå®é™…çš„æ¡ˆä¾‹çœ‹çœ‹ï¼š</p><div class="language-js"><pre><code><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">&quot;en&quot;</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">&quot;UTF-8&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string">&quot;viewport&quot;</span> content<span class="token operator">=</span><span class="token string">&quot;width=device-width, initial-scale=1.0&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>title<span class="token operator">&gt;</span>Document<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>style type<span class="token operator">=</span><span class="token string">&quot;text/css&quot;</span><span class="token operator">&gt;</span>
      <span class="token punctuation">.</span>btn<span class="token operator">-</span>group <span class="token punctuation">{</span>
        <span class="token literal-property property">margin</span><span class="token operator">:</span> 15px <span class="token number">0</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token punctuation">.</span>btn <span class="token punctuation">{</span>
        <span class="token literal-property property">color</span><span class="token operator">:</span> #<span class="token number">494949</span><span class="token punctuation">;</span>
        background<span class="token operator">-</span>color<span class="token operator">:</span> #fff<span class="token punctuation">;</span>
        <span class="token literal-property property">border</span><span class="token operator">:</span> 1px solid #<span class="token number">494949</span><span class="token punctuation">;</span>
        border<span class="token operator">-</span>radius<span class="token operator">:</span> 5px<span class="token punctuation">;</span>
        <span class="token literal-property property">cursor</span><span class="token operator">:</span> pointer<span class="token punctuation">;</span>
        margin<span class="token operator">-</span>top<span class="token operator">:</span> 10px<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token punctuation">.</span>editor <span class="token punctuation">{</span>
        <span class="token literal-property property">border</span><span class="token operator">:</span> 1px solid #<span class="token number">424242</span><span class="token punctuation">;</span>
        <span class="token literal-property property">width</span><span class="token operator">:</span> 800px<span class="token punctuation">;</span>
        <span class="token literal-property property">height</span><span class="token operator">:</span> 500px<span class="token punctuation">;</span>
        <span class="token literal-property property">padding</span><span class="token operator">:</span> 8px 12px<span class="token punctuation">;</span>
        border<span class="token operator">-</span>radius<span class="token operator">:</span> 6px<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      a <span class="token punctuation">{</span>
        <span class="token literal-property property">cursor</span><span class="token operator">:</span> pointer<span class="token punctuation">;</span>
        text<span class="token operator">-</span>decoration<span class="token operator">:</span> none<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;btn-group&quot;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>input <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;btn&quot;</span> type<span class="token operator">=</span><span class="token string">&quot;button&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;æ’¤é”€&quot;</span> data<span class="token operator">-</span>commandid<span class="token operator">=</span><span class="token string">&quot;undo&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>input <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;btn&quot;</span> type<span class="token operator">=</span><span class="token string">&quot;button&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;æ¢å¤&quot;</span> data<span class="token operator">-</span>commandid<span class="token operator">=</span><span class="token string">&quot;redo&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>input <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;btn&quot;</span> type<span class="token operator">=</span><span class="token string">&quot;button&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;åŠ ç²—&quot;</span> data<span class="token operator">-</span>commandid<span class="token operator">=</span><span class="token string">&quot;bold&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>input <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;btn&quot;</span> type<span class="token operator">=</span><span class="token string">&quot;button&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;å€¾æ–œ&quot;</span> data<span class="token operator">-</span>commandid<span class="token operator">=</span><span class="token string">&quot;italic&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>input <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;btn&quot;</span> type<span class="token operator">=</span><span class="token string">&quot;button&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;ä¸‹åˆ’çº¿&quot;</span> data<span class="token operator">-</span>commandid<span class="token operator">=</span><span class="token string">&quot;underline&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>input <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;btn&quot;</span> type<span class="token operator">=</span><span class="token string">&quot;button&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;åˆ é™¤çº¿&quot;</span> data<span class="token operator">-</span>commandid<span class="token operator">=</span><span class="token string">&quot;strikeThrough&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>

      <span class="token operator">&lt;</span>input <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;btn&quot;</span> type<span class="token operator">=</span><span class="token string">&quot;button&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;è®¾ç½®å­—ä½“å¤§å°&quot;</span> data<span class="token operator">-</span>commandid<span class="token operator">=</span><span class="token string">&quot;fontSize&quot;</span> data<span class="token operator">-</span>value<span class="token operator">=</span><span class="token string">&quot;22&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>input <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;btn&quot;</span> type<span class="token operator">=</span><span class="token string">&quot;button&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;å­—ä½“èƒŒæ™¯è‰²&quot;</span> data<span class="token operator">-</span>commandid<span class="token operator">=</span><span class="token string">&quot;backColor&quot;</span> data<span class="token operator">-</span>value<span class="token operator">=</span><span class="token string">&quot;#FFFF02&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>input <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;btn&quot;</span> type<span class="token operator">=</span><span class="token string">&quot;button&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;å­—ä½“é¢œè‰²&quot;</span> data<span class="token operator">-</span>commandid<span class="token operator">=</span><span class="token string">&quot;foreColor&quot;</span> data<span class="token operator">-</span>value<span class="token operator">=</span><span class="token string">&quot;#FF0000&quot;</span>  <span class="token operator">/</span><span class="token operator">&gt;</span>

      <span class="token operator">&lt;</span>input <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;btn&quot;</span> type<span class="token operator">=</span><span class="token string">&quot;button&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;é“¾æ¥&quot;</span> data<span class="token operator">-</span>commandid<span class="token operator">=</span><span class="token string">&quot;createLink&quot;</span> data<span class="token operator">-</span>value<span class="token operator">=</span><span class="token string">&quot;https://www.baidu.com/&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>input <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;btn&quot;</span> type<span class="token operator">=</span><span class="token string">&quot;button&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;æœ‰åºåˆ—è¡¨&quot;</span> data<span class="token operator">-</span>commandid<span class="token operator">=</span><span class="token string">&quot;insertOrderedList&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>input <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;btn&quot;</span> type<span class="token operator">=</span><span class="token string">&quot;button&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;æ— åºåˆ—è¡¨&quot;</span> data<span class="token operator">-</span>commandid<span class="token operator">=</span><span class="token string">&quot;insertUnorderedList&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>

      <span class="token operator">&lt;</span>input <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;btn&quot;</span> type<span class="token operator">=</span><span class="token string">&quot;button&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;å‰ªåˆ‡é€‰ä¸­æ–‡å­—&quot;</span> data<span class="token operator">-</span>commandid<span class="token operator">=</span><span class="token string">&quot;cut&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>input <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;btn&quot;</span> type<span class="token operator">=</span><span class="token string">&quot;button&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;å¤åˆ¶é€‰ä¸­æ–‡å­—&quot;</span> data<span class="token operator">-</span>commandid<span class="token operator">=</span><span class="token string">&quot;copy&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>input <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;btn&quot;</span> type<span class="token operator">=</span><span class="token string">&quot;button&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;åˆ é™¤é€‰ä¸­æ–‡å­—&quot;</span> data<span class="token operator">-</span>commandid<span class="token operator">=</span><span class="token string">&quot;delete&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>

      <span class="token operator">&lt;</span>input <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;btn&quot;</span> type<span class="token operator">=</span><span class="token string">&quot;button&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;æ¸…é™¤æ ¼å¼&quot;</span> data<span class="token operator">-</span>commandid<span class="token operator">=</span><span class="token string">&quot;removeFormat&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;editor&quot;</span> contenteditable<span class="token operator">=</span><span class="token string">&quot;true&quot;</span> width<span class="token operator">=</span><span class="token string">&quot;800px&quot;</span> height<span class="token operator">=</span><span class="token string">&quot;500px&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/javascript&quot;</span><span class="token operator">&gt;</span>
      window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> <span class="token function-variable function">handleClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">const</span> target <span class="token operator">=</span> event<span class="token punctuation">.</span>target
          <span class="token keyword">const</span> <span class="token punctuation">{</span> commandid<span class="token punctuation">,</span> value <span class="token punctuation">}</span> <span class="token operator">=</span> target<span class="token punctuation">.</span>dataset
          document<span class="token punctuation">.</span><span class="token function">execCommand</span><span class="token punctuation">(</span>commandid<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">const</span> btnGroup <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&#39;.btn-group&#39;</span><span class="token punctuation">)</span>
        <span class="token comment">// äº‹ä»¶ä»£ç†ï¼Œç»™æŒ‰é’®çˆ¶çº§ç»‘å®šç‚¹å‡»äº‹ä»¶</span>
        btnGroup<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;click&#39;</span><span class="token punctuation">,</span> handleClick<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span>
</code></pre></div><p><a href="https://codepen.io/wang1xiang/pen/qBLpRVJ" target="_blank" rel="noopener noreferrer">ğŸ‘‰ğŸ» é¢„è§ˆåœ°å€</a></p><p>é€šè¿‡ä½“éªŒä¸Šé¢çš„ Demo ä¹‹åï¼Œæˆ–è®¸ä½ ä¼šå‘ç°ä¸€ä¸ªé—®é¢˜ï¼Ÿé‚£å°±æ˜¯<strong>æ¯æ¬¡ç‚¹å®ŒåŠŸèƒ½æŒ‰é’®åæ–‡æœ¬æ¡†å¤±ç„¦ï¼Œéœ€è¦å†æ¬¡ç‚¹å‡»ä½¿å…¶èšç„¦</strong>ã€‚</p><p>è¿™ç‚¹å°±æ¯”è¾ƒæ¶å¿ƒäº†ï¼Œéš¾ä¸æˆè¦æˆ‘æ¯æ¬¡ç‚¹å‡»æ–‡æœ¬æ¡†æ‰è¡Œ ğŸ˜”ã€‚</p><p>é‚£ä¹ˆä½¿ç”¨ä»€ä¹ˆæ–¹æ³•èƒ½å¤Ÿåœ¨ç‚¹å‡»ç¼–è¾‘å™¨å¤–éƒ¨åŠŸèƒ½æŒ‰é’®æ—¶ç»§ç»­è®©ç¼–è¾‘å™¨è·å–ç„¦ç‚¹å‘¢ï¼Ÿ</p><p>å¥½åŠï¼Œåªéœ€è¦åœ¨ç‚¹å‡»æŒ‰é’®æ‰§è¡Œ execCommand å‘½ä»¤çš„åŒæ—¶è°ƒç”¨ <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/focus" target="_blank" rel="noopener noreferrer">focus</a> æ–¹æ³•å³å¯ã€‚</p><div class="language-js"><pre><code><span class="token keyword">const</span> <span class="token function-variable function">handleClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">item</span><span class="token operator">:</span> ToolType</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> commandId<span class="token punctuation">,</span> value <span class="token punctuation">}</span> <span class="token operator">=</span> item
  editorRef<span class="token punctuation">.</span>value<span class="token operator">?.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  document<span class="token punctuation">.</span><span class="token function">execCommand</span><span class="token punctuation">(</span>commandId<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>é‚£ä¹ˆé™¤äº† focus ä¹‹å¤–ï¼Œè¿˜æœ‰å…¶ä»–çš„æ–¹æ³•å—ï¼Ÿå¸¦ç€é—®é¢˜ï¼Œæˆ‘ä»¬æ¥å­¦ä¹ ä¸€ä¸‹ <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Selection" target="_blank" rel="noopener noreferrer">Selection</a>ï¼ˆé€‰åŒºï¼‰å’Œ<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Range" target="_blank" rel="noopener noreferrer">Range</a>ï¼ˆèŒƒå›´ï¼‰è¿™ä¸¤ä¸ªå®¶ä¼™ã€‚</p><h2 id="é€‰åŒº-èŒƒå›´"><a class="header-anchor" href="#é€‰åŒº-èŒƒå›´" aria-hidden="true">#</a> é€‰åŒº &amp; èŒƒå›´</h2><h3 id="æ˜¯ä»€ä¹ˆ"><a class="header-anchor" href="#æ˜¯ä»€ä¹ˆ" aria-hidden="true">#</a> æ˜¯ä»€ä¹ˆ</h3><p><img src="/blog/_assets/selection-range.21292089.png" alt="selection-range"></p><p>ä¸Šé¢æ˜¯æˆ‘åœ¨ Firefox æµè§ˆå™¨ä¸­çš„ demoï¼Œ<strong>èŒƒå›´æŒ‡çš„å°±æ˜¯é¡µé¢ä¸Šçš„æ¯ä¸€ä¸ªé€‰ä¸­èŠ‚ç‚¹æˆ–èŠ‚ç‚¹éƒ¨åˆ†æ–‡å­—</strong>ï¼Œå³ä¸Šå›¾ä¸­çš„æ¯ä¸ªçº¢æ¡†å†…çš„å†…å®¹ï¼ˆåªæœ‰ Firefox å¯ä»¥é€‰æ‹©å¤šä¸ªèŒƒå›´ï¼Œå…¶ä»–æµè§ˆå™¨åªèƒ½é€‰æ‹©å•ä¸ªèŒƒå›´ï¼‰ï¼Œæ¯ä¸ªéƒ½æœ‰èµ·å§‹ä½ç½®å’Œç»ˆæ­¢ä½ç½®ï¼Œ<strong>é€‰åŒºæŒ‡çš„å°±æ˜¯æ‰€æœ‰èŒƒå›´çš„é›†åˆ</strong>ã€‚</p><p>æˆ‘ä»¬å†æ¥çœ‹ä¸‹ MDN ä¸­çš„ä»‹ç»ï¼š</p><h4 id="range-èŒƒå›´"><a class="header-anchor" href="#range-èŒƒå›´" aria-hidden="true">#</a> Range èŒƒå›´</h4><ul><li>èŒƒå›´æŒ‡çš„æ˜¯æ–‡æ¡£ä¸­è¿ç»­çš„ä¸€éƒ¨åˆ†ã€‚ä¸€ä¸ªèŒƒå›´åŒ…æ‹¬æ•´ä¸ªèŠ‚ç‚¹ï¼Œä¹Ÿå¯ä»¥åŒ…å«èŠ‚ç‚¹çš„ä¸€éƒ¨åˆ†ï¼Œä¾‹å¦‚æ–‡æœ¬èŠ‚ç‚¹çš„ä¸€éƒ¨åˆ†ï¼›</li><li>é€šå¸¸åªèƒ½é€‰æ‹©ä¸€ä¸ªèŒƒå›´ï¼Œä½†åœ¨ Firefox æµè§ˆå™¨ä¸­å¯ä»¥é€‰æ‹©å¤šä¸ªèŒƒå›´ï¼›</li><li>Range å¯¹è±¡ä¹Ÿèƒ½é€šè¿‡ DOM åˆ›å»ºã€å¢åŠ ã€åˆ å‡ã€‚</li></ul><h4 id="selection-é€‰åŒº"><a class="header-anchor" href="#selection-é€‰åŒº" aria-hidden="true">#</a> Selection é€‰åŒº</h4><ul><li>è¡¨ç¤ºç”¨æˆ·é€‰æ‹©çš„æ–‡æœ¬èŒƒå›´æˆ–å…‰æ ‡çš„å½“å‰ä½ç½®ï¼Œ<strong>å…‰æ ‡ä¹Ÿæ˜¯ä¸€ç§ç‰¹æ®Šçš„é€‰åŒº</strong>ï¼›</li><li>ä»£è¡¨é¡µé¢ä¸­çš„æ–‡æœ¬é€‰åŒºï¼Œå¯èƒ½æ¨ªè·¨å¤šä¸ªå…ƒç´ ï¼›</li><li><strong>é€‰æ‹©çš„èµ·ç‚¹ anchorNode è¢«ç§°ä¸ºé”šç‚¹ï¼ˆanchorï¼‰ï¼Œç»ˆç‚¹ focusNode è¢«ç§°ä¸ºç„¦ç‚¹ï¼ˆfocusï¼‰</strong></li></ul><h3 id="å¦‚ä½•è·å–"><a class="header-anchor" href="#å¦‚ä½•è·å–" aria-hidden="true">#</a> å¦‚ä½•è·å–</h3><h4 id="è·å–é€‰åŒº"><a class="header-anchor" href="#è·å–é€‰åŒº" aria-hidden="true">#</a> è·å–é€‰åŒº</h4><p>é€šè¿‡<code>window.getSelection()</code>å³å¯è·å–åˆ° Selection å¯¹è±¡ï¼Œå¦‚ä¸‹ï¼ˆç¬¬ä¸€å¼ ä¸º Chrome æµè§ˆå™¨ï¼Œç¬¬äºŒå¼ ä¸º Firefox æµè§ˆå™¨ï¼‰ï¼š</p><p><strong>Chrome</strong></p><p><img src="/blog/_assets/window-getSelection.22c006b6.png" alt="window-getSelection"></p><p><strong>Firefox</strong></p><p><img src="/blog/_assets/window-getSelection-firefox.c6f2313b.png" alt="window-getSelection-firefox"></p><p>å¯ä»¥çœ‹åˆ° Chrome æµè§ˆå™¨å’Œ Firefox è¿”å›çš„ç»“æ„ç•¥æœ‰å·®å¼‚ï¼ŒbaseNode å’Œ extentNode ä»…åœ¨ Chrome æµè§ˆå™¨ä¸­æœ‰ï¼Œå¹¶ä¸”ç›¸å…³çš„å®šä¹‰åœ¨ MDN ä¸­å¹¶ä¸èƒ½æŸ¥åˆ°ã€‚</p><p>é€šè¿‡<a href="https://stackoverflow.com/questions/27241281/what-is-anchornode-basenode-extentnode-and-focusnode-in-the-object-returned" target="_blank" rel="noopener noreferrer">è¿™ä¸ªå›ç­”</a>äº†è§£åˆ°ï¼š<strong>baseNode å’Œ extentNode åˆ†åˆ«æ˜¯ anchorNode å’Œ focusNode çš„åˆ«å</strong>ã€‚</p><p>Selection æ•°æ®æ ¼å¼å¦‚ä¸‹ï¼š</p><ul><li><a href="https://developer.mozilla.org/docs/Web/API/Selection/anchorNode" target="_blank" rel="noopener noreferrer">anchorNode</a>: é€‰åŒºå¼€å§‹ä½ç½®æ‰€å±çš„èŠ‚ç‚¹å…ƒç´ ï¼›</li><li><a href="https://developer.mozilla.org/docs/Web/API/Selection/anchorOffset" target="_blank" rel="noopener noreferrer">anchorOffset</a>: ä»£è¡¨é€‰åŒºèµ·ç‚¹åœ¨ anchorNode ä¸­çš„åç§»é‡ï¼Œä¾‹å¦‚é€‰åŒºä» anchorNode çš„ç¬¬ä¸€ä¸ªå­—ç¬¦å¼€å§‹ï¼Œåˆ™è¿”å› 0ï¼›</li><li><a href="https://developer.mozilla.org/docs/Web/API/Selection/focusNode" target="_blank" rel="noopener noreferrer">focusNode</a>: é€‰åŒºç»“æŸä½ç½®æ‰€å±çš„èŠ‚ç‚¹å…ƒç´ ï¼›</li><li><a href="https://developer.mozilla.org/docs/Web/API/Selection/focusOffset" target="_blank" rel="noopener noreferrer">focusOffset</a>: ä»£è¡¨é€‰åŒºç»ˆç‚¹åœ¨ focusNode ä¸­çš„åç§»é‡ï¼Œä¾‹å¦‚é€‰åŒºåœ¨ focusNode çš„ç¬¬ä¸€ä¸ªå­—ç¬¦å‰ç»“æŸï¼Œåˆ™è¿”å› 0ï¼›</li><li><a href="https://developer.mozilla.org/docs/Web/API/Selection/isCollapsed" target="_blank" rel="noopener noreferrer">isCollapsed</a>: æœªé€‰æ‹©ä»»ä½•å†…å®¹ï¼ˆç©ºèŒƒå›´ï¼‰æˆ–ä¸å­˜åœ¨çš„é€‰å–ä¸º trueï¼Œä¾‹å¦‚å…‰æ ‡çš„ isCollapsed ä¸º trueï¼›</li><li><a href="https://developer.mozilla.org/docs/Web/API/Selection/rangeCount" target="_blank" rel="noopener noreferrer">rangeCount</a>: è¿”å›é€‰å–ä¸­èŒƒå›´çš„æ•°é‡ï¼Œé»˜è®¤æ˜¯ 1ï¼ŒFirefox æµè§ˆå™¨è¿”å›å¯èƒ½å¤§äº 1ï¼›</li><li><a href="https://developer.mozilla.org/docs/Web/API/Selection/type" target="_blank" rel="noopener noreferrer">type</a>: å½“å‰é€‰æ‹©ç±»å‹ï¼š <ul><li>None: å½“å‰æ²¡æœ‰é€‰æ‹©</li><li>Caret: é€‰åŒºå·²æŠ˜å ï¼ˆå³ å…‰æ ‡åœ¨å­—ç¬¦ä¹‹é—´ï¼Œå¹¶æœªå¤„äºé€‰ä¸­çŠ¶æ€ï¼‰</li><li>Range: é€‰æ‹©çš„æ˜¯ä¸€ä¸ªèŒƒå›´ã€‚</li></ul></li></ul><h4 id="è·å–èŒƒå›´"><a class="header-anchor" href="#è·å–èŒƒå›´" aria-hidden="true">#</a> è·å–èŒƒå›´</h4><p>æˆ‘ä»¬åœ¨ä¸Šé¢è¯´äº†é€‰åŒºæ˜¯æ‰€æœ‰èŒƒå›´çš„é›†åˆï¼Œé‚£ä¹ˆé€‰åŒº Selection ä¸€å®šæ˜¯æä¾›äº†è·å– Range çš„ç›¸å…³æ–¹æ³•ï¼Œ<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Selection#%E6%96%B9%E6%B3%95" target="_blank" rel="noopener noreferrer">ğŸ«µ æ¥æŸ¥æˆ‘å‘€</a>ã€‚</p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Selection/getRangeAt" target="_blank" rel="noopener noreferrer">selection.getRangeAt</a> ï¼šç”¨äºè·å–å½“å‰é€‰åŒºå†…çš„ Range å¯¹è±¡ï¼Œä¼ å…¥ä¸€ä¸ªç´¢å¼•ï¼Œè¡¨ç¤ºéœ€è¦è·å–é€‰åŒºä¸­çš„ç¬¬å‡ ä¸ªèŒƒå›´ï¼Œä¸€èˆ¬ä¼  0 å³å¯ï¼Œåªæœ‰åœ¨ Firefox æµè§ˆå™¨ä¸­æ‰ä¼šæœ‰å¤šä¸ªèŒƒå›´ã€‚</p><div class="language-js"><pre><code><span class="token keyword">const</span> range <span class="token operator">=</span> selection<span class="token operator">?.</span><span class="token function">getRangeAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
</code></pre></div><p><img src="/blog/_assets/window-getSelection-getRangeAt.3c7c38cd.png" alt="window-getSelection-getRangeAt"> Range å¯¹è±¡åœ¨ Chrome æµè§ˆå™¨å’Œ Firefox æµè§ˆå™¨çš„è¾“å‡ºç»“æœä¸€è‡´ï¼Œéƒ½åŒ…å«ä¸€ä¸‹å¯¹è±¡ï¼š</p><ul><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Range/collapsed" target="_blank" rel="noopener noreferrer">collapsed</a>ï¼šè¡¨ç¤º Range çš„èµ·å§‹ä½ç½®å’Œç»ˆæ­¢ä½ç½®æ˜¯å¦ç›¸åŒï¼Œå¦‚å…‰æ ‡ä¸º trueï¼›</li><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Range/commonAncestorContainer" target="_blank" rel="noopener noreferrer">commonAncestorContainer</a>ï¼šè¡¨ç¤ºèŒƒå›´å†…çš„æ‰€æœ‰èŠ‚ç‚¹å®ƒä»¬æœ€è¿‘çš„å…±åŒç¥–å…ˆèŠ‚ç‚¹ï¼›</li><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Range/endContainer" target="_blank" rel="noopener noreferrer">endContainer</a>ï¼šè¡¨ç¤ºåŒ…å« Range ç»ˆç‚¹çš„èŠ‚ç‚¹ï¼›</li><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Range/endOffset" target="_blank" rel="noopener noreferrer">endOffset</a>ï¼šè¡¨ç¤º Range ç»ˆç‚¹åœ¨ endContainer ä¸­çš„ä½ç½®çš„åç§»;</li><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Range/startContainer" target="_blank" rel="noopener noreferrer">startContainer</a>ï¼šè¡¨ç¤ºåŒ…å« Range å¼€å§‹çš„èŠ‚ç‚¹ï¼›</li><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Range/startOffset" target="_blank" rel="noopener noreferrer">startOffset</a>ï¼šè¡¨ç¤º Range åœ¨ startContainer ä¸­çš„ä½ç½®çš„åç§»ã€‚</li></ul><h3 id="å¸¸ç”¨æ“ä½œ"><a class="header-anchor" href="#å¸¸ç”¨æ“ä½œ" aria-hidden="true">#</a> å¸¸ç”¨æ“ä½œ</h3><p>å› ä¸º Range å’Œ Seleciton ç›¸å…³çš„ API å¾ˆå¤šï¼Œè¿™é‡Œæˆ‘ä»¬åªéœ€è¦è®°ä½ä¸€äº›å¸¸ç”¨çš„å³å¯ï¼Œå…¶ä»–çš„ç­‰ç”¨åˆ°çš„æ—¶å€™å†å»æŸ¥æ–‡æ¡£å³å¯ã€‚</p><p><a href="https://github.com/wang1xiang/simple-editor" target="_blank" rel="noopener noreferrer">ğŸ‘‰ğŸ» æœ¬æ–‡ä»£ç åœ°å€</a></p><p>åœ¨ç»§ç»­å¾€ä¸‹å­¦ä¹ ä¹‹å‰ï¼Œè¯·å…ˆæ‰“å¼€<a href="https://wang1xiang.github.io/simple-editor/" target="_blank" rel="noopener noreferrer">ğŸ‘‰ğŸ» åœ¨çº¿ä½“éªŒåœ°å€</a>ï¼Œæ­é…ä½¿ç”¨ï¼Œæ•ˆæœæ›´ä½³å“¦ ğŸ˜¯</p><h4 id="è·å–å½“å‰é€‰åŒºå†…å®¹"><a class="header-anchor" href="#è·å–å½“å‰é€‰åŒºå†…å®¹" aria-hidden="true">#</a> è·å–å½“å‰é€‰åŒºå†…å®¹</h4><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Selection/toString" target="_blank" rel="noopener noreferrer">selection.toString</a> è¿”å›å½“å‰é€‰åŒºçš„çº¯æ–‡æœ¬å†…å®¹ï¼Œ<a href="https://developer.mozilla.org/en-US/docs/Web/API/Range/toString" target="_blank" rel="noopener noreferrer">range.toString</a> è¿”å›æŸä¸ªèŒƒå›´çš„çº¯æ–‡æœ¬å†…å®¹ã€‚</p><div class="language-js"><pre><code>selection<span class="token operator">?.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// æˆ–è€…</span>
selection<span class="token operator">?.</span><span class="token function">getRangeAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="åˆ é™¤å½“å‰é€‰åŒº"><a class="header-anchor" href="#åˆ é™¤å½“å‰é€‰åŒº" aria-hidden="true">#</a> åˆ é™¤å½“å‰é€‰åŒº</h4><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Selection/removeRange" target="_blank" rel="noopener noreferrer">selection.removeRange</a> å’Œ <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Selection/removeAllRanges" target="_blank" rel="noopener noreferrer">selection.removeAllRanges</a> éƒ½å¯ä»¥ç”¨äºåˆ é™¤é€‰åŒºï¼Œä¸åŒçš„æ˜¯ removeRange åˆ é™¤æ—¶éœ€è¦æŒ‡å®šç¬¬å‡ ä¸ªèŒƒå›´ï¼Œä¸‹é¢ä¸¤ç§æ–¹æ³•å®ç°çš„æ•ˆæœä¸€è‡´ã€‚</p><div class="language-js"><pre><code><span class="token keyword">const</span> count <span class="token operator">=</span> selection<span class="token operator">?.</span>rangeCount <span class="token operator">||</span> <span class="token number">0</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span> count<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> range <span class="token operator">=</span> selection<span class="token operator">?.</span><span class="token function">getRangeAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">as</span> Range
  selection<span class="token operator">?.</span><span class="token function">removeRange</span><span class="token punctuation">(</span>range<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// or</span>
selection<span class="token operator">?.</span><span class="token function">removeAllRanges</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>åœ¨ä¸€äº›æ“ä½œå‰éƒ½éœ€è¦å…ˆåˆ é™¤é€‰åŒº</strong>ï¼Œç›´æ¥ä½¿ç”¨ removeAllRanges å³å¯ã€‚</p><h4 id="æ·»åŠ é€‰åŒº"><a class="header-anchor" href="#æ·»åŠ é€‰åŒº" aria-hidden="true">#</a> æ·»åŠ é€‰åŒº</h4><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Selection/addRange" target="_blank" rel="noopener noreferrer">selection.addRange</a> æ–¹æ³•å¯ä»¥å°†ä¸€ä¸ªæ–°çš„ range æ·»åŠ åˆ°é€‰åŒºä¸­ã€‚æ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li><p>ä½¿ç”¨ document.createRange æ–¹æ³•åˆ›å»ºä¸€ä¸ª Range å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ new Range åˆ›å»ºï¼›</p></li><li><p>å°†æŒ‡å®šèŒƒå›´æ·»åŠ åˆ°é€‰åŒºä¸­ï¼›</p><p>æŒ‡å®šèŒƒå›´ï¼š<strong>å³é€‰åŒºçš„èµ·å§‹èŒƒå›´å’Œç»ˆæ­¢èŒƒå›´</strong>ï¼Œæœ‰å¤šç§æ–¹æ³•å¯ä»¥å®ç°ï¼š</p><ul><li>ä½¿ç”¨ <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Range/selectNode" target="_blank" rel="noopener noreferrer">range.selectNode</a> æˆ– <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Range/selectNodeContents" target="_blank" rel="noopener noreferrer">range.selectNodeContents</a> æ–¹æ³•å°† DOM èŠ‚ç‚¹æ·»åŠ åˆ° Range ä¸­ï¼Œè¿™æ ·é€‰ä¸­çš„å°±æ˜¯ä¼ å…¥çš„ DOM å…ƒç´ ï¼›</li><li>ä½¿ç”¨ <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Range/setStart" target="_blank" rel="noopener noreferrer">range.setStart</a> å’Œ <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Range/setEnd" target="_blank" rel="noopener noreferrer">range.setEnd</a> æ·»åŠ èŒƒå›´çš„è¾¹ç•Œï¼›</li><li>ä½¿ç”¨ <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Range/setStartBefore" target="_blank" rel="noopener noreferrer">range.setStartBefore</a>/<a href="https://developer.mozilla.org/en-US/docs/Web/API/Range/setEndBefore" target="_blank" rel="noopener noreferrer">srange.etEndBefore</a> æˆ– <a href="https://developer.mozilla.org/en-US/docs/Web/API/Range/setStartAfter" target="_blank" rel="noopener noreferrer">range.setStartAfter</a>/<a href="https://developer.mozilla.org/en-US/docs/Web/API/Range/setEndAfter" target="_blank" rel="noopener noreferrer">range.setEndAfter</a> æ¥æ·»åŠ èŒƒå›´çš„è¾¹ç•Œã€‚</li></ul></li><li><p>ç§»é™¤å·²æœ‰é€‰åŒºï¼Œé€šè¿‡å°è¯•ï¼Œ<strong>å¦‚æœä¸ç§»é™¤å½“å‰é€‰åŒºçš„è¯ï¼Œé™¤ Firefox å¤–çš„æ‰€æœ‰æµè§ˆå™¨éƒ½å°†å¿½ç•¥æ–°èŒƒå›´</strong>ï¼›</p></li><li><p>æœ€åå°† range èŒƒå›´æ·»åŠ åˆ°é€‰åŒºä¸­ã€‚</p></li></ol><p>ä¸‹é¢è¿™ä¸ª Demo åˆ†åˆ«ç”¨ selectNodeã€setStart å’Œ setStartBefore è¿™å‡ ç§æ–¹æ³•å®ç°ã€‚</p><div class="language-js"><pre><code><span class="token keyword">const</span> editor <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&#39;.editor&#39;</span><span class="token punctuation">)</span><span class="token operator">!</span>
<span class="token keyword">const</span> range <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createRange</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 1. selectNode é€‰ä¸­ç¬¬nä¸ªå­èŠ‚ç‚¹</span>
<span class="token comment">// const sizeStr = window.prompt(&#39;é€‰æ‹©ç¬¬å‡ ä¸ªå­èŠ‚ç‚¹&#39;, &#39;1&#39;) || &#39;1&#39;</span>
<span class="token comment">// const size = parseInt(sizeStr)</span>
<span class="token comment">// if (isNaN(size)) return</span>
<span class="token comment">// range.selectNode(editor.childNodes[size])</span>

<span class="token comment">// 2. setStart/setEnd é€‰ä¸­ç¬¬nä¸ªå­èŠ‚ç‚¹åˆ°ç¬¬mä¸ªå­èŠ‚ç‚¹</span>
<span class="token comment">// const startOffsetStr = window.prompt(&#39;ä»ç¬¬å‡ ä¸ªå­èŠ‚ç‚¹å¼€å§‹&#39;, &#39;1&#39;) || &#39;1&#39;</span>
<span class="token comment">// const endOffsetStr = window.prompt(&#39;åˆ°ç¬¬å‡ ä¸ªå­èŠ‚ç‚¹ç»“æŸ&#39;, &#39;5&#39;) || &#39;1&#39;</span>
<span class="token comment">// const startOffset = parseInt(startOffsetStr)</span>
<span class="token comment">// const endOffset = parseInt(endOffsetStr)</span>
<span class="token comment">// if (isNaN(startOffset) || isNaN(endOffset)) return</span>
<span class="token comment">// range.setStart(editor, startOffset)</span>
<span class="token comment">// range.setEnd(editor, endOffset)</span>

<span class="token comment">// 3. setStart/setEnd é€‰ä¸­ç¬¬nä¸ªå­èŠ‚ç‚¹çš„å¼€å§‹åˆ°ç»“æŸèŒƒå›´</span>
<span class="token comment">// const n = 1</span>
<span class="token comment">// const startOffsetStr = window.prompt(&#39;ä»ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹çš„ç¬¬å‡ ä¸ªä½ç½®å¼€å§‹&#39;, &#39;1&#39;) || &#39;1&#39;</span>
<span class="token comment">// const endOffsetStr = window.prompt(&#39;åˆ°ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹çš„ç¬¬å‡ ä¸ªä½ç½®ç»“æŸ&#39;, &#39;5&#39;) || &#39;1&#39;</span>
<span class="token comment">// const startOffset = parseInt(startOffsetStr)</span>
<span class="token comment">// const endOffset = parseInt(endOffsetStr)</span>
<span class="token comment">// if (isNaN(startOffset) || isNaN(endOffset)) return</span>
<span class="token comment">// range.setStart(editor.childNodes[n], startOffset)</span>
<span class="token comment">// range.setEnd(editor.childNodes[n], endOffset)</span>

<span class="token comment">// 4. setStartBefore/setEndBefore é€‰ä¸­ç¬¬nä¸ªå­èŠ‚ç‚¹åˆ°ç¬¬mä¸ªå­èŠ‚ç‚¹</span>
<span class="token keyword">const</span> startOffsetStr <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">prompt</span><span class="token punctuation">(</span><span class="token string">&#39;ä»ç¬¬å‡ ä¸ªå­èŠ‚ç‚¹å‰å¼€å§‹&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;1&#39;</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">&#39;1&#39;</span>
<span class="token keyword">const</span> endOffsetStr <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">prompt</span><span class="token punctuation">(</span><span class="token string">&#39;åˆ°ç¬¬å‡ ä¸ªå­èŠ‚ç‚¹æœ«å°¾ç»“æŸ&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;5&#39;</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">&#39;1&#39;</span>
<span class="token keyword">const</span> startOffset <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>startOffsetStr<span class="token punctuation">)</span>
<span class="token keyword">const</span> endOffset <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>endOffsetStr<span class="token punctuation">)</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isNaN</span><span class="token punctuation">(</span>startOffset<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token function">isNaN</span><span class="token punctuation">(</span>endOffset<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span>
range<span class="token punctuation">.</span><span class="token function">setStartBefore</span><span class="token punctuation">(</span>editor<span class="token punctuation">.</span>childNodes<span class="token punctuation">[</span>startOffset<span class="token punctuation">]</span><span class="token punctuation">)</span>
range<span class="token punctuation">.</span><span class="token function">setEndBefore</span><span class="token punctuation">(</span>editor<span class="token punctuation">.</span>childNodes<span class="token punctuation">[</span>endOffset<span class="token punctuation">]</span><span class="token punctuation">)</span>

selection<span class="token operator">?.</span><span class="token function">removeAllRanges</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
selection<span class="token operator">?.</span><span class="token function">addRange</span><span class="token punctuation">(</span>range<span class="token punctuation">)</span>
</code></pre></div><p>åœ¨ä¸Šé¢ä»£ç ä¸­ï¼ŒsetStart/setEnd æœ‰ä¸¤ç§ä¸åŒçš„æ•ˆæœ:</p><ol><li><p><strong>ä½œç”¨äºå…ƒç´ èŠ‚ç‚¹æ—¶</strong>ï¼ˆä¸Šè¿° 2. setStart/setEnd é€‰ä¸­ç¬¬ n ä¸ªå­èŠ‚ç‚¹åˆ°ç¬¬ m ä¸ªå­èŠ‚ç‚¹ï¼‰</p><p>æ­¤æ—¶ node è®¾ç½®ä¸º editorï¼Œå³æ•´ä¸ªå¯Œæ–‡æœ¬ï¼Œé‚£ä¹ˆæ­¤æ—¶è®¾å®šçš„ offset å°±æ˜¯å°±æ˜¯å­å…ƒç´ çš„ä½ç½®ã€‚</p></li><li><p><strong>ä½œç”¨äºæ–‡æœ¬èŠ‚ç‚¹æ—¶</strong>ï¼ˆä¸Šè¿° 3. setStart/setEnd é€‰ä¸­ç¬¬ n ä¸ªå­èŠ‚ç‚¹çš„å¼€å§‹åˆ°ç»“æŸèŒƒå›´ï¼‰</p><p>æ­¤æ—¶ node è®¾ç½®ä¸º <code>editor.childNodes[1]</code>, å³ç¬¬ä¸€æ®µè¯ï¼Œé‚£ä¹ˆæ­¤æ—¶è®¾å®šçš„ offset æ˜¯å…¶æ–‡æœ¬ä¸­çš„ä½ç½®ã€‚</p></li></ol><p>MDN ä¸Šæ˜¯è¿™æ ·è§£é‡Šçš„ï¼š</p><blockquote><p>å¦‚æœèµ·å§‹èŠ‚ç‚¹ç±»å‹æ˜¯ Textã€Comment æˆ– CDATASection ä¹‹ä¸€ï¼Œé‚£ä¹ˆ startOffset æŒ‡çš„æ˜¯ä»èµ·å§‹èŠ‚ç‚¹ç®—èµ·å­—ç¬¦çš„åç§»é‡ã€‚å¯¹äºå…¶ä»– Node ç±»å‹èŠ‚ç‚¹ï¼ŒstartOffset æ˜¯æŒ‡ä»èµ·å§‹ç»“ç‚¹å¼€å§‹ç®—èµ·å­èŠ‚ç‚¹çš„åç§»é‡ã€‚</p></blockquote><p><img src="/blog/_assets/window-getselection-selection.0de5ed27.gif" alt="window-getSelection-selection"></p><h4 id="ä¿®æ”¹é€‰åŒº"><a class="header-anchor" href="#ä¿®æ”¹é€‰åŒº" aria-hidden="true">#</a> ä¿®æ”¹é€‰åŒº</h4><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Selection/modify" target="_blank" rel="noopener noreferrer">selection.modify</a>ï¼šå¯ä»¥ç”¨æ¥ä¿®æ”¹é€‰åŒºï¼Œé€šè¿‡æŒ‡å®š <code>left</code> æˆ– <code>rigth</code> æ¥å‘å·¦æˆ–å‘å³ä¿®æ”¹é€‰åŒºï¼ŒèŒƒå›´å¯ä»¥æŒ‡å®šä¸ºä¸€ä¸ªå­—ç¬¦ã€å•è¯ã€æ®µè½ã€è¡Œç­‰ç­‰ã€‚</p><div class="language-js"><pre><code><span class="token comment">// å‘å·¦æ·»åŠ ä¸€ä¸ªå­—ç¬¦åˆ°é€‰åŒº</span>
selection<span class="token operator">?.</span><span class="token function">modify</span><span class="token punctuation">(</span><span class="token string">&#39;extend&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;left&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;character&#39;</span><span class="token punctuation">)</span>
<span class="token comment">// å‘å³æ·»åŠ ä¸€ä¸ªå•è¯åˆ°é€‰åŒº</span>
selection<span class="token operator">?.</span><span class="token function">modify</span><span class="token punctuation">(</span><span class="token string">&#39;extend&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;right&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;word&#39;</span><span class="token punctuation">)</span>
</code></pre></div><p><img src="/blog/_assets/window-getselection-move.9c152b6a.gif" alt="window-getSelection-move"></p><h4 id="è®¾ç½®å…‰æ ‡ä½ç½®"><a class="header-anchor" href="#è®¾ç½®å…‰æ ‡ä½ç½®" aria-hidden="true">#</a> è®¾ç½®å…‰æ ‡ä½ç½®</h4><p>å…‰æ ‡ä½ç½®çš„è®¾ç½®å¯ä»¥æœ‰ä»¥ä¸‹å‡ ç§æ–¹æ³•å®ç°ï¼š</p><ol><li>å•çº¯ä½¿ç”¨ range.setStartï¼Œå³ç»™å®šèµ·å§‹èŒƒå›´ï¼Œä¸ç»™ç»“æŸèŒƒå›´ï¼Œé‚£ä¹ˆæ­¤æ—¶å…‰æ ‡å°±ä¼šèšç„¦åœ¨ range.setStart è®¾ç½®çš„èŒƒå›´å‰ï¼›</li><li>ä½¿ç”¨ <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Selection/collapse" target="_blank" rel="noopener noreferrer">selection.collapse</a>ï¼Œä¼ å…¥å…‰æ ‡éœ€è¦è½åœ¨çš„ç›®æ ‡èŠ‚ç‚¹ï¼Œä»¥åŠè½åœ¨èŠ‚ç‚¹çš„åç§»é‡ã€‚</li></ol><div class="language-js"><pre><code><span class="token comment">// 1. ä½¿ç”¨setStart/setStartå®ç°</span>
<span class="token keyword">const</span> editor <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&#39;.editor&#39;</span><span class="token punctuation">)</span><span class="token operator">!</span>
<span class="token keyword">const</span> range <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createRange</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// range.setStart(editor.childNodes[1], 1)</span>
<span class="token comment">// selection?.removeAllRanges()</span>
<span class="token comment">// selection?.addRange(range)</span>
<span class="token comment">// 2. ä½¿ç”¨selection.collapseå®ç°</span>
selection<span class="token operator">?.</span><span class="token function">collapse</span><span class="token punctuation">(</span>editor<span class="token punctuation">.</span>childNodes<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">)</span>
</code></pre></div><h5 id="ç§»åŠ¨å…‰æ ‡ä½ç½®"><a class="header-anchor" href="#ç§»åŠ¨å…‰æ ‡ä½ç½®" aria-hidden="true">#</a> ç§»åŠ¨å…‰æ ‡ä½ç½®</h5><p>å¦‚æœåªæ˜¯ç§»åŠ¨å½“å‰å·²æœ‰å…‰æ ‡çš„ä½ç½®ï¼Œé‚£ä¹ˆä¹Ÿå¯ä»¥ä½¿ç”¨ä¸Šé¢æåˆ°çš„ selection.modify ï¼Œåªéœ€å°†ç¬¬ä¸€ä¸ªå‚æ•° <code>extend</code> æ”¹ä¸º <code>move</code> å³å¯ã€‚</p><div class="language-js"><pre><code><span class="token comment">//å‘å·¦ç§»åŠ¨å…‰æ ‡</span>
selection<span class="token operator">?.</span><span class="token function">modify</span><span class="token punctuation">(</span><span class="token string">&#39;move&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;left&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;character&#39;</span><span class="token punctuation">)</span>
<span class="token comment">// å‘å³ç§»åŠ¨å…‰æ ‡</span>
selection<span class="token operator">?.</span><span class="token function">modify</span><span class="token punctuation">(</span><span class="token string">&#39;move&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;right&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;word&#39;</span><span class="token punctuation">)</span>
</code></pre></div><h5 id="å°†å…‰æ ‡èšç„¦åˆ°é€‰åŒºå‰å"><a class="header-anchor" href="#å°†å…‰æ ‡èšç„¦åˆ°é€‰åŒºå‰å" aria-hidden="true">#</a> å°†å…‰æ ‡èšç„¦åˆ°é€‰åŒºå‰å</h5><p>å¦‚æœå·²æœ‰é€‰åŒºçš„æƒ…å†µä¸‹ï¼Œè¿˜æœ‰å¯ä»¥é’ˆå¯¹å·²æœ‰é€‰åŒºè¿›è¡Œå…‰æ ‡ä½ç½®è®¾ç½®çš„æ–¹æ³•ï¼š</p><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Range/collapse" target="_blank" rel="noopener noreferrer">range.collapse</a> â€”â€” æ­¤æ–¹æ³•ä¼šå°†é€‰ä¸­èŒƒå›´å‘è¾¹ç•Œç‚¹ï¼ˆå‰/åï¼‰è¿›è¡ŒæŠ˜å ï¼Œä¼ å…¥ true æŠ˜å åˆ° Range å¼€å§‹çš„èŠ‚ç‚¹ï¼Œfalse æŠ˜å åˆ° Range ç»ˆç‚¹çš„èŠ‚ç‚¹ï¼› <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Selection/collapseToStart" target="_blank" rel="noopener noreferrer">selection.collapseToStart</a> â€”â€” æŠ˜å åˆ°é€‰åŒºèµ·ç‚¹ <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Selection/collapseToEnd" target="_blank" rel="noopener noreferrer">selection.collapseToEnd</a> â€”â€” æŠ˜å åˆ°é€‰åŒºç»ˆç‚¹</p><div class="language-js"><pre><code><span class="token comment">// range?.collapse(false);</span>
<span class="token comment">// 1. ä½¿ç”¨collapseToStart</span>
<span class="token comment">// selection?.collapseToStart()</span>
<span class="token comment">// 2. ä½¿ç”¨collapseToEnd</span>
selection<span class="token operator">?.</span><span class="token function">collapseToEnd</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p><img src="/blog/_assets/window-getselection-extend.f23903b6.gif" alt="window-getSelection-extend"></p><h4 id="æ·»åŠ -æ›¿æ¢é€‰åŒºå†…å®¹"><a class="header-anchor" href="#æ·»åŠ -æ›¿æ¢é€‰åŒºå†…å®¹" aria-hidden="true">#</a> æ·»åŠ /æ›¿æ¢é€‰åŒºå†…å®¹</h4><p>å¾€å¯Œæ–‡æœ¬ä¸­æ’å…¥/æ›¿æ¢å†…å®¹ï¼Œåœ¨æˆ‘ä»¬æ—¥å¸¸å¼€å‘ä¸­åº”è¯¥åº”è¯¥ä¼šæœ‰æ‰€æ¥è§¦ï¼Œé‚£ä¹ˆä½ æ˜¯æ€ä¹ˆåšçš„å‘¢ï¼Ÿ</p><p>ä¸€ç§æ˜¯ä½¿ç”¨ document.insertHTML æ¥å®ç°ï¼Œæ¯”å¦‚å‰é¢æåˆ°çš„ @ åŠŸèƒ½ï¼Œæˆ‘ä¸€å¼€å§‹ä¹Ÿæ˜¯ä½¿ç”¨ document.insertHTML æ¥å®ç°ï¼Œä½†æ˜¯é‡åˆ°äº†é—®é¢˜ï¼Œç±»ä¼¼<a href="https://stackoverflow.com/questions/25941559/is-there-a-way-to-keep-execcommandinserthtml-from-removing-attributes-in-chr" target="_blank" rel="noopener noreferrer">è¿™ä¸ªé—®é¢˜</a>ï¼›çœ‹è¯„è®ºè¯´å¯ä»¥ä½¿ç”¨ <a href="https://developer.mozilla.org/en-US/docs/Web/API/Range/insertNode" target="_blank" rel="noopener noreferrer">range.insertNode</a> æ¥å®ç°ã€‚</p><p>å…·ä½“çš„å®ç°æ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li>è·å–å½“å‰é€‰åŒºï¼Œæ²¡æœ‰é€‰åŒºæ²¡æ³•æ·»åŠ ï¼›</li><li>åˆ›å»ºéœ€è¦æ·»åŠ åˆ°é€‰åŒºä¸­çš„å…ƒç´  nodeï¼›</li><li>å¦‚æœéœ€è¦æ›¿æ¢é€‰åŒºå†…å®¹ï¼Œåˆ™éœ€è¦æ‰§è¡Œ <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Range/deleteContents" target="_blank" rel="noopener noreferrer">range.deleteContents</a>ï¼›</li><li>é€šè¿‡ range.insertNode å°† node æ·»åŠ åˆ°é€‰åŒºï¼›</li><li>éœ€è¦æ‰§è¡Œ range.setStartAfter å°†å…‰æ ‡ç§»åŠ¨åˆ°æ’å…¥çš„å…ƒç´ ä¹‹åï¼ˆé»˜è®¤æ˜¯é€‰ä¸­æ’å…¥å…ƒç´ ï¼‰ï¼›</li><li>æ¢å¤é€‰åŒºä½ç½®ã€‚</li></ol><div class="language-js"><pre><code><span class="token keyword">const</span> editor <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&#39;.editor&#39;</span><span class="token punctuation">)</span> <span class="token keyword">as</span> HTMLElement
<span class="token keyword">const</span> range <span class="token operator">=</span> selection<span class="token operator">?.</span><span class="token function">getRangeAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> mark <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&#39;mark&#39;</span><span class="token punctuation">)</span>
mark<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">@xxx</span><span class="token template-punctuation string">`</span></span>
mark<span class="token punctuation">.</span>contentEditable <span class="token operator">=</span> <span class="token string">&#39;false&#39;</span>
mark<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">&#39;comment-mentions-label&#39;</span>
range<span class="token operator">?.</span><span class="token function">deleteContents</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
range<span class="token operator">?.</span><span class="token function">insertNode</span><span class="token punctuation">(</span>mark<span class="token punctuation">)</span>
range<span class="token operator">?.</span><span class="token function">setStartAfter</span><span class="token punctuation">(</span>mark<span class="token punctuation">)</span>
editor<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>åƒæˆ‘ä»¬è¿˜å¯èƒ½ä¼šé‡åˆ°åŠ ç²—ã€æ–œä½“ç­‰ç­‰ï¼Œå¯ä»¥ä½¿ç”¨ <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Range/surroundContents" target="_blank" rel="noopener noreferrer">range.surroundContents</a> æ¥å®ç°ï¼ŒsurroundContents æ–¹æ³•å°† Range å¯¹è±¡çš„å†…å®¹ç§»åŠ¨åˆ°ä¸€ä¸ªæ–°çš„èŠ‚ç‚¹ï¼Œå¹¶å°†æ–°èŠ‚ç‚¹æ”¾åˆ°è¿™ä¸ªèŒƒå›´çš„èµ·å§‹å¤„ï¼Œç®€å•æ¥è¯´ï¼šå°±æ˜¯ä½¿ç”¨ä¼ å…¥çš„èŠ‚ç‚¹åŒ…è£¹å½“å‰é€‰å–ï¼Œä¾‹å¦‚å®ç°åŠ ç²—åŠŸèƒ½ï¼š</p><div class="language-js"><pre><code><span class="token keyword">const</span> strong <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&#39;strong&#39;</span><span class="token punctuation">)</span>
range<span class="token operator">?.</span><span class="token function">surroundContents</span><span class="token punctuation">(</span>strong<span class="token punctuation">)</span>
</code></pre></div><p><strong>æ³¨æ„ï¼šé€šè¿‡ range æ·»åŠ /æ›¿æ¢é€‰åŒºå†…å®¹åï¼Œæ— æ³•ä½¿ç”¨ Ctrl+Z æ’¤æ¶ˆ</strong></p><h3 id="å®ç°æœ€åˆçš„éœ€æ±‚ï¼šè®°å½•é€‰åŒºå¹¶æ¢å¤"><a class="header-anchor" href="#å®ç°æœ€åˆçš„éœ€æ±‚ï¼šè®°å½•é€‰åŒºå¹¶æ¢å¤" aria-hidden="true">#</a> å®ç°æœ€åˆçš„éœ€æ±‚ï¼šè®°å½•é€‰åŒºå¹¶æ¢å¤</h3><p>å¦‚æœäº†è§£äº†ä»¥ä¸ŠçŸ¥è¯†ï¼Œé‚£æ­¤æ—¶æˆ‘ä»¬è¦å®ç°æ¢å¤é€‰åŒºçš„æ–¹æ³•ï¼Œåªéœ€è¦<strong>åœ¨ç¼–è¾‘å™¨å¤±ç„¦å‰è®°å½•é€‰åŒºï¼Œåœ¨ç‚¹å‡»åŠŸèƒ½æŒ‰é’®å®Œæˆåæ¢å¤é€‰åŒº</strong>å³å¯ï¼Œå¦‚ä¸‹ï¼ˆä¸ºäº†æ–¹ä¾¿ï¼Œå°è£…æˆä¸€ä¸ª hooksï¼‰ï¼š</p><div class="language-js"><pre><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Ref<span class="token punctuation">,</span> onBeforeMount<span class="token punctuation">,</span> onMounted <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span>

<span class="token keyword">const</span> <span class="token function-variable function">useRestoreSelection</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">inputRef</span><span class="token operator">:</span> Ref<span class="token operator">&lt;</span>HTMLDivElement <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token operator">&gt;</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> <span class="token literal-property property">saveRange</span><span class="token operator">:</span> Range <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token operator">=</span> <span class="token keyword">null</span>
  <span class="token keyword">const</span> <span class="token function-variable function">saveSelection</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> sel <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">getSelection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">!</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>sel<span class="token punctuation">.</span>getRangeAt <span class="token operator">&amp;&amp;</span> sel<span class="token punctuation">.</span>rangeCount<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      saveRange <span class="token operator">=</span> sel<span class="token punctuation">.</span><span class="token function">getRangeAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">const</span> <span class="token function-variable function">restoreSelection</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>saveRange<span class="token punctuation">)</span> <span class="token keyword">return</span>
    <span class="token keyword">const</span> sel <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">getSelection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">!</span>
    sel<span class="token punctuation">.</span><span class="token function">removeAllRanges</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    sel<span class="token punctuation">.</span><span class="token function">addRange</span><span class="token punctuation">(</span>saveRange<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> editorDOM <span class="token operator">=</span> inputRef<span class="token punctuation">.</span>value
    editorDOM<span class="token operator">?.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;blur&#39;</span><span class="token punctuation">,</span> saveSelection<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token function">onBeforeMount</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> editorDOM <span class="token operator">=</span> inputRef<span class="token punctuation">.</span>value
    editorDOM<span class="token operator">?.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;blur&#39;</span><span class="token punctuation">,</span> saveSelection<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    restoreSelection<span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> useRestoreSelection
</code></pre></div><p>å¯ä»¥å°†ä¸Šé¢çš„ <code>editorRef.value?.focus()</code> æ›¿æ¢ä¸º <code>saveSelection</code> æ–¹æ³•ã€‚</p><div class="language-js"><pre><code><span class="token keyword">const</span> <span class="token function-variable function">handleClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">item</span><span class="token operator">:</span> ToolType</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> commandId<span class="token punctuation">,</span> value <span class="token punctuation">}</span> <span class="token operator">=</span> item
  <span class="token function">restoreSelection</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  document<span class="token punctuation">.</span><span class="token function">execCommand</span><span class="token punctuation">(</span>commandId<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="æ€»ç»“"><a class="header-anchor" href="#æ€»ç»“" aria-hidden="true">#</a> æ€»ç»“</h2><p>å…¶å®å¾ˆæ—©ä¹‹å‰å°±æœ‰ç”¨åˆ°è¿™ä¸¤ä¸ª APIï¼Œä½†ä¸€ç›´è®¤ä¸ºç”¨å¤„ä¸å¤§ï¼Œæ‰€æœ‰æ²¡æœ‰æ·±å…¥ç ”ç©¶ï¼Œæ¯æ¬¡æœ‰éœ€è¦çš„æ—¶å€™å°±ç™¾åº¦æŸ¥ä¸€æŸ¥ï¼Œç°åœ¨ç»ˆäºè‚¯èŠ±æ—¶é—´æ¥ææ¸…æ¥šï¼Œä»¥åé‡åˆ°è¿™ç§é—®é¢˜ä¹Ÿå°±ä¸ä¼šæ„Ÿåˆ°æ£˜æ‰‹äº†ã€‚</p><p>å¸Œæœ›å¤§å®¶é‡åˆ°ä¸ä¼šçš„ä¸œè¥¿æ—¶ï¼Œé™ä¸‹å¿ƒæ¥èŠ±æ—¶é—´å»ç ”ç©¶é€å®ƒï¼Œè¿™æ ·å°±ä¸è‡³äºæ¯æ¬¡é‡åˆ°éƒ½å»ç™¾åº¦ä¸€éã€‚</p></div><div class="links-wrapper"><div class="prev-link"><!----></div><div class="next-link"><!----></div></div><div><footer class="page-edit"><!-- <a v-for="(item,index) in data.platform" :key="index" :href="item.href">
        <img class="imgIcon" :src="item.icon" />
      </a> --></footer><!-- <p class="platform">
      ä»¥ä¸Šçš†ä¸º
      <a href="javascript:;">çºªå¹´</a> æ–‡ç« å‘å¸ƒå¹³å°
    </p> --><p class="platform"><a href="https://beian.miit.gov.cn/" target="_blank">äº¬ICPå¤‡2022027737å·</a><br> Copyright Â© 2022 - present <a href="https://github.com/wang1xiang">@wangxiang</a></p></div><!--[--><!--]--></div><!-- åªæƒ³ç‚¹å‡»èƒŒæ™¯æ‰å…³é—­ è¯·ä½¿ç”¨ .self ä¿®é¥°ç¬¦ --><div style="display:none;" class="imgBox"><img src=""></div><!--]--></main><div class="theme-select" data-v-afcf09d4><ul data-v-afcf09d4><li class="active" data-v-afcf09d4>â˜€ï¸</li><li class="" data-v-afcf09d4>ğŸŒ‘</li></ul></div></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"README.md\":\"fad27aff\",\"index.md\":\"b6233523\",\"more_docs.md\":\"f6e41cb6\",\"more_index.md\":\"7c4337d5\",\"more_tags.md\":\"4424fa59\",\"docs_css_grid.md\":\"ec45f776\",\"docs_css_placeholder.md\":\"ebf63edc\",\"docs_css_tailWindcss-start.md\":\"faeabcba\",\"docs_docker_docker-start.md\":\"7afccb45\",\"docs_electron_electron-bug.md\":\"60a34d9d\",\"docs_electron_electron-check-update.md\":\"7342fe69\",\"docs_electron_electron-diaoyan.md\":\"f9e4b042\",\"docs_electron_electron-object-destroyed.md\":\"35c1b62f\",\"docs_electron_electron-og.md\":\"0def4adf\",\"docs_electron_electron-open-other.md\":\"d5b477ab\",\"docs_electron_electron-protocol.md\":\"d0466dae\",\"docs_electron_electron-sentry.md\":\"91fb1893\",\"docs_electron_electron-sign-windows.md\":\"c47e2117\",\"docs_electron_electron-sign.md\":\"054f1adb\",\"docs_electron_electron-sqlite3-bug.md\":\"10a02af4\",\"docs_electron_electron-sqlite3-start.md\":\"a6dcdc8c\",\"docs_electron_electron-sqlite3.md\":\"011c2ff5\",\"docs_electron_electron-start.md\":\"b120b54e\",\"docs_electron_electron-update.md\":\"52504add\",\"docs_electron_electron-webview-zoom.md\":\"7c69e54e\",\"docs_electron_hybrid-electron.md\":\"95f3ef22\",\"docs_electron_sentry-electron.md\":\"6f629172\",\"docs_flutter_flutter-dart.md\":\"63a0d82e\",\"docs_flutter_flutter-other.md\":\"c0596dbe\",\"docs_flutter_flutter-route-manage.md\":\"647409e2\",\"docs_flutter_flutter-start.md\":\"eead3936\",\"docs_flutter_flutter-state-manage.md\":\"7db15c96\",\"docs_flutter_flutter-wechat-pay.md\":\"b7238920\",\"docs_git_git-autocrlf.md\":\"7d3d8557\",\"docs_git_git-ignorecase.md\":\"184d62d7\",\"docs_git_git-notes.md\":\"7bb616b0\",\"docs_git_git-rebase.md\":\"93628c13\",\"docs_git_git-username.md\":\"8d303d6a\",\"docs_git_gitflow.md\":\"34be92b6\",\"docs_git_gitlab-ci-start.md\":\"41c13820\",\"docs_http_http.md\":\"2944b23f\",\"docs_javascript_async-await.md\":\"81d02bb9\",\"docs_javascript_createEvent.md\":\"36447bb5\",\"docs_javascript_html2docs.md\":\"6af87017\",\"docs_javascript_http-cache.md\":\"f3fcfe59\",\"docs_javascript_image-load.md\":\"1d0989fa\",\"docs_javascript_indexDB-dexie.md\":\"444d4971\",\"docs_javascript_javascript-utils.md\":\"2b6e0f19\",\"docs_javascript_memory-leak.md\":\"1699785e\",\"docs_javascript_office-preview-type.md\":\"796efc80\",\"docs_javascript_page-alive.md\":\"bdda7fa1\",\"docs_javascript_performance-optimization.md\":\"cd567e16\",\"docs_javascript_preload-prefetch.md\":\"81425150\",\"docs_javascript_scrollend.md\":\"22c804b8\",\"docs_javascript_storage-change.md\":\"b8567732\",\"docs_javascript_turborepo-start.md\":\"9d32118a\",\"docs_javascript_webworker.md\":\"734b99eb\",\"docs_javascript_zero-width-space.md\":\"62075924\",\"docs_leetcode_array-code.md\":\"03a7b32e\",\"docs_leetcode_array-code1.md\":\"e85d73cd\",\"docs_leetcode_back-tracking-code.md\":\"b2bff044\",\"docs_leetcode_back-tracking-code1.md\":\"6dfa074e\",\"docs_leetcode_back-tracking-code2.md\":\"52a642f8\",\"docs_leetcode_back-tracking-code3.md\":\"535f24f7\",\"docs_leetcode_binary-tree-code.md\":\"261faff1\",\"docs_leetcode_binary-tree-code1.md\":\"91f1a613\",\"docs_leetcode_binary-tree-code2.md\":\"ff487efe\",\"docs_leetcode_binary-tree-code3.md\":\"a3b79cde\",\"docs_leetcode_binary-tree-code4.md\":\"9bf17a9f\",\"docs_leetcode_binary-tree-code5.md\":\"4e03dcf6\",\"docs_leetcode_binary-tree-code6.md\":\"5ecee108\",\"docs_leetcode_binary-tree-code7.md\":\"1443a358\",\"docs_leetcode_dynamic-programming-code.md\":\"f7a57951\",\"docs_leetcode_dynamic-programming-code10.md\":\"126c42fc\",\"docs_leetcode_dynamic-programming-code11.md\":\"eaab2747\",\"docs_leetcode_dynamic-programming-code12.md\":\"4d18907d\",\"docs_leetcode_dynamic-programming-code13.md\":\"b6ce7c04\",\"docs_leetcode_dynamic-programming-code2.md\":\"44403b39\",\"docs_leetcode_dynamic-programming-code3.md\":\"78c08cd8\",\"docs_leetcode_dynamic-programming-code4.md\":\"01cde590\",\"docs_leetcode_dynamic-programming-code5.md\":\"b80f6b26\",\"docs_leetcode_dynamic-programming-code6.md\":\"ecd07632\",\"docs_leetcode_dynamic-programming-code7.md\":\"8e835a90\",\"docs_leetcode_dynamic-programming-code8.md\":\"0f6ab441\",\"docs_leetcode_dynamic-programming-code9.md\":\"88517e91\",\"docs_leetcode_graph-theory.md\":\"2e530239\",\"docs_leetcode_greedy-algorithmc-code.md\":\"f58ab9eb\",\"docs_leetcode_greedy-algorithmc-code2.md\":\"27feea3f\",\"docs_leetcode_greedy-algorithmc-code3.md\":\"ca61e80d\",\"docs_leetcode_greedy-algorithmc-code4.md\":\"8f358ae4\",\"docs_leetcode_greedy-algorithmc-code5.md\":\"520b56c7\",\"docs_leetcode_hash-code.md\":\"0348c1c4\",\"docs_leetcode_hash-code1.md\":\"0e435055\",\"docs_leetcode_linked-list-code.md\":\"95d16ddc\",\"docs_leetcode_linked-list-code1.md\":\"8060a508\",\"docs_leetcode_monotone-stack.md\":\"29736488\",\"docs_leetcode_monotone-stack1.md\":\"855bee62\",\"docs_leetcode_stack-code.md\":\"54df2839\",\"docs_leetcode_stack-code1.md\":\"bfbf0909\",\"docs_leetcode_string-code.md\":\"41c25ae9\",\"docs_leetcode_string-code1.md\":\"96692b73\",\"docs_linux_centos-docker.md\":\"94b2d72c\",\"docs_linux_linux-no-possword.md\":\"285fc85e\",\"docs_mobile_mobileDebugging.md\":\"5fd1bff5\",\"docs_nest_mysql-satart.md\":\"79a475d8\",\"docs_nest_nest-bff.md\":\"1a69f206\",\"docs_nest_nest-start.md\":\"04ae0633\",\"docs_node_bff-express-esm.md\":\"a4198614\",\"docs_node_bff-express.md\":\"8171318b\",\"docs_node_bff.md\":\"0ec7d92f\",\"docs_node_deploy-server.md\":\"bd72e88b\",\"docs_node_express-mysql2.md\":\"5fd081ba\",\"docs_node_express-swigger.md\":\"ea383d82\",\"docs_node_socketIO-start.md\":\"23a76d38\",\"docs_photography_nd.md\":\"e1d3d2e9\",\"docs_pnpm_pnpm-monorepo.md\":\"2051bb37\",\"docs_prosemirror_html2docs-pdf.md\":\"c55e18f0\",\"docs_react_create-react-app.md\":\"462f5a1c\",\"docs_react_dompurify.md\":\"d1b77f16\",\"docs_react_eslint-react.md\":\"437d5072\",\"docs_react_react-classnames.md\":\"9687eb01\",\"docs_react_react-grid-layout.md\":\"7041d613\",\"docs_react_react-intl.md\":\"471c8efe\",\"docs_react_react-philosophies.md\":\"f6c7495a\",\"docs_react_react-query.md\":\"612ca8bd\",\"docs_react_react-router-change.md\":\"2de6b169\",\"docs_react_react-vs-vue3.md\":\"a844a9dc\",\"docs_react_redux-audition.md\":\"dea45b77\",\"docs_react_tomcat-404.md\":\"060bd76b\",\"docs_reactNative_react-native-errors.md\":\"c65944f0\",\"docs_taro_taro-get-started.md\":\"95380619\",\"docs_taro_taro-start.md\":\"5bbc25fd\",\"docs_tiptap_tiptap-tutorial.md\":\"ad73c667\",\"docs_tiptap_tiptap-tutorial10.md\":\"422e7b14\",\"docs_tiptap_tiptap-tutorial2.md\":\"68e8370f\",\"docs_tiptap_tiptap-tutorial3.md\":\"fba30ca5\",\"docs_tiptap_tiptap-tutorial4.md\":\"810b2e40\",\"docs_tiptap_tiptap-tutorial5.md\":\"e28fca4b\",\"docs_tiptap_tiptap-tutorial6.md\":\"ac2fc3fc\",\"docs_tiptap_tiptap-tutorial7.md\":\"acd25f15\",\"docs_tiptap_tiptap-tutorial8.md\":\"6c21a06f\",\"docs_tiptap_tiptap-tutorial9.md\":\"1a01ab85\",\"docs_tool_2023-summary.md\":\"ce2f3270\",\"docs_tool_2024-summary.md\":\"53c38cc1\",\"docs_tool_blog.md\":\"39aed690\",\"docs_tool_chatgpt.md\":\"ad984738\",\"docs_tool_chrome-extension.md\":\"847d314f\",\"docs_tool_chrome-override.md\":\"67da9367\",\"docs_tool_debugging.md\":\"7b04d986\",\"docs_tool_mac.md\":\"62ae4931\",\"docs_tool_mock.md\":\"9c144222\",\"docs_tool_moment-api.md\":\"d5e6e506\",\"docs_tool_mvp.md\":\"3b83dcf2\",\"docs_tool_np.md\":\"5050deab\",\"docs_tool_prosemirror-tables.md\":\"94503605\",\"docs_tool_vitepress-error.md\":\"cb8774f4\",\"docs_tool_vscode-web-error.md\":\"0ed237a5\",\"docs_tool_whistle.md\":\"66324032\",\"docs_tool_yarn-certificate.md\":\"0fbe8492\",\"docs_vite_componentLibrary.md\":\"64976ebe\",\"docs_vite_create-vite.md\":\"bfb591fd\",\"docs_vite_vite-env.md\":\"8ec42db8\",\"docs_vite_vite-mulit-import.md\":\"9abd8cb3\",\"docs_vite_vite-react-cli.md\":\"73cfd9e9\",\"docs_vite_vite-react.md\":\"30003a1f\",\"docs_vite_vite.md\":\"39222c70\",\"docs_vite_vite3.0.md\":\"dc28c6af\",\"docs_vscode_vscode-markdown.md\":\"f9f039dc\",\"docs_vscode_vscode-todo.md\":\"b430aa57\",\"docs_vue_antd-form.md\":\"198e0d9a\",\"docs_vue_antd-vue.md\":\"0aa5c5cf\",\"docs_vue_axios-token.md\":\"97bb211e\",\"docs_vue_history-mode.md\":\"cfb231c6\",\"docs_vue_keepAlive.md\":\"09dce242\",\"docs_vue_tjTodo.md\":\"55cdad5d\",\"docs_vue_unplugin-auto-import.md\":\"83fe171e\",\"docs_vue_vue-scoped-issue.md\":\"326542d8\",\"docs_vue_vue3-jsx.md\":\"224ea898\",\"docs_vue_vue3-lint-staged.md\":\"bb9431ec\",\"docs_vue_vue3-unexpected-token.md\":\"04486514\",\"docs_webrtc_getstarted-webrtc.md\":\"0f112da6\",\"docs_webrtc_livekit-start.md\":\"e64f869a\",\"docs_webrtc_webrtc-one.md\":\"78f426fd\",\"docs_wechat_uniapp-start.md\":\"ab67b712\",\"docs_wechat_wechat-app.md\":\"de7f5047\",\"docs_work_360-develop.md\":\"224ebf09\",\"docs_work_babel.md\":\"6ac88815\",\"docs_work_click-event.md\":\"a5d1de14\",\"docs_work_contentEdit-div-insert.md\":\"67d6dffb\",\"docs_work_developer.md\":\"1f8ef7ef\",\"docs_work_echarts.md\":\"fb18bee2\",\"docs_work_email-font.md\":\"a1ec7540\",\"docs_work_excalidraw-use.md\":\"4c0d1037\",\"docs_work_excalidraw.md\":\"fd406aa2\",\"docs_work_font-loading-speed.md\":\"37e87477\",\"docs_work_g2-vs-echarts.md\":\"51827b4c\",\"docs_work_h5-app.md\":\"475554a8\",\"docs_work_html2canvas-bug.md\":\"4ede7407\",\"docs_work_i18n.md\":\"c1302557\",\"docs_work_image-type.md\":\"ab25f3da\",\"docs_work_jenkins-start.md\":\"7f71ca84\",\"docs_work_js-long.md\":\"b57498fe\",\"docs_work_malformed.md\":\"fba4e928\",\"docs_work_mutationObserver.md\":\"0ee411e6\",\"docs_work_node16-docker.md\":\"59e61c97\",\"docs_work_one-react-screenshots.md\":\"6aad5f40\",\"docs_work_plop-express.md\":\"9027b96d\",\"docs_work_puppeteer.md\":\"45a57a4a\",\"docs_work_react-ref.md\":\"24a7cc30\",\"docs_work_report-2023.md\":\"45928ed9\",\"docs_work_report-regular.md\":\"54264569\",\"docs_work_richeditor.md\":\"89824b55\",\"docs_work_sentry-cli-error.md\":\"2af6db34\",\"docs_work_sentry-error.md\":\"ddf44797\",\"docs_work_sentry.md\":\"e647c66c\",\"docs_work_server-deploy.md\":\"25a04780\",\"docs_work_sse.md\":\"b8c84bd5\",\"docs_work_text-decoration.md\":\"a1690a8a\",\"docs_work_unocss.md\":\"61a4577f\",\"docs_work_white-board.md\":\"8141f98a\",\"docs_work_word-cpu.md\":\"dd9fc24e\",\"docs_work_zero-width-spaces.md\":\"58da171f\"}")</script>
    <script type="module" async src="/blog/_assets/app.bf0ae72d.js"></script>
  </body>
</html>