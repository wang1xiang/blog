import{f as n,g as s,J as a}from"./common-03e46d7f.js";const p='{"title":"使用create-react-app脚手架搭建React项目","frontmatter":{"date":"2022-10-17","title":"使用create-react-app脚手架搭建React项目","tags":["react"],"describe":"使用create-react-app脚手架搭建React项目"},"headers":[{"level":2,"title":"create-react-app","slug":"create-react-app"},{"level":2,"title":"正确修改webpack配置","slug":"正确修改webpack配置"},{"level":3,"title":"使用react-app-rewired","slug":"使用react-app-rewired"},{"level":3,"title":"使用react-app-rewired搭配customize-cra修改配置项","slug":"使用react-app-rewired搭配customize-cra修改配置项"},{"level":3,"title":"项目优化","slug":"项目优化"}],"relativePath":"docs/react/create-react-app.md","lastUpdated":1742819970715.5369}';var t={};const o=[a('<h2 id="create-react-app"><a class="header-anchor" href="#create-react-app" aria-hidden="true">#</a> create-react-app</h2><p>react脚手架工具，简称cra<a href="https://create-react-app.bootcss.com/" target="_blank" rel="noopener noreferrer">中文文档</a></p><ul><li><p>创建项目</p><div class="language-bash"><pre><code>npx create-react-app my-app\n<span class="token comment"># 创建typescript项目</span>\nnpx create-react-app my-app --template typescript\n</code></pre></div><p><img src="/blog/_assets/create-react-appp.ceaf350c.jpg" alt="create-react-app.jpg"> 可以看到会同事下载react、react-dom、react-scripts这三个依赖包</p></li><li><p>易于维护</p><p>更新构建工具只需要执行如下命令即可升级</p><div class="language-bash"><pre><code><span class="token function">npm</span> <span class="token function">install</span> react-scripts@latest\n</code></pre></div></li><li></li><li></li></ul><h2 id="正确修改webpack配置"><a class="header-anchor" href="#正确修改webpack配置" aria-hidden="true">#</a> 正确修改webpack配置</h2><p>cra创建的项目不会有webpack配置，统一封装在react-scripts中，使用<code>npm run eject</code>可以将封装在react-scripts中webpack配置全部反编译到当前项目，下面这张图就是使用执行eject，可以看到多了很多配置文件，但是一个单项操作，eject后就无法恢复，所以做一些简单的配置，eject是没有必要的</p><p><img src="/blog/_assets/eject.fd8788e8.jpg" alt="eject.jpg"></p><h3 id="使用react-app-rewired"><a class="header-anchor" href="#使用react-app-rewired" aria-hidden="true">#</a> 使用react-app-rewired</h3><p><a href="https://github.com/timarney/react-app-rewired" target="_blank" rel="noopener noreferrer">react-app-rewired</a>针对cra搭建的项目修改webpack配置，配合<a href="https://github.com/arackaf/customize-cra" target="_blank" rel="noopener noreferrer">customize-cra</a>来实现自定义的配置</p><ol><li><p>安装依赖</p><div class="language-bash"><pre><code><span class="token function">npm</span> <span class="token function">install</span> react-app-rewired customize-cra -D\n</code></pre></div></li><li><p>修改scripts配置</p><div class="language-json"><pre><code><span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n   <span class="token property">&quot;start&quot;</span><span class="token operator">:</span> <span class="token string">&quot;react-app-rewired start&quot;</span><span class="token punctuation">,</span>\n   <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;react-app-rewired build&quot;</span><span class="token punctuation">,</span>\n   <span class="token property">&quot;test&quot;</span><span class="token operator">:</span> <span class="token string">&quot;react-app-rewired test&quot;</span><span class="token punctuation">,</span>\n   <span class="token property">&quot;eject&quot;</span><span class="token operator">:</span> <span class="token string">&quot;react-scripts eject&quot;</span>\n <span class="token punctuation">}</span><span class="token punctuation">,</span>\n</code></pre></div></li><li><p>项目根目录创建<code>config-overrides.js</code>来对webpack配置进行扩展</p></li></ol><h3 id="使用react-app-rewired搭配customize-cra修改配置项"><a class="header-anchor" href="#使用react-app-rewired搭配customize-cra修改配置项" aria-hidden="true">#</a> 使用react-app-rewired搭配customize-cra修改配置项</h3><ol><li><p>添加Proxy配置、别名设置</p><div class="language-js"><pre><code> <span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n <span class="token keyword">const</span> <span class="token punctuation">{</span>\n   override<span class="token punctuation">,</span>\n   overrideDevServer<span class="token punctuation">,</span>\n   addWebpackAlias<span class="token punctuation">,</span>\n <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;customize-cra&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n <span class="token comment">// Proxy配置</span>\n <span class="token keyword">const</span> <span class="token function-variable function">devServerConfig</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token parameter">config</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n   <span class="token keyword">return</span> <span class="token punctuation">{</span>\n     <span class="token operator">...</span>config<span class="token punctuation">,</span>\n     <span class="token comment">// 服务开启gzip</span>\n     <span class="token literal-property property">compress</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n     <span class="token literal-property property">proxy</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n       <span class="token string-property property">&quot;/api&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n         <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token string">&quot;xxx&quot;</span><span class="token punctuation">,</span>\n         <span class="token literal-property property">changeOrigin</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n         <span class="token literal-property property">pathRewrite</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n           <span class="token string-property property">&quot;^/api&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>\n         <span class="token punctuation">}</span><span class="token punctuation">,</span>\n       <span class="token punctuation">}</span><span class="token punctuation">,</span>\n     <span class="token punctuation">}</span><span class="token punctuation">,</span>\n   <span class="token punctuation">}</span><span class="token punctuation">;</span>\n <span class="token punctuation">}</span><span class="token punctuation">;</span>\n module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n   <span class="token literal-property property">webpack</span><span class="token operator">:</span> <span class="token function">override</span><span class="token punctuation">(</span>\n     <span class="token comment">// 设置别名</span>\n     <span class="token function">addWebpackAlias</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n       <span class="token literal-property property">src</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;src&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n       <span class="token literal-property property">apis</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;src/apis&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n       <span class="token literal-property property">assets</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;src/assets&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n       <span class="token literal-property property">styles</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;src/assets/styles&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n       <span class="token literal-property property">pages</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;src/pages&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n       <span class="token literal-property property">components</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;src/components&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n       <span class="token literal-property property">utils</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;src/utils&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n     <span class="token punctuation">}</span><span class="token punctuation">)</span>\n   <span class="token punctuation">)</span><span class="token punctuation">,</span>\n   <span class="token comment">// proxy配置</span>\n   <span class="token literal-property property">devServer</span><span class="token operator">:</span> <span class="token function">overrideDevServer</span><span class="token punctuation">(</span><span class="token function">devServerConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n\n</code></pre></div></li><li><p>增加less支持</p><div class="language-bash"><pre><code><span class="token function">yarn</span> <span class="token function">add</span> <span class="token function">less</span> less-loader -D\n</code></pre></div><div class="language-js"><pre><code> <span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n <span class="token keyword">const</span> <span class="token punctuation">{</span>\n   override<span class="token punctuation">,</span>\n   overrideDevServer<span class="token punctuation">,</span>\n   addWebpackAlias<span class="token punctuation">,</span>\n   addLessLoader\n <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;customize-cra&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n <span class="token comment">// Proxy配置</span>\n <span class="token keyword">const</span> <span class="token function-variable function">devServerConfig</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token parameter">config</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n   <span class="token operator">...</span>\n <span class="token punctuation">}</span><span class="token punctuation">;</span>\n module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n   <span class="token literal-property property">webpack</span><span class="token operator">:</span> <span class="token function">override</span><span class="token punctuation">(</span>\n     <span class="token comment">// 设置别名</span>\n     <span class="token operator">...</span>\n     <span class="token comment">// less配置</span>\n     <span class="token function">addLessLoader</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n       <span class="token literal-property property">lessOptions</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n         <span class="token literal-property property">javascriptEnabled</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n         <span class="token literal-property property">cssModules</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n           <span class="token literal-property property">localIdentName</span><span class="token operator">:</span> <span class="token string">&#39;[path][name]__[local]--[hash:base64:5]&#39;</span><span class="token punctuation">,</span> <span class="token comment">// if you use CSS Modules, and custom `localIdentName`, default is &#39;[local]--[hash:base64:5]&#39;.</span>\n         <span class="token punctuation">}</span><span class="token punctuation">,</span>\n       <span class="token punctuation">}</span><span class="token punctuation">,</span>\n     <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n   <span class="token punctuation">)</span><span class="token punctuation">,</span>\n   <span class="token comment">// proxy配置</span>\n   <span class="token literal-property property">devServer</span><span class="token operator">:</span> <span class="token function">overrideDevServer</span><span class="token punctuation">(</span><span class="token function">devServerConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n</code></pre></div></li><li><p>antd按需加载</p><p>安装依赖</p><div class="language-bash"><pre><code><span class="token function">npm</span> i antd babel-plugin-import -D\n</code></pre></div><div class="language-js"><pre><code> <span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n <span class="token keyword">const</span> <span class="token punctuation">{</span>\n   override<span class="token punctuation">,</span>\n   overrideDevServer<span class="token punctuation">,</span>\n   addWebpackAlias<span class="token punctuation">,</span>\n   addLessLoader<span class="token punctuation">,</span>\n   fixBabelImports<span class="token punctuation">,</span>\n <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;customize-cra&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n \n module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n   <span class="token literal-property property">webpack</span><span class="token operator">:</span> <span class="token function">override</span><span class="token punctuation">(</span>\n     <span class="token operator">...</span>\n     <span class="token function">fixBabelImports</span><span class="token punctuation">(</span><span class="token string">&quot;import&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>\n       <span class="token literal-property property">libraryName</span><span class="token operator">:</span> <span class="token string">&quot;antd&quot;</span><span class="token punctuation">,</span>\n       <span class="token literal-property property">libraryDirectory</span><span class="token operator">:</span> <span class="token string">&quot;es&quot;</span><span class="token punctuation">,</span>\n       <span class="token literal-property property">style</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n     <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n     <span class="token comment">// less配置</span>\n     <span class="token function">addLessLoader</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n       <span class="token literal-property property">lessOptions</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n         <span class="token literal-property property">javascriptEnabled</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n         <span class="token comment">// antd主题定制https://ant.design/docs/react/customize-theme-cn#%E5%AE%9A%E5%88%B6%E6%96%B9%E5%BC%8F</span>\n         <span class="token literal-property property">modifyVars</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n           <span class="token string-property property">&#39;primary-color&#39;</span><span class="token operator">:</span> <span class="token string">&#39;#1DA57A&#39;</span><span class="token punctuation">,</span>\n           <span class="token string-property property">&#39;link-color&#39;</span><span class="token operator">:</span> <span class="token string">&#39;#1DA57A&#39;</span><span class="token punctuation">,</span>\n           <span class="token string-property property">&#39;border-radius-base&#39;</span><span class="token operator">:</span> <span class="token string">&#39;2px&#39;</span><span class="token punctuation">,</span>\n         <span class="token punctuation">}</span><span class="token punctuation">,</span>\n         <span class="token literal-property property">cssModules</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n           <span class="token literal-property property">localIdentName</span><span class="token operator">:</span> <span class="token string">&quot;[path][name]__[local]--[hash:base64:5]&quot;</span><span class="token punctuation">,</span> <span class="token comment">// if you use CSS Modules, and custom `localIdentName`, default is &#39;[local]--[hash:base64:5]&#39;.</span>\n         <span class="token punctuation">}</span><span class="token punctuation">,</span>\n       <span class="token punctuation">}</span><span class="token punctuation">,</span>\n     <span class="token punctuation">}</span><span class="token punctuation">)</span>\n   <span class="token punctuation">)</span><span class="token punctuation">,</span>\n   <span class="token operator">...</span>\n <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n</code></pre></div></li><li><p>打包压缩</p><div class="language-bash"><pre><code><span class="token function">npm</span> <span class="token function">install</span> compression-webpack-plugin -D\n</code></pre></div><div class="language-js"><pre><code><span class="token operator">...</span>\n<span class="token keyword">const</span> CompressionWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;compression-webpack-plugin&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\nmodule<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n   <span class="token literal-property property">webpack</span><span class="token operator">:</span> <span class="token function">override</span><span class="token punctuation">(</span>\n     <span class="token operator">...</span>\n     <span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">&#39;production&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n       <span class="token comment">// 添加js打包gzip配置</span>\n       config<span class="token punctuation">.</span>plugins<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>\n         <span class="token keyword">new</span> <span class="token class-name">CompressionWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n           <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\.js$|\\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>\n           <span class="token literal-property property">threshold</span><span class="token operator">:</span> <span class="token number">1024</span><span class="token punctuation">,</span>\n         <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n       <span class="token punctuation">)</span>\n     <span class="token punctuation">}</span>\n   <span class="token punctuation">)</span><span class="token punctuation">,</span>\n   <span class="token operator">...</span>\n <span class="token punctuation">}</span><span class="token punctuation">;</span>\n</code></pre></div></li><li><p>修改生产环境文件路径</p></li></ol><div class="language-js"><pre><code>  module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n    <span class="token literal-property property">webpack</span><span class="token operator">:</span> <span class="token function">override</span><span class="token punctuation">(</span>\n    <span class="token punctuation">(</span><span class="token parameter">config</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">REACT_APP_ENVKEY</span> <span class="token operator">===</span> <span class="token string">&#39;prod&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        config<span class="token punctuation">.</span>output<span class="token punctuation">.</span>publicPath <span class="token operator">=</span> <span class="token string">&#39;https://app-s3.quickcep.com/&#39;</span><span class="token punctuation">;</span>\n      <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span>\n  <span class="token punctuation">}</span>\n</code></pre></div><ol start="6"><li><p>WebpackBar插件</p><div class="language-js"><pre><code><span class="token keyword">const</span> WebpackBar <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;webpackbar&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\nmodule<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n   <span class="token literal-property property">webpack</span><span class="token operator">:</span> <span class="token function">override</span><span class="token punctuation">(</span>\n   <span class="token punctuation">(</span><span class="token parameter">config</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n     config<span class="token punctuation">.</span>plugins<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">WebpackBar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token punctuation">}</span><span class="token punctuation">)</span>\n <span class="token punctuation">}</span>\n</code></pre></div></li></ol><h3 id="项目优化"><a class="header-anchor" href="#项目优化" aria-hidden="true">#</a> 项目优化</h3><ol><li><p>添加react-hot-reloader实现局部刷新</p><p>构建react项目默认使用webpack-dev-server实现热更新，修改移除会使整个页面刷新，使用react-hot-loader可以实现局部刷新</p><div class="language-bash"><pre><code><span class="token function">npm</span> <span class="token function">install</span> react-hot-loader react-app-rewire-hot-loader @hot-loader/react-dom -D\n</code></pre></div><p>在App.js中配置</p><div class="language-js"><pre><code><span class="token keyword">import</span> <span class="token punctuation">{</span> hot <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react-hot-loader/root&#39;</span>\n<span class="token operator">...</span>\n<span class="token keyword">const</span> AppHot <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">&#39;development&#39;</span> <span class="token operator">?</span> <span class="token function">hot</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span> <span class="token operator">:</span> App<span class="token punctuation">;</span>\n<span class="token keyword">export</span> <span class="token keyword">default</span> AppHot\n</code></pre></div><p>webpack配置</p><div class="language-js"><pre><code> <span class="token keyword">const</span> rewireReactHotLoader <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;react-app-rewire-hot-loader&#39;</span><span class="token punctuation">)</span>\n <span class="token keyword">const</span> <span class="token function-variable function">hotLoader</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token parameter">config<span class="token punctuation">,</span> env</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n   config <span class="token operator">=</span> <span class="token function">rewireReactHotLoader</span><span class="token punctuation">(</span>config<span class="token punctuation">,</span> env<span class="token punctuation">)</span>\n   <span class="token keyword">return</span> config\n <span class="token punctuation">}</span>\n\n module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n   <span class="token literal-property property">webpack</span><span class="token operator">:</span> <span class="token function">override</span><span class="token punctuation">(</span>\n     <span class="token function">hotLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n   <span class="token punctuation">)</span>\n <span class="token punctuation">}</span>\n</code></pre></div></li><li><p>关闭sourceMap</p><ul><li><p>在.env中设置</p><div class="language-text"><pre><code>GENERATE_SOURCEMAP=false\n</code></pre></div></li><li><p>在scripts中设置</p><div class="language-json"><pre><code><span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;GENERATE_SOURCEMAP=false react-app-rewired build&quot;</span>\n</code></pre></div></li><li><p>webpack配置</p><div class="language-js"><pre><code>config<span class="token punctuation">.</span>devtool <span class="token operator">=</span> config<span class="token punctuation">.</span>mode <span class="token operator">===</span> <span class="token string">&#39;development&#39;</span> <span class="token operator">?</span> <span class="token string">&#39;cheap-module-source-map&#39;</span> <span class="token operator">:</span> <span class="token boolean">false</span>\n</code></pre></div></li></ul></li><li><p>生成环境移除console.log</p><div class="language-js"><pre><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n   <span class="token literal-property property">webpack</span><span class="token operator">:</span> <span class="token function">override</span><span class="token punctuation">(</span>\n   <span class="token punctuation">(</span><span class="token parameter">config</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n     <span class="token keyword">if</span> <span class="token punctuation">(</span>config<span class="token punctuation">.</span>optimization<span class="token punctuation">.</span>minimizer<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n       config<span class="token punctuation">.</span>optimization<span class="token punctuation">.</span>minimizer<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">minimizer</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n         <span class="token keyword">if</span> <span class="token punctuation">(</span>minimizer<span class="token punctuation">.</span>constructor<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">&#39;TerserPlugin&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n           minimizer<span class="token punctuation">.</span>options<span class="token punctuation">.</span>terserOptions<span class="token punctuation">.</span>compress<span class="token punctuation">.</span>drop_console <span class="token operator">=</span> <span class="token boolean">true</span>\n         <span class="token punctuation">}</span>\n       <span class="token punctuation">}</span><span class="token punctuation">)</span>\n     <span class="token punctuation">}</span>\n   <span class="token punctuation">}</span><span class="token punctuation">)</span>\n <span class="token punctuation">}</span>\n\n</code></pre></div></li><li></li></ol>',15)];t.render=function(a,p,t,e,c,r){return n(),s("div",null,o)};export{p as __pageData,t as default};
