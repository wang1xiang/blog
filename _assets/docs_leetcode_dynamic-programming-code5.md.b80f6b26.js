import{f as n,g as s,J as a}from"./common-03e46d7f.js";const p='{"title":"跟着卡哥学算法Day 37：动态规划part5","frontmatter":{"date":"2025-03-20","title":"跟着卡哥学算法Day 37：动态规划part5","tags":["leetcode"],"describe":"动态规划part5"},"headers":[{"level":2,"title":"完全背包理论基础","slug":"完全背包理论基础"},{"level":3,"title":"完全背包动态规划解法（二维数组解法）","slug":"完全背包动态规划解法（二维数组解法）"},{"level":3,"title":"完全背包（一维数组）","slug":"完全背包（一维数组）"},{"level":2,"title":"518.零钱兑换 II 🌟🌟","slug":"_518-零钱兑换-ii-🌟🌟"},{"level":3,"title":"题目描述","slug":"题目描述"},{"level":3,"title":"解题思路","slug":"解题思路"},{"level":3,"title":"代码","slug":"代码-2"},{"level":3,"title":"一维 dp","slug":"一维-dp"},{"level":2,"title":"377. 组合总和 Ⅳ 🌟🌟","slug":"_377-组合总和-ⅳ-🌟🌟"},{"level":3,"title":"题目描述","slug":"题目描述-2"},{"level":3,"title":"解题思路","slug":"解题思路-2"},{"level":2,"title":"70. 爬楼梯（进阶版） 🌟🌟","slug":"_70-爬楼梯（进阶版）-🌟🌟"},{"level":3,"title":"题目描述","slug":"题目描述-3"},{"level":3,"title":"解题思路","slug":"解题思路-3"},{"level":3,"title":"代码","slug":"代码-5"},{"level":2,"title":"01 背包对比完全背包","slug":"_01-背包对比完全背包"},{"level":3,"title":"01 背包问题","slug":"_01-背包问题"},{"level":3,"title":"完全背包问题","slug":"完全背包问题"},{"level":3,"title":"总结","slug":"总结"}],"relativePath":"docs/leetcode/dynamic-programming-code5.md","lastUpdated":1743566425568.4036}';var t={};const o=[a('<h2 id="完全背包理论基础"><a class="header-anchor" href="#完全背包理论基础" aria-hidden="true">#</a> 完全背包理论基础</h2><p>完全背包问题是 01 背包问题的变种，不同之处在于<strong>每种物品可以取无限次</strong>。</p><h3 id="完全背包动态规划解法（二维数组解法）"><a class="header-anchor" href="#完全背包动态规划解法（二维数组解法）" aria-hidden="true">#</a> 完全背包动态规划解法（二维数组解法）</h3><table><thead><tr><th></th><th>重量</th><th>价值</th></tr></thead><tbody><tr><td>物品 0</td><td>1</td><td>15</td></tr><tr><td>物品 1</td><td>3</td><td>20</td></tr><tr><td>物品 2</td><td>4</td><td>30</td></tr></tbody></table><p>以此题为例，手动计算结果如下： <img src="/blog/_assets/dynamic-programming-code51.7f5ecf86.png" alt="dynamic-programming-code51"></p><p>假如求 <code>dp[1][4]</code>，有两种情况：</p><ol><li><p>不放物品 1</p><ul><li>背包价值就是 <code>dp[0][4]</code>，即<strong>容量为 4 的背包，只放物品 0 的情况</strong></li></ul></li><li><p>放物品 1</p><ul><li>背包需要预留物品 1 的容量，背包容量为 4，物品 1 重量为 3，价值为 20，此时剩余容量为 1</li><li>容量为 1 时，最大价值为 <code>dp[1][1] = 15</code>，即背包容量 1，放入物品 0 和物品 1 （<strong>物品 1 可重复放入</strong>）的最大价值，<strong>01 背包只能是 <code>dp[0][1]</code>，不能重复放入</strong></li><li>因此放物品 1 的情况 = <code>dp[1][1]</code> + 物品 1 的价值，即：<code>dp[1][4] = 15 + 20</code></li></ul></li></ol><p>两种情况取最大值：</p><div class="language-js"><pre><code>dp<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">20</span><span class="token punctuation">)</span>\n<span class="token comment">// 推导递推公式</span>\ndp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> weight<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">+</span> value<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>\n</code></pre></div><p>再看 01 背包递推公式</p><div class="language-js"><pre><code>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> weight<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">+</span> value<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>\n</code></pre></div><p>区别就是当放入物品 i 时，背包的最大价值是 <code>dp[i][j - weight[i]]</code>，而不是 <code>dp[i - 1][j - weight[i]]</code>，因为完全背包问题可以重复放入物品 i</p><p>动规五部曲：</p><ol><li><p>确定 dp 数组以及下标的含义</p><p><code>dp[i][j]</code> 表示[0... i - 1]的物品，可以去无限次，放进容量为 j 的背包的最大价值</p></li><li><p>确定递推公式</p><div class="language-js"><pre><code>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> weight<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">+</span> value<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>\n</code></pre></div></li><li><p>dp 数组初始化</p><ul><li><code>dp[i][0] = 0</code>：背包容量为 0，价值为 0</li></ul><p>由状态转移方程可知，i 是由 i-1 推导出来，因此 i 为 0 时也需要初始化</p><ul><li><p><code>dp[0][j]</code>：存放物品 0 时，各个容量的背包所能存放的最大价值</p><ul><li><p>当 j &lt; weight 时，<code>dp[0][j] = 0</code></p></li><li><p>当 j &gt;= weight，<code>dp[0][j]</code>如果能放下物品 0，就可以无限装</p><div class="language-js"><pre><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> weight<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> bagWeight<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> weight<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">+</span> value<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>\n<span class="token punctuation">}</span>\n</code></pre></div></li></ul></li></ul><p>此时，初始化情况如下： <img src="/blog/_assets/dynamic-programming-code52.d5c37742.png" alt="dynamic-programming-code52"></p><p>其他地方都初始化为 0，因为 <code>dp[i][j]</code> 都是由<strong>上方和作坊数值推导而出</strong></p></li><li><p>确定遍历顺序</p><p>先遍历物品，再遍历背包</p></li><li><p>举例推导 dp 数组</p><p>如最初的手动计算结果</p></li></ol><h4 id="代码"><a class="header-anchor" href="#代码" aria-hidden="true">#</a> 代码</h4><div class="language-js"><pre><code><span class="token keyword">function</span> <span class="token function">knapsackComplete2D</span><span class="token punctuation">(</span><span class="token parameter">weights<span class="token punctuation">,</span> values<span class="token punctuation">,</span> bagWeight</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> n <span class="token operator">=</span> weights<span class="token punctuation">.</span>length\n  <span class="token keyword">const</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>bagWeight <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n\n  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> weights<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> bagSize<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> weights<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">+</span> values<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">for</span> <span class="token punctuation">(</span>j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> bagSize<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token keyword">const</span> weight <span class="token operator">=</span> weights<span class="token punctuation">[</span>i<span class="token punctuation">]</span>\n      <span class="token keyword">const</span> value <span class="token operator">=</span> values<span class="token punctuation">[</span>i<span class="token punctuation">]</span>\n      <span class="token keyword">if</span> <span class="token punctuation">(</span>j <span class="token operator">&gt;=</span> weight<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token comment">// 可以放入背包：比较不放入和放入后的最大价值</span>\n        dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>\n          dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 不放入当前物品</span>\n          dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> weight<span class="token punctuation">]</span> <span class="token operator">+</span> value <span class="token comment">// 放入当前物品（注意是dp[i]，不是i-1）</span>\n        <span class="token punctuation">)</span>\n      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>\n        <span class="token comment">// 当前物品无法放入背包：继承前i-1个物品的结果</span>\n        dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span>\n      <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>dp<span class="token punctuation">)</span>\n  <span class="token keyword">return</span> dp<span class="token punctuation">[</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>bagSize<span class="token punctuation">]</span>\n<span class="token punctuation">}</span>\n</code></pre></div><h3 id="完全背包（一维数组）"><a class="header-anchor" href="#完全背包（一维数组）" aria-hidden="true">#</a> 完全背包（一维数组）</h3><p>和 01 背包推导一致，使用滚动数组</p><p>递归五部曲：</p><ol><li><p>确定 dp 数组及下标的含义</p><p><code>dp[j]</code> 表示容量为 j 的背包的最大价值</p></li><li><p>确定递推公式</p><div class="language-js"><pre><code>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> weight<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">+</span> value<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>\n<span class="token comment">// 压缩成一维数组，去掉i</span>\ndp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>j <span class="token operator">-</span> weight<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">+</span> value<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>\n</code></pre></div></li><li><p>dp 数组初始化</p><p>只需初始化<code>dp[0] = 0</code>，背包容量为 0，价值为 0</p></li><li><p>确定遍历顺序</p><ul><li><p>01 背包的一维数组解法需要<strong>先遍历物品，再逆序遍历背包</strong>，<strong>逆序遍历确保每个物品只能使用一次</strong></p></li><li><p>完全背包让物品可以无限次使用，所以使用<strong>正序遍历背包</strong></p></li><li><p>01 背包先遍历物品，再逆序遍历背包</p></li><li><p>完全背包先遍历物品，后遍历背包或先遍历背包，后遍历物品</p></li></ul></li><li><p>举例推导 dp 数组</p></li></ol><div class="language-js"><pre><code><span class="token keyword">function</span> <span class="token function">knapsackComplete1D</span><span class="token punctuation">(</span><span class="token parameter">weights<span class="token punctuation">,</span> values<span class="token punctuation">,</span> bagWeight</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> n <span class="token operator">=</span> weights<span class="token punctuation">.</span>length\n\n  <span class="token keyword">const</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>bagWeight <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>\n\n  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">for</span> <span class="token punctuation">(</span>j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> bagWeight<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token keyword">const</span> weight <span class="token operator">=</span> weights<span class="token punctuation">[</span>i<span class="token punctuation">]</span>\n      <span class="token keyword">const</span> value <span class="token operator">=</span> values<span class="token punctuation">[</span>i<span class="token punctuation">]</span>\n      <span class="token keyword">if</span> <span class="token punctuation">(</span>j <span class="token operator">&gt;=</span> weight<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>j <span class="token operator">-</span> weight<span class="token punctuation">]</span> <span class="token operator">+</span> value<span class="token punctuation">)</span>\n      <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>dp<span class="token punctuation">)</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token keyword">return</span> dp<span class="token punctuation">[</span>bagWeight<span class="token punctuation">]</span>\n<span class="token punctuation">}</span>\n</code></pre></div><h2 id="_518-零钱兑换-ii-🌟🌟"><a class="header-anchor" href="#_518-零钱兑换-ii-🌟🌟" aria-hidden="true">#</a> 518.零钱兑换 II 🌟🌟</h2><p><a href="https://leetcode.cn/problems/coin-change-ii/description/" target="_blank" rel="noopener noreferrer">力扣链接</a> 🌟🌟</p><h3 id="题目描述"><a class="header-anchor" href="#题目描述" aria-hidden="true">#</a> 题目描述</h3><p>给定不同面额的硬币和一个总金额。写出函数来计算可以凑成总金额的硬币组合数。假设每一种面额的硬币有无限个。</p><p>示例 1:</p><ul><li>输入: amount = 5, coins = [1, 2, 5]</li><li>输出: 4</li></ul><p>解释: 有四种方式可以凑成总金额:</p><ul><li>5=5</li><li>5=2+2+1</li><li>5=2+1+1+1</li><li>5=1+1+1+1+1</li></ul><p>示例 2:</p><ul><li>输入: amount = 3, coins = [2]</li><li>输出: 0</li><li>解释: 只用面额 2 的硬币不能凑成总金额 3。</li></ul><p>示例 3:</p><ul><li>输入: amount = 10, coins = [10]</li><li>输出: 1</li></ul><p>注意，你可以假设：</p><ul><li>0 &lt;= amount (总金额) &lt;= 5000</li><li>1 &lt;= coin (硬币面额) &lt;= 5000</li><li>硬币种类不超过 500 种</li><li>结果符合 32 位符号整数</li></ul><h3 id="解题思路"><a class="header-anchor" href="#解题思路" aria-hidden="true">#</a> 解题思路</h3><p>类似这种题目：给出一个总数，一些物品，问能否凑成这个总数。<strong>典型的背包问题</strong></p><p>本题与<a href="./dynamic-programming-code4.md/#494目标和-">目标和</a>十分类似。</p><p>目标和求装满背包有多少种方法，本题求装满背包有多少种组合</p><p>动规五部曲：</p><ol><li><p>确定 dp 数组及下标的含义</p><p><code>dp[i][j]</code> 表示在[0,...i-1]的硬币中，凑成金额 j 的组合数</p></li><li><p>确定递推公式</p><p>组合数等于不装硬币 i 和装硬币 i 的组合数之和</p><div class="language-js"><pre><code>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> coins<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span>\n</code></pre></div></li><li><p>dp 数组初始化</p><p>第一行和第一列必须初始化，因为中间的值都是由上面和左边的值推导出来的</p><ul><li><code>dp[0][j]</code>：使用第一个硬币凑成金额 j 的组合数，即如果 j 能被 coins[0]整除，那么就为 0，否则为 1</li><li><code>dp[i][0] = 1</code>：使用 i 个硬币凑成金额 0 的组合数，不装就可以，所以时 1 种</li></ul></li><li><p>确定遍历顺序</p><p>先遍历硬币，再遍历金额</p></li><li><p>举例推导 dp 数组</p><p>以 amount 为 5，coins 为：[2,3,5] 为例：</p><div class="language-js"><pre><code>dp <span class="token operator">=</span> <span class="token punctuation">[</span>\n  <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n  <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n  <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n<span class="token punctuation">]</span>\n</code></pre></div></li></ol><h3 id="代码-2"><a class="header-anchor" href="#代码-2" aria-hidden="true">#</a> 代码</h3><div class="language-js"><pre><code><span class="token keyword">function</span> <span class="token function">change</span><span class="token punctuation">(</span><span class="token parameter">amount<span class="token punctuation">,</span> coins</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> n <span class="token operator">=</span> coins<span class="token punctuation">.</span>length\n\n  <span class="token keyword">const</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>amount <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n\n  <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>\n  <span class="token punctuation">}</span>\n  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> amount<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> j <span class="token operator">%</span> coins<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">0</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> coin <span class="token operator">=</span> coins<span class="token punctuation">[</span>i<span class="token punctuation">]</span>\n    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> amount<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token keyword">if</span> <span class="token punctuation">(</span>j <span class="token operator">&gt;=</span> coin<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> coin<span class="token punctuation">]</span>\n      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>\n        dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span>\n      <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>dp<span class="token punctuation">)</span>\n\n  <span class="token keyword">return</span> dp<span class="token punctuation">[</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>amount<span class="token punctuation">]</span>\n<span class="token punctuation">}</span>\n</code></pre></div><h3 id="一维-dp"><a class="header-anchor" href="#一维-dp" aria-hidden="true">#</a> 一维 dp</h3><p>动规五部曲：</p><ol><li><p>确定 dp 数组及下标的含义</p><p>dp[j] 表示能凑成金额 j 的硬币组合数</p></li><li><p>确定递推公式</p><div class="language-js"><pre><code><span class="token comment">// 二维dp递推公式为</span>\ndp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> coins<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span>\n<span class="token comment">// 压缩成一维</span>\ndp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+</span> dp<span class="token punctuation">[</span>j <span class="token operator">-</span> coins<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span>\n<span class="token comment">// 推导</span>\ndp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+=</span> dp<span class="token punctuation">[</span>j <span class="token operator">-</span> coins<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span>\n</code></pre></div></li><li><p>dp 数组初始化</p><p><code>dp[0] = 1</code>，凑成金额 0 的硬币组合数为 1，即不放入</p></li><li><p>确定遍历顺序</p><p>先遍历硬币，再遍历金额</p></li><li><p>举例推导 dp 数组</p></li></ol><h4 id="代码-3"><a class="header-anchor" href="#代码-3" aria-hidden="true">#</a> 代码</h4><div class="language-js"><pre><code><span class="token keyword">function</span> <span class="token function">change</span><span class="token punctuation">(</span><span class="token parameter">amount<span class="token punctuation">,</span> coins</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> n <span class="token operator">=</span> coins<span class="token punctuation">.</span>length\n  <span class="token keyword">const</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>amount <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>\n\n  dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>\n\n  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> coin <span class="token operator">=</span> coins<span class="token punctuation">[</span>i<span class="token punctuation">]</span>\n    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> coin<span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> amount<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+=</span> dp<span class="token punctuation">[</span>j <span class="token operator">-</span> coin<span class="token punctuation">]</span>\n    <span class="token punctuation">}</span>\n\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>dp<span class="token punctuation">)</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token keyword">return</span> dp<span class="token punctuation">[</span>amount<span class="token punctuation">]</span>\n<span class="token punctuation">}</span>\n</code></pre></div><h2 id="_377-组合总和-ⅳ-🌟🌟"><a class="header-anchor" href="#_377-组合总和-ⅳ-🌟🌟" aria-hidden="true">#</a> 377. 组合总和 Ⅳ 🌟🌟</h2><p><a href="https://leetcode.cn/problems/target-sum/description/" target="_blank" rel="noopener noreferrer">力扣链接</a> 🌟🌟</p><h3 id="题目描述-2"><a class="header-anchor" href="#题目描述-2" aria-hidden="true">#</a> 题目描述</h3><p>给定一个由正整数组成且不存在重复数字的数组，找出和为给定目标正整数的组合的个数。</p><p>示例:</p><ul><li>nums = [1, 2, 3]</li><li>target = 4</li></ul><p>所有可能的组合为： (1, 1, 1, 1) (1, 1, 2) (1, 2, 1) (1, 3) (2, 1, 1) (2, 2) (3, 1)</p><p>请注意，顺序不同的序列被视作不同的组合。</p><p>因此输出为 7。</p><h3 id="解题思路-2"><a class="header-anchor" href="#解题思路-2" aria-hidden="true">#</a> 解题思路</h3><p>本题与上题的区别是：<strong>本题求排列数</strong></p><p><strong>求装满背包有几种方法，递归公式都是一样的，没有什么差别，但关键在于遍历顺序！</strong></p><p>动规五部曲：</p><ol><li><p>确定 dp 数组及下标的含义</p><p>dp[j]表示和为 j 的排列数</p></li><li><p>确定递推公式</p><p>装满背包的递推公式都一致：</p><div class="language-js"><pre><code>dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+=</span> dp<span class="token punctuation">[</span>j <span class="token operator">-</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span>\n</code></pre></div></li><li><p>dp 数组初始化</p><p>根据递推公式，需要初始化 <code>dp[0] = 1</code>（和为 0 的排列数为 1），这样才能推导出其他</p></li><li><p>确定遍历顺序</p><ul><li><p><strong>如果求组合数就是外层 for 循环遍历物品，内层 for 遍历背包</strong></p></li><li><p><strong>如果求排列数就是外层 for 遍历背包，内层 for 循环遍历物品</strong></p></li><li><p>如果先遍历物品 nums，再遍历背包 target 时，如果计算 dp[4]时，只能得到(1, 3)，无法得到(3, 1),因为 nums 先遍历，dp[4]已经定为(1,3)</p></li><li><p>所以需要先遍历背包 target，再遍历物品 nums，计算 dp[4]时，可以得到(3,1)和(1,3)</p></li></ul></li><li><p>举例推导 dp 数组</p><p>假设 target 为 4，nums 为 [1, 2, 3]：</p><div class="language-js"><pre><code>dp <span class="token operator">=</span> <span class="token punctuation">[</span>\n  <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n  <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n  <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n  <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n<span class="token punctuation">]</span>\n</code></pre></div></li></ol><h4 id="代码-4"><a class="header-anchor" href="#代码-4" aria-hidden="true">#</a> 代码</h4><div class="language-js"><pre><code><span class="token keyword">function</span> <span class="token function">combinationSum4</span><span class="token punctuation">(</span><span class="token parameter">nums<span class="token punctuation">,</span> target</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>target <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>\n\n  dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>\n\n  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> target<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token keyword">const</span> num <span class="token operator">=</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span>\n      <span class="token keyword">if</span> <span class="token punctuation">(</span>j <span class="token operator">&gt;=</span> num<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+=</span> dp<span class="token punctuation">[</span>j <span class="token operator">-</span> num<span class="token punctuation">]</span>\n      <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>dp<span class="token punctuation">)</span>\n  <span class="token punctuation">}</span>\n  <span class="token keyword">return</span> dp<span class="token punctuation">[</span>target<span class="token punctuation">]</span>\n<span class="token punctuation">}</span>\n</code></pre></div><h4 id="二维-dp-数组解法"><a class="header-anchor" href="#二维-dp-数组解法" aria-hidden="true">#</a> 二维 dp 数组解法</h4><p>动规五部曲：</p><ol><li><p>确定 dp 数组及下标的含义</p><p><code>dp[i][j]</code> 使用前 i 种硬币（即 coins[0...i-1]）凑成金额 j 的组合数</p></li><li><p>确定递推公式</p><div class="language-js"><pre><code>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span>\n</code></pre></div></li><li><p>dp 数组初始化</p><ul><li><code>dp[i][0] = 1</code>，表示前 i 个数和为 1 时，不放入，有一种组合</li><li><code>dp[0][j] = nums[0] === j ? 1 : 0</code>，表示只有第一个数时，和为 j 的组合数，只有当 nums[0] === j 时，才有一种组合</li></ul></li><li><p>确定遍历顺序</p><p>先遍历背包，再遍历物品</p></li><li><p>举例推导 dp 数组</p></li></ol><div class="language-js"><pre><code><span class="token keyword">function</span> <span class="token function">combinationSum4</span><span class="token punctuation">(</span><span class="token parameter">nums<span class="token punctuation">,</span> target</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> n <span class="token operator">=</span> nums<span class="token punctuation">.</span>length\n  <span class="token keyword">const</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>target <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n\n  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> target<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token keyword">if</span> <span class="token punctuation">(</span>j <span class="token operator">&gt;=</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token comment">// 不放nums[i]</span>\n        <span class="token comment">// i = 0 时，dp[-1][j]恰好为0，所以没有特殊处理</span>\n        dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span>\n          dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+</span>\n          <span class="token comment">// 放nums[i]。对于和为j的组合，只有试过全部物品，才能知道有几种组合方式。所以取最后一个物品dp[-1][j-nums[i]]</span>\n          dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span>\n      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>\n        dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span>\n      <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n\n  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>dp<span class="token punctuation">)</span>\n  <span class="token keyword">return</span> dp<span class="token punctuation">[</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>target<span class="token punctuation">]</span>\n<span class="token punctuation">}</span>\n</code></pre></div><h2 id="_70-爬楼梯（进阶版）-🌟🌟"><a class="header-anchor" href="#_70-爬楼梯（进阶版）-🌟🌟" aria-hidden="true">#</a> 70. 爬楼梯（进阶版） 🌟🌟</h2><h3 id="题目描述-3"><a class="header-anchor" href="#题目描述-3" aria-hidden="true">#</a> 题目描述</h3><p>假设你正在爬楼梯。需要 n 阶你才能到达楼顶。</p><p>每次你可以爬至多 m (1 &lt;= m &lt; n)个台阶。你有多少种不同的方法可以爬到楼顶呢？</p><p>注意：给定 n 是一个正整数。</p><p>输入描述：输入共一行，包含两个正整数，分别表示 n, m</p><p>输出描述：输出一个整数，表示爬到楼顶的方法数。</p><p>输入示例：3 2</p><p>输出示例：3</p><p>提示：</p><p>当 m = 2，n = 3 时，n = 3 这表示一共有三个台阶，m = 2 代表你每次可以爬一个台阶或者两个台阶。</p><p>此时你有三种方法可以爬到楼顶。</p><ul><li>1 阶 + 1 阶 + 1 阶段</li><li>1 阶 + 2 阶</li><li>2 阶 + 1 阶</li></ul><h3 id="解题思路-3"><a class="header-anchor" href="#解题思路-3" aria-hidden="true">#</a> 解题思路</h3><p>最初的<a href="./dynamic-programming-code.md/#70-爬楼梯-">爬楼梯</a>一层最多爬两层台阶，而这里可以爬 1-m 个台阶，因此问题就转成了完全背包问题。</p><p>动规五部曲：</p><ol><li><p>确定 dp 数组及下标的含义</p><p>dp[i]表示爬到第 i 阶楼梯的方法数</p></li><li><p>确定递推公式</p><p>求装满背包的递推公式都是：<code>dp[i] += dp[i - nums[j]]</code></p><p>本体 j 指的是步数，及 dp[i] = dp[i-1] + dp[i-2] + ... + dp[i-j]，所以可得递推公式为：</p><div class="language-js"><pre><code>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+=</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> j<span class="token punctuation">]</span>\n</code></pre></div></li><li><p>初始化 dp 数组</p><p><code>dp[0] = 1</code>，爬到第 0 阶楼梯的方法数为 1，dp[i]是由 dp[i-j]推导出来的，所以 dp[0]必须初始化</p></li><li><p>确定遍历顺序</p><ul><li>完全背包问题：先遍历背包，再遍历物品</li><li>在这里，先遍历 target，再遍历 nums</li></ul></li><li><p>举例推导 dp 数组</p></li></ol><h3 id="代码-5"><a class="header-anchor" href="#代码-5" aria-hidden="true">#</a> 代码</h3><div class="language-js"><pre><code><span class="token keyword">var</span> <span class="token function-variable function">climbStairs</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">n<span class="token punctuation">,</span> m</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">let</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>\n  dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>\n  <span class="token comment">// 排列题，注意循环顺序，背包在外物品在内</span>\n  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token comment">//遍历背包</span>\n    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token comment">//遍历物品</span>\n      <span class="token keyword">if</span> <span class="token punctuation">(</span>j <span class="token operator">-</span> i <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+</span> dp<span class="token punctuation">[</span>j <span class="token operator">-</span> i<span class="token punctuation">]</span>\n    <span class="token punctuation">}</span>\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>dp<span class="token punctuation">)</span>\n  <span class="token punctuation">}</span>\n  <span class="token keyword">return</span> dp<span class="token punctuation">[</span>n<span class="token punctuation">]</span>\n<span class="token punctuation">}</span>\n</code></pre></div><h2 id="_01-背包对比完全背包"><a class="header-anchor" href="#_01-背包对比完全背包" aria-hidden="true">#</a> 01 背包对比完全背包</h2><h3 id="_01-背包问题"><a class="header-anchor" href="#_01-背包问题" aria-hidden="true">#</a> 01 背包问题</h3><h4 id="定义"><a class="header-anchor" href="#定义" aria-hidden="true">#</a> 定义</h4><ul><li>特点：每个物品只能选择 0 次或 1 次</li><li>问题模型：在背包容量限制下，求最大价值或组合数</li><li>状态定义：<code>dp[j]</code> 表示容量为 <code>j</code> 的背包能装的最大价值（或组合数）</li></ul><h4 id="状态转移方程"><a class="header-anchor" href="#状态转移方程" aria-hidden="true">#</a> 状态转移方程</h4><div class="language-js"><pre><code>dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>j <span class="token operator">-</span> weight<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">+</span> value<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 求最大价值</span>\n<span class="token comment">// 或</span>\ndp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+=</span> dp<span class="token punctuation">[</span>j <span class="token operator">-</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token comment">// 求组合数（如目标和问题）</span>\n</code></pre></div><h4 id="初始化"><a class="header-anchor" href="#初始化" aria-hidden="true">#</a> 初始化</h4><ul><li>求最大价值：<code>dp</code> 数组初始化为 0</li><li>求组合数：<code>dp[0] = 1</code>（表示空背包有一种方式），其余初始化为 0</li></ul><h4 id="遍历顺序"><a class="header-anchor" href="#遍历顺序" aria-hidden="true">#</a> 遍历顺序</h4><div class="language-js"><pre><code><span class="token keyword">for</span> <span class="token punctuation">(</span>物品 i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">for</span> <span class="token punctuation">(</span>容量 j <span class="token operator">=</span> maxWeight<span class="token punctuation">;</span> j <span class="token operator">&gt;=</span> weight<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span> j<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 倒序遍历</span>\n    dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>j <span class="token operator">-</span> weight<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">+</span> value<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre></div><h4 id="典型例题"><a class="header-anchor" href="#典型例题" aria-hidden="true">#</a> 典型例题</h4><ul><li><a href="https://leetcode.com/problems/partition-equal-subset-sum/" target="_blank" rel="noopener noreferrer">分割等和子集</a></li><li><a href="https://leetcode.com/problems/target-sum/" target="_blank" rel="noopener noreferrer">目标和</a></li></ul><h3 id="完全背包问题"><a class="header-anchor" href="#完全背包问题" aria-hidden="true">#</a> 完全背包问题</h3><h4 id="定义-2"><a class="header-anchor" href="#定义-2" aria-hidden="true">#</a> 定义</h4><ul><li>特点：每个物品可以选无限次</li><li>问题模型：在背包容量限制下，求装满背包的组合数或最小物品数</li><li>状态定义：<code>dp[j]</code> 表示容量为 <code>j</code> 的背包的组合数或最小物品数</li></ul><h4 id="状态转移方程-2"><a class="header-anchor" href="#状态转移方程-2" aria-hidden="true">#</a> 状态转移方程</h4><div class="language-js"><pre><code>dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>j <span class="token operator">-</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">+</span> value<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 求最大价值</span>\ndp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+=</span> dp<span class="token punctuation">[</span>j <span class="token operator">-</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token comment">// 求组合数（如零钱兑换 II）</span>\ndp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>j <span class="token operator">-</span> coins<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// 求最小物品数（如零钱兑换）</span>\n</code></pre></div><h4 id="初始化-2"><a class="header-anchor" href="#初始化-2" aria-hidden="true">#</a> 初始化</h4><ul><li>求组合数：<code>dp[0] = 1</code>，其余初始化为 0</li><li>求最小物品数：<code>dp[0] = 0</code>，其余初始化为 <code>Infinity</code></li></ul><h4 id="遍历顺序-2"><a class="header-anchor" href="#遍历顺序-2" aria-hidden="true">#</a> 遍历顺序</h4><div class="language-js"><pre><code><span class="token keyword">for</span> <span class="token punctuation">(</span>物品 i<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">for</span> <span class="token punctuation">(</span>容量 j <span class="token operator">=</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> maxWeight<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 正序遍历</span>\n    dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>j <span class="token operator">-</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">+</span> value<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+=</span> dp<span class="token punctuation">[</span>j <span class="token operator">-</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 组合数</span>\n    dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>j <span class="token operator">-</span> coins<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 最小物品数</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre></div><h4 id="典型例题-2"><a class="header-anchor" href="#典型例题-2" aria-hidden="true">#</a> 典型例题</h4><ul><li><a href="https://leetcode.com/problems/coin-change-ii/" target="_blank" rel="noopener noreferrer">零钱兑换 II</a></li><li><a href="https://leetcode.com/problems/perfect-squares/" target="_blank" rel="noopener noreferrer">完全平方数</a></li></ul><h3 id="总结"><a class="header-anchor" href="#总结" aria-hidden="true">#</a> 总结</h3><ul><li>01 背包：物品唯一，倒序遍历容量，解决“是否选择”的问题</li><li>完全背包：物品无限，正序遍历容量，解决“多次选择”的问题</li><li>核心技巧：根据问题特点选择遍历顺序，区分组合数或最值问题的初始化方式</li></ul>',112)];t.render=function(a,p,t,c,e,u){return n(),s("div",null,o)};export{p as __pageData,t as default};
