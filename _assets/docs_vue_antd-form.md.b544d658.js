import{f as n,g as s,J as a}from"./common-03e46d7f.js";const p='{"title":"antd-vue在Modal组件中使用form组件","frontmatter":{"date":"2020-08-17","title":"antd-vue在Modal组件中使用form组件","tags":["vue"],"describe":"如何在Modal组件中使用form组件"},"headers":[{"level":3,"title":"步骤","slug":"步骤"}],"relativePath":"docs/vue/antd-form.md","lastUpdated":1743558905947.9456}';var t={};const o=[a('<h3 id="步骤"><a class="header-anchor" href="#步骤" aria-hidden="true">#</a> 步骤</h3><ol><li>modal中添加form，这里modal的visible属性和form的v-if绑定同一个值，给定form的ref值</li></ol><div class="language-javascript"><pre><code><span class="token operator">&lt;</span>a<span class="token operator">-</span>form\n  <span class="token operator">:</span>form<span class="token operator">=</span><span class="token string">&quot;form&quot;</span>\n  v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;addVisible&quot;</span>\n  ref<span class="token operator">=</span><span class="token string">&quot;getForm&quot;</span>\n<span class="token operator">&gt;</span>\n</code></pre></div><ol start="2"><li>data中初始化form</li></ol><div class="language-javascript"><pre><code><span class="token literal-property property">form</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$form<span class="token punctuation">.</span><span class="token function">createForm</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>\n<span class="token literal-property property">formItemLayout</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n  <span class="token literal-property property">labelCol</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">span</span><span class="token operator">:</span> <span class="token number">8</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token literal-property property">wrapperCol</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">span</span><span class="token operator">:</span> <span class="token number">10</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n</code></pre></div><ol start="3"><li>补充form表单，比如校验等</li></ol><div class="language-javascript"><pre><code>  <span class="token operator">&lt;</span>a<span class="token operator">-</span>form<span class="token operator">-</span>item\n    v<span class="token operator">-</span>bind<span class="token operator">=</span><span class="token string">&quot;formItemLayout&quot;</span>\n    label<span class="token operator">=</span><span class="token string">&quot;密码&quot;</span>\n  <span class="token operator">&gt;</span>\n    <span class="token operator">&lt;</span>a<span class="token operator">-</span>input\n      type<span class="token operator">=</span><span class="token string">&quot;password&quot;</span>\n      v<span class="token operator">-</span>decorator<span class="token operator">=</span>&quot;<span class="token punctuation">[</span>\n        <span class="token string">&#39;password&#39;</span><span class="token punctuation">,</span>\n        <span class="token punctuation">{</span>\n          <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>\n            <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">&#39;请输入密码&#39;</span><span class="token punctuation">,</span>\n          <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>\n            <span class="token literal-property property">validator</span><span class="token operator">:</span> validateToNextPassword<span class="token punctuation">,</span>\n          <span class="token punctuation">}</span><span class="token punctuation">]</span>\n        <span class="token punctuation">}</span>\n      <span class="token punctuation">]</span>&quot;\n    <span class="token operator">/</span><span class="token operator">&gt;</span>\n  <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>\n\n  <span class="token function">validateToNextPassword</span>  <span class="token punctuation">(</span><span class="token parameter">rule<span class="token punctuation">,</span> value<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> pattern <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^[a-zA-Z][a-zA-Z0-9_]*$</span><span class="token regex-delimiter">/</span></span>\n    <span class="token keyword">if</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>pattern<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&#39;字母数字下划线组成&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>\n        <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n      <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>\n      <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n</code></pre></div><ol start="4"><li>modal点击ok事件，通过refs来获取form对象</li></ol><div class="language-javascript"><pre><code><span class="token keyword">const</span> form <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>getForm<span class="token punctuation">.</span>form <span class="token comment">// 通过refs属性可以获得对话框内form对象</span>\nform<span class="token punctuation">.</span><span class="token function">validateFields</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> values</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>addVisible <span class="token operator">=</span> <span class="token boolean">false</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n</code></pre></div><ol start="5"><li>如果需要修改 使用setFields来全部设置，或者使用setFieldValue单个设置</li></ol><div class="language-js"><pre><code><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span>form<span class="token punctuation">.</span><span class="token function">setFields</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n    <span class="token string-property property">&#39;realname&#39;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> record<span class="token punctuation">.</span>realname<span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token string-property property">&#39;username&#39;</span><span class="token operator">:</span><span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> record<span class="token punctuation">.</span>username<span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token string-property property">&#39;password&#39;</span><span class="token operator">:</span><span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> record<span class="token punctuation">.</span>password<span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token string-property property">&#39;email&#39;</span><span class="token operator">:</span><span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> record<span class="token punctuation">.</span>email<span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token string-property property">&#39;phone&#39;</span><span class="token operator">:</span><span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> record<span class="token punctuation">.</span>phone<span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>\n</code></pre></div>',11)];t.render=function(a,p,t,e,c,l){return n(),s("div",null,o)};export{p as __pageData,t as default};
